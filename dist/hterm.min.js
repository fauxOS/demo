// Use of this source code is governed by a BSD-style license that can be
'use strict';(function(e,r){'function'==typeof define&&define.amd?define([],r):'object'==typeof module&&module.exports?module.exports=r():e.returnExports=r()})(this,function(){var e=Math.max,r=String.fromCharCode,t=Math.floor,o=Math.ceil,n=Math.round,s=Math.min;if('undefined'!=typeof l)throw new Error('Global "lib" object already exists.');var a={},l={};a.lib=l,l.runtimeDependencies_={},l.initCallbacks_=[],l.rtdep=function(){var e;try{throw new Error}catch(t){var r=t.stack.split('\n');e=3<=r.length?r[2].replace(/^\s*at\s+/,''):r[1].replace(/^\s*global code@/,'')}for(var t=0,o;t<arguments.length;t++)if(o=arguments[t],o instanceof Array)l.rtdep.apply(l,o);else{var n=this.runtimeDependencies_[o];n||(n=this.runtimeDependencies_[o]=[]),n.push(e)}},l.ensureRuntimeDependencies_=function(){var e=!0;for(var r in l.runtimeDependencies_)for(var t=l.runtimeDependencies_[r],o=r.split('.'),n=a,s=0;s<o.length;s++){if(!(o[s]in n)){console.warn('Missing "'+r+'" is needed by',t),e=!1;break}n=n[o[s]]}if(!e)throw new Error('Failed runtime dependency check')},l.registerInit=function(e,r){return l.initCallbacks_.push([e,r]),r},l.init=function(e,r){var t=l.initCallbacks_,o=function(){if(t.length){var n=t.shift();r&&r('init: '+n[0]),n[1](l.f.alarm(o))}else e()};if('function'!=typeof e)throw new Error('Missing or invalid argument: onInit');l.ensureRuntimeDependencies_(),setTimeout(o,0)},'use strict',l.colors={},l.colors.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp('^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$'.replace(/\//g,'\\'),'i'),rgba:new RegExp('^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$'.replace(/\//g,'\\'),'i'),rgbx:new RegExp('^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$'.replace(/\//g,'\\'),'i'),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},l.colors.rgbToX11=function(e){function r(e){for(e=(257*s(e,255)).toString(16);4>e.length;)e='0'+e;return e}var t=e.match(l.colors.re_.rgbx);return t?'rgb:'+r(t[1])+'/'+r(t[2])+'/'+r(t[3]):null},l.colors.x11ToCSS=function(e){var r=e.match(l.colors.re_.x11rgb);return r?(r.splice(0,1),l.colors.arrayToRGBA(r.map(function(e){return 1==e.length?parseInt(e+e,16):2==e.length?parseInt(e,16):(3==e.length&&(e+=e.substr(2)),n(parseInt(e,16)/257))}))):l.colors.nameToRGB(e)},l.colors.hexToRGB=function(e){function r(e){var r=4==e.length?l.colors.re_.hex16:l.colors.re_.hex24,t=e.match(r);return t?'rgb('+parseInt(t[1],16)+', '+parseInt(t[2],16)+', '+parseInt(t[3],16)+')':null}if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]=r(e[t]);else e=r(e);return e},l.colors.rgbToHex=function(e){function r(e){var r=l.colors.crackRGB(e);return'#'+l.f.zpad((parseInt(r[0])<<16|parseInt(r[1])<<8|parseInt(r[2])<<0).toString(16),6)}if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]=r(e[t]);else e=r(e);return e},l.colors.normalizeCSS=function(e){return'#'==e.substr(0,1)?l.colors.hexToRGB(e):l.colors.re_.rgbx.test(e)?e:l.colors.nameToRGB(e)},l.colors.arrayToRGBA=function(e){var r=3<e.length?e[3]:1;return'rgba('+e[0]+', '+e[1]+', '+e[2]+', '+r+')'},l.colors.setAlpha=function(e,r){var t=l.colors.crackRGB(e);return t[3]=r,l.colors.arrayToRGBA(t)},l.colors.mix=function(e,r,t){for(var o=l.colors.crackRGB(e),s=l.colors.crackRGB(r),a=0,i;4>a;++a)i=s[a]-o[a],o[a]=n(parseInt(o[a])+i*t);return l.colors.arrayToRGBA(o)},l.colors.crackRGB=function(e){if('rgba'==e.substr(0,4)){var r=e.match(l.colors.re_.rgba);if(r)return r.shift(),r}else{var r=e.match(l.colors.re_.rgb);if(r)return r.shift(),r.push(1),r}return console.error('Couldn\'t crack: '+e),null},l.colors.nameToRGB=function(e){return e in l.colors.colorNames?l.colors.colorNames[e]:(e=e.toLowerCase(),e in l.colors.colorNames)?l.colors.colorNames[e]:(e=e.replace(/\s+/g,''),e in l.colors.colorNames?l.colors.colorNames[e]:null)},l.colors.stockColorPalette=l.colors.hexToRGB(['#000000','#CC0000','#4E9A06','#C4A000','#3465A4','#75507B','#06989A','#D3D7CF','#555753','#EF2929','#00BA13','#FCE94F','#729FCF','#F200CB','#00B5BD','#EEEEEC','#000000','#00005F','#000087','#0000AF','#0000D7','#0000FF','#005F00','#005F5F','#005F87','#005FAF','#005FD7','#005FFF','#008700','#00875F','#008787','#0087AF','#0087D7','#0087FF','#00AF00','#00AF5F','#00AF87','#00AFAF','#00AFD7','#00AFFF','#00D700','#00D75F','#00D787','#00D7AF','#00D7D7','#00D7FF','#00FF00','#00FF5F','#00FF87','#00FFAF','#00FFD7','#00FFFF','#5F0000','#5F005F','#5F0087','#5F00AF','#5F00D7','#5F00FF','#5F5F00','#5F5F5F','#5F5F87','#5F5FAF','#5F5FD7','#5F5FFF','#5F8700','#5F875F','#5F8787','#5F87AF','#5F87D7','#5F87FF','#5FAF00','#5FAF5F','#5FAF87','#5FAFAF','#5FAFD7','#5FAFFF','#5FD700','#5FD75F','#5FD787','#5FD7AF','#5FD7D7','#5FD7FF','#5FFF00','#5FFF5F','#5FFF87','#5FFFAF','#5FFFD7','#5FFFFF','#870000','#87005F','#870087','#8700AF','#8700D7','#8700FF','#875F00','#875F5F','#875F87','#875FAF','#875FD7','#875FFF','#878700','#87875F','#878787','#8787AF','#8787D7','#8787FF','#87AF00','#87AF5F','#87AF87','#87AFAF','#87AFD7','#87AFFF','#87D700','#87D75F','#87D787','#87D7AF','#87D7D7','#87D7FF','#87FF00','#87FF5F','#87FF87','#87FFAF','#87FFD7','#87FFFF','#AF0000','#AF005F','#AF0087','#AF00AF','#AF00D7','#AF00FF','#AF5F00','#AF5F5F','#AF5F87','#AF5FAF','#AF5FD7','#AF5FFF','#AF8700','#AF875F','#AF8787','#AF87AF','#AF87D7','#AF87FF','#AFAF00','#AFAF5F','#AFAF87','#AFAFAF','#AFAFD7','#AFAFFF','#AFD700','#AFD75F','#AFD787','#AFD7AF','#AFD7D7','#AFD7FF','#AFFF00','#AFFF5F','#AFFF87','#AFFFAF','#AFFFD7','#AFFFFF','#D70000','#D7005F','#D70087','#D700AF','#D700D7','#D700FF','#D75F00','#D75F5F','#D75F87','#D75FAF','#D75FD7','#D75FFF','#D78700','#D7875F','#D78787','#D787AF','#D787D7','#D787FF','#D7AF00','#D7AF5F','#D7AF87','#D7AFAF','#D7AFD7','#D7AFFF','#D7D700','#D7D75F','#D7D787','#D7D7AF','#D7D7D7','#D7D7FF','#D7FF00','#D7FF5F','#D7FF87','#D7FFAF','#D7FFD7','#D7FFFF','#FF0000','#FF005F','#FF0087','#FF00AF','#FF00D7','#FF00FF','#FF5F00','#FF5F5F','#FF5F87','#FF5FAF','#FF5FD7','#FF5FFF','#FF8700','#FF875F','#FF8787','#FF87AF','#FF87D7','#FF87FF','#FFAF00','#FFAF5F','#FFAF87','#FFAFAF','#FFAFD7','#FFAFFF','#FFD700','#FFD75F','#FFD787','#FFD7AF','#FFD7D7','#FFD7FF','#FFFF00','#FFFF5F','#FFFF87','#FFFFAF','#FFFFD7','#FFFFFF','#080808','#121212','#1C1C1C','#262626','#303030','#3A3A3A','#444444','#4E4E4E','#585858','#626262','#6C6C6C','#767676','#808080','#8A8A8A','#949494','#9E9E9E','#A8A8A8','#B2B2B2','#BCBCBC','#C6C6C6','#D0D0D0','#DADADA','#E4E4E4','#EEEEEE']),l.colors.colorPalette=l.colors.stockColorPalette,l.colors.colorNames={aliceblue:'rgb(240, 248, 255)',antiquewhite:'rgb(250, 235, 215)',antiquewhite1:'rgb(255, 239, 219)',antiquewhite2:'rgb(238, 223, 204)',antiquewhite3:'rgb(205, 192, 176)',antiquewhite4:'rgb(139, 131, 120)',aquamarine:'rgb(127, 255, 212)',aquamarine1:'rgb(127, 255, 212)',aquamarine2:'rgb(118, 238, 198)',aquamarine3:'rgb(102, 205, 170)',aquamarine4:'rgb(69, 139, 116)',azure:'rgb(240, 255, 255)',azure1:'rgb(240, 255, 255)',azure2:'rgb(224, 238, 238)',azure3:'rgb(193, 205, 205)',azure4:'rgb(131, 139, 139)',beige:'rgb(245, 245, 220)',bisque:'rgb(255, 228, 196)',bisque1:'rgb(255, 228, 196)',bisque2:'rgb(238, 213, 183)',bisque3:'rgb(205, 183, 158)',bisque4:'rgb(139, 125, 107)',black:'rgb(0, 0, 0)',blanchedalmond:'rgb(255, 235, 205)',blue:'rgb(0, 0, 255)',blue1:'rgb(0, 0, 255)',blue2:'rgb(0, 0, 238)',blue3:'rgb(0, 0, 205)',blue4:'rgb(0, 0, 139)',blueviolet:'rgb(138, 43, 226)',brown:'rgb(165, 42, 42)',brown1:'rgb(255, 64, 64)',brown2:'rgb(238, 59, 59)',brown3:'rgb(205, 51, 51)',brown4:'rgb(139, 35, 35)',burlywood:'rgb(222, 184, 135)',burlywood1:'rgb(255, 211, 155)',burlywood2:'rgb(238, 197, 145)',burlywood3:'rgb(205, 170, 125)',burlywood4:'rgb(139, 115, 85)',cadetblue:'rgb(95, 158, 160)',cadetblue1:'rgb(152, 245, 255)',cadetblue2:'rgb(142, 229, 238)',cadetblue3:'rgb(122, 197, 205)',cadetblue4:'rgb(83, 134, 139)',chartreuse:'rgb(127, 255, 0)',chartreuse1:'rgb(127, 255, 0)',chartreuse2:'rgb(118, 238, 0)',chartreuse3:'rgb(102, 205, 0)',chartreuse4:'rgb(69, 139, 0)',chocolate:'rgb(210, 105, 30)',chocolate1:'rgb(255, 127, 36)',chocolate2:'rgb(238, 118, 33)',chocolate3:'rgb(205, 102, 29)',chocolate4:'rgb(139, 69, 19)',coral:'rgb(255, 127, 80)',coral1:'rgb(255, 114, 86)',coral2:'rgb(238, 106, 80)',coral3:'rgb(205, 91, 69)',coral4:'rgb(139, 62, 47)',cornflowerblue:'rgb(100, 149, 237)',cornsilk:'rgb(255, 248, 220)',cornsilk1:'rgb(255, 248, 220)',cornsilk2:'rgb(238, 232, 205)',cornsilk3:'rgb(205, 200, 177)',cornsilk4:'rgb(139, 136, 120)',cyan:'rgb(0, 255, 255)',cyan1:'rgb(0, 255, 255)',cyan2:'rgb(0, 238, 238)',cyan3:'rgb(0, 205, 205)',cyan4:'rgb(0, 139, 139)',darkblue:'rgb(0, 0, 139)',darkcyan:'rgb(0, 139, 139)',darkgoldenrod:'rgb(184, 134, 11)',darkgoldenrod1:'rgb(255, 185, 15)',darkgoldenrod2:'rgb(238, 173, 14)',darkgoldenrod3:'rgb(205, 149, 12)',darkgoldenrod4:'rgb(139, 101, 8)',darkgray:'rgb(169, 169, 169)',darkgreen:'rgb(0, 100, 0)',darkgrey:'rgb(169, 169, 169)',darkkhaki:'rgb(189, 183, 107)',darkmagenta:'rgb(139, 0, 139)',darkolivegreen:'rgb(85, 107, 47)',darkolivegreen1:'rgb(202, 255, 112)',darkolivegreen2:'rgb(188, 238, 104)',darkolivegreen3:'rgb(162, 205, 90)',darkolivegreen4:'rgb(110, 139, 61)',darkorange:'rgb(255, 140, 0)',darkorange1:'rgb(255, 127, 0)',darkorange2:'rgb(238, 118, 0)',darkorange3:'rgb(205, 102, 0)',darkorange4:'rgb(139, 69, 0)',darkorchid:'rgb(153, 50, 204)',darkorchid1:'rgb(191, 62, 255)',darkorchid2:'rgb(178, 58, 238)',darkorchid3:'rgb(154, 50, 205)',darkorchid4:'rgb(104, 34, 139)',darkred:'rgb(139, 0, 0)',darksalmon:'rgb(233, 150, 122)',darkseagreen:'rgb(143, 188, 143)',darkseagreen1:'rgb(193, 255, 193)',darkseagreen2:'rgb(180, 238, 180)',darkseagreen3:'rgb(155, 205, 155)',darkseagreen4:'rgb(105, 139, 105)',darkslateblue:'rgb(72, 61, 139)',darkslategray:'rgb(47, 79, 79)',darkslategray1:'rgb(151, 255, 255)',darkslategray2:'rgb(141, 238, 238)',darkslategray3:'rgb(121, 205, 205)',darkslategray4:'rgb(82, 139, 139)',darkslategrey:'rgb(47, 79, 79)',darkturquoise:'rgb(0, 206, 209)',darkviolet:'rgb(148, 0, 211)',debianred:'rgb(215, 7, 81)',deeppink:'rgb(255, 20, 147)',deeppink1:'rgb(255, 20, 147)',deeppink2:'rgb(238, 18, 137)',deeppink3:'rgb(205, 16, 118)',deeppink4:'rgb(139, 10, 80)',deepskyblue:'rgb(0, 191, 255)',deepskyblue1:'rgb(0, 191, 255)',deepskyblue2:'rgb(0, 178, 238)',deepskyblue3:'rgb(0, 154, 205)',deepskyblue4:'rgb(0, 104, 139)',dimgray:'rgb(105, 105, 105)',dimgrey:'rgb(105, 105, 105)',dodgerblue:'rgb(30, 144, 255)',dodgerblue1:'rgb(30, 144, 255)',dodgerblue2:'rgb(28, 134, 238)',dodgerblue3:'rgb(24, 116, 205)',dodgerblue4:'rgb(16, 78, 139)',firebrick:'rgb(178, 34, 34)',firebrick1:'rgb(255, 48, 48)',firebrick2:'rgb(238, 44, 44)',firebrick3:'rgb(205, 38, 38)',firebrick4:'rgb(139, 26, 26)',floralwhite:'rgb(255, 250, 240)',forestgreen:'rgb(34, 139, 34)',gainsboro:'rgb(220, 220, 220)',ghostwhite:'rgb(248, 248, 255)',gold:'rgb(255, 215, 0)',gold1:'rgb(255, 215, 0)',gold2:'rgb(238, 201, 0)',gold3:'rgb(205, 173, 0)',gold4:'rgb(139, 117, 0)',goldenrod:'rgb(218, 165, 32)',goldenrod1:'rgb(255, 193, 37)',goldenrod2:'rgb(238, 180, 34)',goldenrod3:'rgb(205, 155, 29)',goldenrod4:'rgb(139, 105, 20)',gray:'rgb(190, 190, 190)',gray0:'rgb(0, 0, 0)',gray1:'rgb(3, 3, 3)',gray10:'rgb(26, 26, 26)',gray100:'rgb(255, 255, 255)',gray11:'rgb(28, 28, 28)',gray12:'rgb(31, 31, 31)',gray13:'rgb(33, 33, 33)',gray14:'rgb(36, 36, 36)',gray15:'rgb(38, 38, 38)',gray16:'rgb(41, 41, 41)',gray17:'rgb(43, 43, 43)',gray18:'rgb(46, 46, 46)',gray19:'rgb(48, 48, 48)',gray2:'rgb(5, 5, 5)',gray20:'rgb(51, 51, 51)',gray21:'rgb(54, 54, 54)',gray22:'rgb(56, 56, 56)',gray23:'rgb(59, 59, 59)',gray24:'rgb(61, 61, 61)',gray25:'rgb(64, 64, 64)',gray26:'rgb(66, 66, 66)',gray27:'rgb(69, 69, 69)',gray28:'rgb(71, 71, 71)',gray29:'rgb(74, 74, 74)',gray3:'rgb(8, 8, 8)',gray30:'rgb(77, 77, 77)',gray31:'rgb(79, 79, 79)',gray32:'rgb(82, 82, 82)',gray33:'rgb(84, 84, 84)',gray34:'rgb(87, 87, 87)',gray35:'rgb(89, 89, 89)',gray36:'rgb(92, 92, 92)',gray37:'rgb(94, 94, 94)',gray38:'rgb(97, 97, 97)',gray39:'rgb(99, 99, 99)',gray4:'rgb(10, 10, 10)',gray40:'rgb(102, 102, 102)',gray41:'rgb(105, 105, 105)',gray42:'rgb(107, 107, 107)',gray43:'rgb(110, 110, 110)',gray44:'rgb(112, 112, 112)',gray45:'rgb(115, 115, 115)',gray46:'rgb(117, 117, 117)',gray47:'rgb(120, 120, 120)',gray48:'rgb(122, 122, 122)',gray49:'rgb(125, 125, 125)',gray5:'rgb(13, 13, 13)',gray50:'rgb(127, 127, 127)',gray51:'rgb(130, 130, 130)',gray52:'rgb(133, 133, 133)',gray53:'rgb(135, 135, 135)',gray54:'rgb(138, 138, 138)',gray55:'rgb(140, 140, 140)',gray56:'rgb(143, 143, 143)',gray57:'rgb(145, 145, 145)',gray58:'rgb(148, 148, 148)',gray59:'rgb(150, 150, 150)',gray6:'rgb(15, 15, 15)',gray60:'rgb(153, 153, 153)',gray61:'rgb(156, 156, 156)',gray62:'rgb(158, 158, 158)',gray63:'rgb(161, 161, 161)',gray64:'rgb(163, 163, 163)',gray65:'rgb(166, 166, 166)',gray66:'rgb(168, 168, 168)',gray67:'rgb(171, 171, 171)',gray68:'rgb(173, 173, 173)',gray69:'rgb(176, 176, 176)',gray7:'rgb(18, 18, 18)',gray70:'rgb(179, 179, 179)',gray71:'rgb(181, 181, 181)',gray72:'rgb(184, 184, 184)',gray73:'rgb(186, 186, 186)',gray74:'rgb(189, 189, 189)',gray75:'rgb(191, 191, 191)',gray76:'rgb(194, 194, 194)',gray77:'rgb(196, 196, 196)',gray78:'rgb(199, 199, 199)',gray79:'rgb(201, 201, 201)',gray8:'rgb(20, 20, 20)',gray80:'rgb(204, 204, 204)',gray81:'rgb(207, 207, 207)',gray82:'rgb(209, 209, 209)',gray83:'rgb(212, 212, 212)',gray84:'rgb(214, 214, 214)',gray85:'rgb(217, 217, 217)',gray86:'rgb(219, 219, 219)',gray87:'rgb(222, 222, 222)',gray88:'rgb(224, 224, 224)',gray89:'rgb(227, 227, 227)',gray9:'rgb(23, 23, 23)',gray90:'rgb(229, 229, 229)',gray91:'rgb(232, 232, 232)',gray92:'rgb(235, 235, 235)',gray93:'rgb(237, 237, 237)',gray94:'rgb(240, 240, 240)',gray95:'rgb(242, 242, 242)',gray96:'rgb(245, 245, 245)',gray97:'rgb(247, 247, 247)',gray98:'rgb(250, 250, 250)',gray99:'rgb(252, 252, 252)',green:'rgb(0, 255, 0)',green1:'rgb(0, 255, 0)',green2:'rgb(0, 238, 0)',green3:'rgb(0, 205, 0)',green4:'rgb(0, 139, 0)',greenyellow:'rgb(173, 255, 47)',grey:'rgb(190, 190, 190)',grey0:'rgb(0, 0, 0)',grey1:'rgb(3, 3, 3)',grey10:'rgb(26, 26, 26)',grey100:'rgb(255, 255, 255)',grey11:'rgb(28, 28, 28)',grey12:'rgb(31, 31, 31)',grey13:'rgb(33, 33, 33)',grey14:'rgb(36, 36, 36)',grey15:'rgb(38, 38, 38)',grey16:'rgb(41, 41, 41)',grey17:'rgb(43, 43, 43)',grey18:'rgb(46, 46, 46)',grey19:'rgb(48, 48, 48)',grey2:'rgb(5, 5, 5)',grey20:'rgb(51, 51, 51)',grey21:'rgb(54, 54, 54)',grey22:'rgb(56, 56, 56)',grey23:'rgb(59, 59, 59)',grey24:'rgb(61, 61, 61)',grey25:'rgb(64, 64, 64)',grey26:'rgb(66, 66, 66)',grey27:'rgb(69, 69, 69)',grey28:'rgb(71, 71, 71)',grey29:'rgb(74, 74, 74)',grey3:'rgb(8, 8, 8)',grey30:'rgb(77, 77, 77)',grey31:'rgb(79, 79, 79)',grey32:'rgb(82, 82, 82)',grey33:'rgb(84, 84, 84)',grey34:'rgb(87, 87, 87)',grey35:'rgb(89, 89, 89)',grey36:'rgb(92, 92, 92)',grey37:'rgb(94, 94, 94)',grey38:'rgb(97, 97, 97)',grey39:'rgb(99, 99, 99)',grey4:'rgb(10, 10, 10)',grey40:'rgb(102, 102, 102)',grey41:'rgb(105, 105, 105)',grey42:'rgb(107, 107, 107)',grey43:'rgb(110, 110, 110)',grey44:'rgb(112, 112, 112)',grey45:'rgb(115, 115, 115)',grey46:'rgb(117, 117, 117)',grey47:'rgb(120, 120, 120)',grey48:'rgb(122, 122, 122)',grey49:'rgb(125, 125, 125)',grey5:'rgb(13, 13, 13)',grey50:'rgb(127, 127, 127)',grey51:'rgb(130, 130, 130)',grey52:'rgb(133, 133, 133)',grey53:'rgb(135, 135, 135)',grey54:'rgb(138, 138, 138)',grey55:'rgb(140, 140, 140)',grey56:'rgb(143, 143, 143)',grey57:'rgb(145, 145, 145)',grey58:'rgb(148, 148, 148)',grey59:'rgb(150, 150, 150)',grey6:'rgb(15, 15, 15)',grey60:'rgb(153, 153, 153)',grey61:'rgb(156, 156, 156)',grey62:'rgb(158, 158, 158)',grey63:'rgb(161, 161, 161)',grey64:'rgb(163, 163, 163)',grey65:'rgb(166, 166, 166)',grey66:'rgb(168, 168, 168)',grey67:'rgb(171, 171, 171)',grey68:'rgb(173, 173, 173)',grey69:'rgb(176, 176, 176)',grey7:'rgb(18, 18, 18)',grey70:'rgb(179, 179, 179)',grey71:'rgb(181, 181, 181)',grey72:'rgb(184, 184, 184)',grey73:'rgb(186, 186, 186)',grey74:'rgb(189, 189, 189)',grey75:'rgb(191, 191, 191)',grey76:'rgb(194, 194, 194)',grey77:'rgb(196, 196, 196)',grey78:'rgb(199, 199, 199)',grey79:'rgb(201, 201, 201)',grey8:'rgb(20, 20, 20)',grey80:'rgb(204, 204, 204)',grey81:'rgb(207, 207, 207)',grey82:'rgb(209, 209, 209)',grey83:'rgb(212, 212, 212)',grey84:'rgb(214, 214, 214)',grey85:'rgb(217, 217, 217)',grey86:'rgb(219, 219, 219)',grey87:'rgb(222, 222, 222)',grey88:'rgb(224, 224, 224)',grey89:'rgb(227, 227, 227)',grey9:'rgb(23, 23, 23)',grey90:'rgb(229, 229, 229)',grey91:'rgb(232, 232, 232)',grey92:'rgb(235, 235, 235)',grey93:'rgb(237, 237, 237)',grey94:'rgb(240, 240, 240)',grey95:'rgb(242, 242, 242)',grey96:'rgb(245, 245, 245)',grey97:'rgb(247, 247, 247)',grey98:'rgb(250, 250, 250)',grey99:'rgb(252, 252, 252)',honeydew:'rgb(240, 255, 240)',honeydew1:'rgb(240, 255, 240)',honeydew2:'rgb(224, 238, 224)',honeydew3:'rgb(193, 205, 193)',honeydew4:'rgb(131, 139, 131)',hotpink:'rgb(255, 105, 180)',hotpink1:'rgb(255, 110, 180)',hotpink2:'rgb(238, 106, 167)',hotpink3:'rgb(205, 96, 144)',hotpink4:'rgb(139, 58, 98)',indianred:'rgb(205, 92, 92)',indianred1:'rgb(255, 106, 106)',indianred2:'rgb(238, 99, 99)',indianred3:'rgb(205, 85, 85)',indianred4:'rgb(139, 58, 58)',ivory:'rgb(255, 255, 240)',ivory1:'rgb(255, 255, 240)',ivory2:'rgb(238, 238, 224)',ivory3:'rgb(205, 205, 193)',ivory4:'rgb(139, 139, 131)',khaki:'rgb(240, 230, 140)',khaki1:'rgb(255, 246, 143)',khaki2:'rgb(238, 230, 133)',khaki3:'rgb(205, 198, 115)',khaki4:'rgb(139, 134, 78)',lavender:'rgb(230, 230, 250)',lavenderblush:'rgb(255, 240, 245)',lavenderblush1:'rgb(255, 240, 245)',lavenderblush2:'rgb(238, 224, 229)',lavenderblush3:'rgb(205, 193, 197)',lavenderblush4:'rgb(139, 131, 134)',lawngreen:'rgb(124, 252, 0)',lemonchiffon:'rgb(255, 250, 205)',lemonchiffon1:'rgb(255, 250, 205)',lemonchiffon2:'rgb(238, 233, 191)',lemonchiffon3:'rgb(205, 201, 165)',lemonchiffon4:'rgb(139, 137, 112)',lightblue:'rgb(173, 216, 230)',lightblue1:'rgb(191, 239, 255)',lightblue2:'rgb(178, 223, 238)',lightblue3:'rgb(154, 192, 205)',lightblue4:'rgb(104, 131, 139)',lightcoral:'rgb(240, 128, 128)',lightcyan:'rgb(224, 255, 255)',lightcyan1:'rgb(224, 255, 255)',lightcyan2:'rgb(209, 238, 238)',lightcyan3:'rgb(180, 205, 205)',lightcyan4:'rgb(122, 139, 139)',lightgoldenrod:'rgb(238, 221, 130)',lightgoldenrod1:'rgb(255, 236, 139)',lightgoldenrod2:'rgb(238, 220, 130)',lightgoldenrod3:'rgb(205, 190, 112)',lightgoldenrod4:'rgb(139, 129, 76)',lightgoldenrodyellow:'rgb(250, 250, 210)',lightgray:'rgb(211, 211, 211)',lightgreen:'rgb(144, 238, 144)',lightgrey:'rgb(211, 211, 211)',lightpink:'rgb(255, 182, 193)',lightpink1:'rgb(255, 174, 185)',lightpink2:'rgb(238, 162, 173)',lightpink3:'rgb(205, 140, 149)',lightpink4:'rgb(139, 95, 101)',lightsalmon:'rgb(255, 160, 122)',lightsalmon1:'rgb(255, 160, 122)',lightsalmon2:'rgb(238, 149, 114)',lightsalmon3:'rgb(205, 129, 98)',lightsalmon4:'rgb(139, 87, 66)',lightseagreen:'rgb(32, 178, 170)',lightskyblue:'rgb(135, 206, 250)',lightskyblue1:'rgb(176, 226, 255)',lightskyblue2:'rgb(164, 211, 238)',lightskyblue3:'rgb(141, 182, 205)',lightskyblue4:'rgb(96, 123, 139)',lightslateblue:'rgb(132, 112, 255)',lightslategray:'rgb(119, 136, 153)',lightslategrey:'rgb(119, 136, 153)',lightsteelblue:'rgb(176, 196, 222)',lightsteelblue1:'rgb(202, 225, 255)',lightsteelblue2:'rgb(188, 210, 238)',lightsteelblue3:'rgb(162, 181, 205)',lightsteelblue4:'rgb(110, 123, 139)',lightyellow:'rgb(255, 255, 224)',lightyellow1:'rgb(255, 255, 224)',lightyellow2:'rgb(238, 238, 209)',lightyellow3:'rgb(205, 205, 180)',lightyellow4:'rgb(139, 139, 122)',limegreen:'rgb(50, 205, 50)',linen:'rgb(250, 240, 230)',magenta:'rgb(255, 0, 255)',magenta1:'rgb(255, 0, 255)',magenta2:'rgb(238, 0, 238)',magenta3:'rgb(205, 0, 205)',magenta4:'rgb(139, 0, 139)',maroon:'rgb(176, 48, 96)',maroon1:'rgb(255, 52, 179)',maroon2:'rgb(238, 48, 167)',maroon3:'rgb(205, 41, 144)',maroon4:'rgb(139, 28, 98)',mediumaquamarine:'rgb(102, 205, 170)',mediumblue:'rgb(0, 0, 205)',mediumorchid:'rgb(186, 85, 211)',mediumorchid1:'rgb(224, 102, 255)',mediumorchid2:'rgb(209, 95, 238)',mediumorchid3:'rgb(180, 82, 205)',mediumorchid4:'rgb(122, 55, 139)',mediumpurple:'rgb(147, 112, 219)',mediumpurple1:'rgb(171, 130, 255)',mediumpurple2:'rgb(159, 121, 238)',mediumpurple3:'rgb(137, 104, 205)',mediumpurple4:'rgb(93, 71, 139)',mediumseagreen:'rgb(60, 179, 113)',mediumslateblue:'rgb(123, 104, 238)',mediumspringgreen:'rgb(0, 250, 154)',mediumturquoise:'rgb(72, 209, 204)',mediumvioletred:'rgb(199, 21, 133)',midnightblue:'rgb(25, 25, 112)',mintcream:'rgb(245, 255, 250)',mistyrose:'rgb(255, 228, 225)',mistyrose1:'rgb(255, 228, 225)',mistyrose2:'rgb(238, 213, 210)',mistyrose3:'rgb(205, 183, 181)',mistyrose4:'rgb(139, 125, 123)',moccasin:'rgb(255, 228, 181)',navajowhite:'rgb(255, 222, 173)',navajowhite1:'rgb(255, 222, 173)',navajowhite2:'rgb(238, 207, 161)',navajowhite3:'rgb(205, 179, 139)',navajowhite4:'rgb(139, 121, 94)',navy:'rgb(0, 0, 128)',navyblue:'rgb(0, 0, 128)',oldlace:'rgb(253, 245, 230)',olivedrab:'rgb(107, 142, 35)',olivedrab1:'rgb(192, 255, 62)',olivedrab2:'rgb(179, 238, 58)',olivedrab3:'rgb(154, 205, 50)',olivedrab4:'rgb(105, 139, 34)',orange:'rgb(255, 165, 0)',orange1:'rgb(255, 165, 0)',orange2:'rgb(238, 154, 0)',orange3:'rgb(205, 133, 0)',orange4:'rgb(139, 90, 0)',orangered:'rgb(255, 69, 0)',orangered1:'rgb(255, 69, 0)',orangered2:'rgb(238, 64, 0)',orangered3:'rgb(205, 55, 0)',orangered4:'rgb(139, 37, 0)',orchid:'rgb(218, 112, 214)',orchid1:'rgb(255, 131, 250)',orchid2:'rgb(238, 122, 233)',orchid3:'rgb(205, 105, 201)',orchid4:'rgb(139, 71, 137)',palegoldenrod:'rgb(238, 232, 170)',palegreen:'rgb(152, 251, 152)',palegreen1:'rgb(154, 255, 154)',palegreen2:'rgb(144, 238, 144)',palegreen3:'rgb(124, 205, 124)',palegreen4:'rgb(84, 139, 84)',paleturquoise:'rgb(175, 238, 238)',paleturquoise1:'rgb(187, 255, 255)',paleturquoise2:'rgb(174, 238, 238)',paleturquoise3:'rgb(150, 205, 205)',paleturquoise4:'rgb(102, 139, 139)',palevioletred:'rgb(219, 112, 147)',palevioletred1:'rgb(255, 130, 171)',palevioletred2:'rgb(238, 121, 159)',palevioletred3:'rgb(205, 104, 137)',palevioletred4:'rgb(139, 71, 93)',papayawhip:'rgb(255, 239, 213)',peachpuff:'rgb(255, 218, 185)',peachpuff1:'rgb(255, 218, 185)',peachpuff2:'rgb(238, 203, 173)',peachpuff3:'rgb(205, 175, 149)',peachpuff4:'rgb(139, 119, 101)',peru:'rgb(205, 133, 63)',pink:'rgb(255, 192, 203)',pink1:'rgb(255, 181, 197)',pink2:'rgb(238, 169, 184)',pink3:'rgb(205, 145, 158)',pink4:'rgb(139, 99, 108)',plum:'rgb(221, 160, 221)',plum1:'rgb(255, 187, 255)',plum2:'rgb(238, 174, 238)',plum3:'rgb(205, 150, 205)',plum4:'rgb(139, 102, 139)',powderblue:'rgb(176, 224, 230)',purple:'rgb(160, 32, 240)',purple1:'rgb(155, 48, 255)',purple2:'rgb(145, 44, 238)',purple3:'rgb(125, 38, 205)',purple4:'rgb(85, 26, 139)',red:'rgb(255, 0, 0)',red1:'rgb(255, 0, 0)',red2:'rgb(238, 0, 0)',red3:'rgb(205, 0, 0)',red4:'rgb(139, 0, 0)',rosybrown:'rgb(188, 143, 143)',rosybrown1:'rgb(255, 193, 193)',rosybrown2:'rgb(238, 180, 180)',rosybrown3:'rgb(205, 155, 155)',rosybrown4:'rgb(139, 105, 105)',royalblue:'rgb(65, 105, 225)',royalblue1:'rgb(72, 118, 255)',royalblue2:'rgb(67, 110, 238)',royalblue3:'rgb(58, 95, 205)',royalblue4:'rgb(39, 64, 139)',saddlebrown:'rgb(139, 69, 19)',salmon:'rgb(250, 128, 114)',salmon1:'rgb(255, 140, 105)',salmon2:'rgb(238, 130, 98)',salmon3:'rgb(205, 112, 84)',salmon4:'rgb(139, 76, 57)',sandybrown:'rgb(244, 164, 96)',seagreen:'rgb(46, 139, 87)',seagreen1:'rgb(84, 255, 159)',seagreen2:'rgb(78, 238, 148)',seagreen3:'rgb(67, 205, 128)',seagreen4:'rgb(46, 139, 87)',seashell:'rgb(255, 245, 238)',seashell1:'rgb(255, 245, 238)',seashell2:'rgb(238, 229, 222)',seashell3:'rgb(205, 197, 191)',seashell4:'rgb(139, 134, 130)',sienna:'rgb(160, 82, 45)',sienna1:'rgb(255, 130, 71)',sienna2:'rgb(238, 121, 66)',sienna3:'rgb(205, 104, 57)',sienna4:'rgb(139, 71, 38)',skyblue:'rgb(135, 206, 235)',skyblue1:'rgb(135, 206, 255)',skyblue2:'rgb(126, 192, 238)',skyblue3:'rgb(108, 166, 205)',skyblue4:'rgb(74, 112, 139)',slateblue:'rgb(106, 90, 205)',slateblue1:'rgb(131, 111, 255)',slateblue2:'rgb(122, 103, 238)',slateblue3:'rgb(105, 89, 205)',slateblue4:'rgb(71, 60, 139)',slategray:'rgb(112, 128, 144)',slategray1:'rgb(198, 226, 255)',slategray2:'rgb(185, 211, 238)',slategray3:'rgb(159, 182, 205)',slategray4:'rgb(108, 123, 139)',slategrey:'rgb(112, 128, 144)',snow:'rgb(255, 250, 250)',snow1:'rgb(255, 250, 250)',snow2:'rgb(238, 233, 233)',snow3:'rgb(205, 201, 201)',snow4:'rgb(139, 137, 137)',springgreen:'rgb(0, 255, 127)',springgreen1:'rgb(0, 255, 127)',springgreen2:'rgb(0, 238, 118)',springgreen3:'rgb(0, 205, 102)',springgreen4:'rgb(0, 139, 69)',steelblue:'rgb(70, 130, 180)',steelblue1:'rgb(99, 184, 255)',steelblue2:'rgb(92, 172, 238)',steelblue3:'rgb(79, 148, 205)',steelblue4:'rgb(54, 100, 139)',tan:'rgb(210, 180, 140)',tan1:'rgb(255, 165, 79)',tan2:'rgb(238, 154, 73)',tan3:'rgb(205, 133, 63)',tan4:'rgb(139, 90, 43)',thistle:'rgb(216, 191, 216)',thistle1:'rgb(255, 225, 255)',thistle2:'rgb(238, 210, 238)',thistle3:'rgb(205, 181, 205)',thistle4:'rgb(139, 123, 139)',tomato:'rgb(255, 99, 71)',tomato1:'rgb(255, 99, 71)',tomato2:'rgb(238, 92, 66)',tomato3:'rgb(205, 79, 57)',tomato4:'rgb(139, 54, 38)',turquoise:'rgb(64, 224, 208)',turquoise1:'rgb(0, 245, 255)',turquoise2:'rgb(0, 229, 238)',turquoise3:'rgb(0, 197, 205)',turquoise4:'rgb(0, 134, 139)',violet:'rgb(238, 130, 238)',violetred:'rgb(208, 32, 144)',violetred1:'rgb(255, 62, 150)',violetred2:'rgb(238, 58, 140)',violetred3:'rgb(205, 50, 120)',violetred4:'rgb(139, 34, 82)',wheat:'rgb(245, 222, 179)',wheat1:'rgb(255, 231, 186)',wheat2:'rgb(238, 216, 174)',wheat3:'rgb(205, 186, 150)',wheat4:'rgb(139, 126, 102)',white:'rgb(255, 255, 255)',whitesmoke:'rgb(245, 245, 245)',yellow:'rgb(255, 255, 0)',yellow1:'rgb(255, 255, 0)',yellow2:'rgb(238, 238, 0)',yellow3:'rgb(205, 205, 0)',yellow4:'rgb(139, 139, 0)',yellowgreen:'rgb(154, 205, 50)'},'use strict',l.f={},l.f.replaceVars=function(e,r){return e.replace(/%([a-z]*)\(([^\)]+)\)/gi,function(e,t,o){if('undefined'==typeof r[o])throw'Unknown variable: '+o;var n=r[o];if(t in l.f.replaceVars.functions)n=l.f.replaceVars.functions[t](n);else if(t)throw'Unknown escape function: '+t;return n})},l.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(e){var r={"<":'&lt;',">":'&gt;',"&":'&amp;','"':'&quot;',"'":'&#39;'};return e.replace(/[<>&\"\']/g,function(e){return r[e]})}},l.f.getAcceptLanguages=function(e){window.chrome&&chrome.i18n?chrome.i18n.getAcceptLanguages(e):setTimeout(function(){e([navigator.language.replace(/-/g,'_')])},0)},l.f.parseQuery=function(e){'?'==e.substr(0,1)&&(e=e.substr(1));for(var r={},t=e.split('&'),o=0,n;o<t.length;o++)n=t[o].split('='),r[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);return r},l.f.getURL=function(e){return window.chrome&&chrome.runtime&&chrome.runtime.getURL?chrome.runtime.getURL(e):e},l.f.clamp=function(e,r,t){return e<r?r:e>t?t:e},l.f.lpad=function(e,r,t){for(e+='',t=t||' ';e.length<r;)e=t+e;return e},l.f.zpad=function(e,r){return l.f.lpad(e,r,'0')},l.f.getWhitespace=function(e){if(0==e)return'';var r=this.getWhitespace;for(r.whitespace||(r.whitespace='          ');e>r.whitespace.length;)r.whitespace+=r.whitespace;return r.whitespace.substr(0,e)},l.f.alarm=function(e,r){var t=r||5000,o=l.f.getStack(1);return function(){var r=setTimeout(function(){var n='string'==typeof e?n:e.name;n=n?': '+n:'',console.warn('lib.f.alarm: timeout expired: '+t/1e3+'s'+n),console.log(o),r=null},t),n=function(e){return function(){return r&&(clearTimeout(r),r=null),e.apply(null,arguments)}};return'string'==typeof e?n:n(e)}()},l.f.getStack=function(e){var r=e?e+2:2,t;try{throw new Error}catch(e){t=e.stack.split('\n')}for(var o={},n=r;n<t.length;n++)o[n-r]=t[n].replace(/^\s*at\s+/,'');return o},l.f.smartFloorDivide=function(e,r){var n=e/r,s=o(n);return 1e-4>s-n?s:t(n)},'use strict',l.MessageManager=function(e){this.languages_=e.map(function(e){return e.replace(/-/g,'_')}),-1==this.languages_.indexOf('en')&&this.languages_.unshift('en'),this.messages={}},l.MessageManager.prototype.addMessages=function(e){for(var r in e){var t=e[r];this.messages[r]=t.placeholders?t.message.replace(/\$([a-z][^\s\$]+)\$/ig,function(t,o){return e[r].placeholders[o.toLowerCase()].content}):t.message}},l.MessageManager.prototype.findAndLoadMessages=function(e,r){function t(e){e?n=o.shift():s=o.shift(),o.length?a():r(n,s)}var o=this.languages_.concat(),n=[],s=[],a=function(){this.loadMessages(this.replaceReferences(e,o),t.bind(this,!0),t.bind(this,!1))}.bind(this);a()},l.MessageManager.prototype.loadMessages=function(e,r,t){var o=new XMLHttpRequest;o.onloadend=function(){return 200==o.status?void(this.addMessages(JSON.parse(o.responseText)),r()):void(t&&t(o.status))}.bind(this),o.open('GET',e),o.send()},l.MessageManager.replaceReferences=function(e,r){return e.replace(/\$(\d+)/g,function(e,t){return r[t-1]})},l.MessageManager.prototype.replaceReferences=l.MessageManager.replaceReferences,l.MessageManager.prototype.get=function(e,r,t){var o;if(e in this.messages)o=this.messages[e];else if(window.chrome.i18n&&(o=chrome.i18n.getMessage(e)),!o)return console.warn('Unknown message: '+e),'undefined'==typeof t?e:t;return r?(r instanceof Array||(r=[r]),this.replaceReferences(o,r)):o},l.MessageManager.prototype.processI18nAttributes=function(e){function r(e){return e.replace(/-/g,'_').toUpperCase()}for(var t=e.querySelectorAll('[i18n]'),o=0;o<t.length;o++){var n=t[o],s=n.getAttribute('i18n');if(s){try{s=JSON.parse(s)}catch(e){throw console.error('Can\'t parse '+n.tagName+'#'+n.id+': '+s),e}for(var a in s){var i=s[a];'$'==i.substr(0,1)&&(i=r(n.getAttribute(i.substr(1))+'_'+a));var l=this.get(i);'_'==a?n.textContent=l:n.setAttribute(a,l)}}}},'use strict',l.PreferenceManager=function(e,r){this.storage=e,this.storageObserver_=this.onStorageChange_.bind(this),this.isActive_=!1,this.activate(),this.trace=!1;var t=r||'/';'/'!=t.substr(t.length-1)&&(t+='/'),this.prefix=t,this.prefRecords_={},this.globalObservers_=[],this.childFactories_={},this.childLists_={}},l.PreferenceManager.prototype.DEFAULT_VALUE=new String('DEFAULT'),l.PreferenceManager.Record=function(e,r){this.name=e,this.defaultValue=r,this.currentValue=this.DEFAULT_VALUE,this.observers=[]},l.PreferenceManager.Record.prototype.DEFAULT_VALUE=l.PreferenceManager.prototype.DEFAULT_VALUE,l.PreferenceManager.Record.prototype.addObserver=function(e){this.observers.push(e)},l.PreferenceManager.Record.prototype.removeObserver=function(e){var r=this.observers.indexOf(e);0<=r&&this.observers.splice(r,1)},l.PreferenceManager.Record.prototype.get=function(){return this.currentValue===this.DEFAULT_VALUE?/^(string|number)$/.test(typeof this.defaultValue)?this.defaultValue:'object'==typeof this.defaultValue?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue:this.currentValue},l.PreferenceManager.prototype.deactivate=function(){if(!this.isActive_)throw new Error('Not activated');this.isActive_=!1,this.storage.removeObserver(this.storageObserver_)},l.PreferenceManager.prototype.activate=function(){if(this.isActive_)throw new Error('Already activated');this.isActive_=!0,this.storage.addObserver(this.storageObserver_)},l.PreferenceManager.prototype.readStorage=function(e){function r(){0==--t&&e&&e()}var t=0,o=Object.keys(this.prefRecords_).map(function(e){return this.prefix+e}.bind(this));this.trace&&console.log('Preferences read: '+this.prefix),this.storage.getItems(o,function(o){var n=this.prefix.length;for(var s in o){var a=o[s],i=s.substr(n),l=i in this.childLists_&&JSON.stringify(a)!=JSON.stringify(this.prefRecords_[i].currentValue);this.prefRecords_[i].currentValue=a,l&&(t++,this.syncChildList(i,r))}0==t&&e&&setTimeout(e)}.bind(this))},l.PreferenceManager.prototype.definePreference=function(e,r,t){var o=this.prefRecords_[e];o?this.changeDefault(e,r):o=this.prefRecords_[e]=new l.PreferenceManager.Record(e,r),t&&o.addObserver(t)},l.PreferenceManager.prototype.definePreferences=function(e){for(var r=0;r<e.length;r++)this.definePreference(e[r][0],e[r][1],e[r][2])},l.PreferenceManager.prototype.defineChildren=function(e,r){this.definePreference(e,[],this.onChildListChange_.bind(this,e)),this.childFactories_[e]=r,this.childLists_[e]={}},l.PreferenceManager.prototype.addObservers=function(e,r){if(e&&'function'!=typeof e)throw new Error('Invalid param: globals');if(e&&this.globalObservers_.push(e),!!r)for(var t in r){if(!(t in this.prefRecords_))throw new Error('Unknown preference: '+t);this.prefRecords_[t].addObserver(r[t])}},l.PreferenceManager.prototype.notifyAll=function(){for(var e in this.prefRecords_)this.notifyChange_(e)},l.PreferenceManager.prototype.notifyChange_=function(e){var r=this.prefRecords_[e];if(!r)throw new Error('Unknown preference: '+e);for(var t=r.get(),o=0;o<this.globalObservers_.length;o++)this.globalObservers_[o](e,t);for(var o=0;o<r.observers.length;o++)r.observers[o](t,e,this)},l.PreferenceManager.prototype.createChild=function(e,r,o){var n=this.get(e),s;if(!o)for(;!s||-1!=n.indexOf(s);)s=t(65535*Math.random()+1).toString(16),s=l.f.zpad(s,4),r&&(s=r+':'+s);else if(s=o,-1!=n.indexOf(s))throw new Error('Duplicate child: '+e+': '+s);var a=this.childFactories_[e](this,s);return a.trace=this.trace,a.resetAll(),this.childLists_[e][s]=a,n.push(s),this.set(e,n),a},l.PreferenceManager.prototype.removeChild=function(e,r){var t=this.getChild(e,r);t.resetAll();var o=this.get(e),n=o.indexOf(r);-1!=n&&(o.splice(n,1),this.set(e,o)),delete this.childLists_[e][r]},l.PreferenceManager.prototype.getChild=function(e,r,t){if(!(e in this.childLists_))throw new Error('Unknown child list: '+e);var o=this.childLists_[e];if(!(r in o)){if('undefined'==typeof t)throw new Error('Unknown "'+e+'" child: '+r);return t}return o[r]},l.PreferenceManager.diffChildLists=function(e,r){for(var t={added:{},removed:{},common:{}},o=0;o<e.length;o++)-1==r.indexOf(e[o])?t.added[e[o]]=!0:t.common[e[o]]=!0;for(var o=0;o<r.length;o++)r[o]in t.added||r[o]in t.common||(t.removed[r[o]]=!0);return t},l.PreferenceManager.prototype.syncChildList=function(e,r){function t(){0==--o&&r&&r()}for(var o=0,n=this.get(e),s=Object.keys(this.childLists_[e]),a=l.PreferenceManager.diffChildLists(n,s),c=0;c<n.length;c++){var i=n[c],d=s.indexOf(i);if(0<=d&&s.splice(d,1),!this.childLists_[e][i]){var g=this.childFactories_[e](this,i);if(!g){console.warn('Unable to restore child: '+e+': '+i);continue}g.trace=this.trace,this.childLists_[e][i]=g,o++,g.readStorage(t)}}for(var c=0;c<s.length;c++)delete this.childLists_[e][s[c]];!o&&r&&setTimeout(r)},l.PreferenceManager.prototype.reset=function(e){var r=this.prefRecords_[e];if(!r)throw new Error('Unknown preference: '+e);this.storage.removeItem(this.prefix+e),r.currentValue!==this.DEFAULT_VALUE&&(r.currentValue=this.DEFAULT_VALUE,this.notifyChange_(e))},l.PreferenceManager.prototype.resetAll=function(){var e=[];for(var r in this.childLists_){var t=this.childLists_[r];for(var o in t)t[o].resetAll()}for(var n in this.prefRecords_)this.prefRecords_[n].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[n].currentValue=this.DEFAULT_VALUE,e.push(n));var s=Object.keys(this.prefRecords_).map(function(e){return this.prefix+e}.bind(this));this.storage.removeItems(s),e.forEach(this.notifyChange_.bind(this))},l.PreferenceManager.prototype.diff=function(e,r){return typeof e==typeof r&&/^(undefined|boolean|number|string)$/.test(typeof e)?e!==r:!0},l.PreferenceManager.prototype.changeDefault=function(e,r){var t=this.prefRecords_[e];if(!t)throw new Error('Unknown preference: '+e);return this.diff(t.defaultValue,r)?t.currentValue===this.DEFAULT_VALUE?void(t.defaultValue=r,this.notifyChange_(e)):void(t.defaultValue=r):void 0},l.PreferenceManager.prototype.changeDefaults=function(e){for(var r in e)this.changeDefault(r,e[r])},l.PreferenceManager.prototype.set=function(e,r){var t=this.prefRecords_[e];if(!t)throw new Error('Unknown preference: '+e);var o=t.get();this.diff(o,r)&&(this.diff(t.defaultValue,r)?(t.currentValue=r,this.storage.setItem(this.prefix+e,r)):(t.currentValue=this.DEFAULT_VALUE,this.storage.removeItem(this.prefix+e)),setTimeout(this.notifyChange_.bind(this,e),0))},l.PreferenceManager.prototype.get=function(e){var r=this.prefRecords_[e];if(!r)throw new Error('Unknown preference: '+e);return r.get()},l.PreferenceManager.prototype.exportAsJson=function(){var e={};for(var r in this.prefRecords_)if(r in this.childLists_){e[r]=[];for(var t=this.get(r),o=0,n;o<t.length;o++)n=t[o],e[r].push({id:n,json:this.getChild(r,n).exportAsJson()})}else{var s=this.prefRecords_[r];s.currentValue!=this.DEFAULT_VALUE&&(e[r]=s.currentValue)}return e},l.PreferenceManager.prototype.importFromJson=function(e){for(var r in e)if(r in this.childLists_)for(var t=e[r],o=0;o<t.length;o++){var n=t[o].id,s=this.childLists_[r][n];s||(s=this.createChild(r,null,n)),s.importFromJson(t[o].json)}else this.set(r,e[r])},l.PreferenceManager.prototype.onChildListChange_=function(e){this.syncChildList(e)},l.PreferenceManager.prototype.onStorageChange_=function(e){for(var r in e)if(!(this.prefix&&0!=r.lastIndexOf(this.prefix,0))){var t=r.substr(this.prefix.length);if(t in this.prefRecords_){var o=this.prefRecords_[t],n=e[r].newValue,s=o.currentValue;s===o.DEFAULT_VALUE&&(s=void 0),this.diff(s,n)&&(o.currentValue='undefined'==typeof n?o.DEFAULT_VALUE:n,this.notifyChange_(t))}}},'use strict',l.resource={resources_:{}},l.resource.add=function(e,r,t){l.resource.resources_[e]={type:r,name:e,data:t}},l.resource.get=function(e,r){if(!(e in l.resource.resources_)){if('undefined'==typeof r)throw'Unknown resource: '+e;return r}return l.resource.resources_[e]},l.resource.getData=function(e,r){if(!(e in l.resource.resources_)){if('undefined'==typeof r)throw'Unknown resource: '+e;return r}return l.resource.resources_[e].data},l.resource.getDataUrl=function(e,r){var t=l.resource.get(e,r);return'data:'+t.type+','+t.data},'use strict',l.Storage={},'use strict',l.Storage.Chrome=function(e){this.storage_=e,this.observers_=[],chrome.storage.onChanged.addListener(this.onChanged_.bind(this))},l.Storage.Chrome.prototype.onChanged_=function(e,r){if(chrome.storage[r]==this.storage_)for(var t=0;t<this.observers_.length;t++)this.observers_[t](e)},l.Storage.Chrome.prototype.addObserver=function(e){this.observers_.push(e)},l.Storage.Chrome.prototype.removeObserver=function(e){var r=this.observers_.indexOf(e);-1!=r&&this.observers_.splice(r,1)},l.Storage.Chrome.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},l.Storage.Chrome.prototype.getItem=function(e,r){this.storage_.get(e,r)},l.Storage.Chrome.prototype.getItems=function(e,r){this.storage_.get(e,r)},l.Storage.Chrome.prototype.setItem=function(e,r,t){var o={};o[e]=r,this.storage_.set(o,t)},l.Storage.Chrome.prototype.setItems=function(e,r){this.storage_.set(e,r)},l.Storage.Chrome.prototype.removeItem=function(e,r){this.storage_.remove(e,r)},l.Storage.Chrome.prototype.removeItems=function(e,r){this.storage_.remove(e,r)},'use strict',l.Storage.Local=function(){this.observers_=[],this.storage_=window.localStorage,window.addEventListener('storage',this.onStorage_.bind(this))},l.Storage.Local.prototype.onStorage_=function(r){if(r.storageArea==this.storage_){var e=r.oldValue?JSON.parse(r.oldValue):'',t=r.newValue?JSON.parse(r.newValue):'',n={};n[r.key]={oldValue:e,newValue:t};for(var o=0;o<this.observers_.length;o++)this.observers_[o](n)}},l.Storage.Local.prototype.addObserver=function(e){this.observers_.push(e)},l.Storage.Local.prototype.removeObserver=function(e){var r=this.observers_.indexOf(e);-1!=r&&this.observers_.splice(r,1)},l.Storage.Local.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},l.Storage.Local.prototype.getItem=function(e,r){var t=this.storage_.getItem(e);if('string'==typeof t)try{t=JSON.parse(t)}catch(r){}setTimeout(r.bind(null,t),0)},l.Storage.Local.prototype.getItems=function(e,r){for(var t={},o=e.length-1;0<=o;o--){var n=e[o],s=this.storage_.getItem(n);if('string'==typeof s)try{t[n]=JSON.parse(s)}catch(r){t[n]=s}else e.splice(o,1)}setTimeout(r.bind(null,t),0)},l.Storage.Local.prototype.setItem=function(e,r,t){this.storage_.setItem(e,JSON.stringify(r)),t&&setTimeout(t,0)},l.Storage.Local.prototype.setItems=function(e,r){for(var t in e)this.storage_.setItem(t,JSON.stringify(e[t]));r&&setTimeout(r,0)},l.Storage.Local.prototype.removeItem=function(e,r){this.storage_.removeItem(e),r&&setTimeout(r,0)},l.Storage.Local.prototype.removeItems=function(e,r){for(var t=0;t<e.length;t++)this.storage_.removeItem(e[t]);r&&setTimeout(r,0)},'use strict',l.Storage.Memory=function(){this.observers_=[],this.storage_={}},l.Storage.Memory.prototype.addObserver=function(e){this.observers_.push(e)},l.Storage.Memory.prototype.removeObserver=function(e){var r=this.observers_.indexOf(e);-1!=r&&this.observers_.splice(r,1)},l.Storage.Memory.prototype.clear=function(r){var t={};for(var e in this.storage_)t[e]={oldValue:this.storage_[e],newValue:void 0};this.storage_={},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](t)}.bind(this),0),r&&setTimeout(r,0)},l.Storage.Memory.prototype.getItem=function(e,r){var t=this.storage_[e];if('string'==typeof t)try{t=JSON.parse(t)}catch(r){}setTimeout(r.bind(null,t),0)},l.Storage.Memory.prototype.getItems=function(e,r){for(var t={},o=e.length-1;0<=o;o--){var n=e[o],s=this.storage_[n];if('string'==typeof s)try{t[n]=JSON.parse(s)}catch(r){t[n]=s}else e.splice(o,1)}setTimeout(r.bind(null,t),0)},l.Storage.Memory.prototype.setItem=function(r,t,o){var n=this.storage_[r];this.storage_[r]=JSON.stringify(t);var s={};s[r]={oldValue:n,newValue:t},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](s)}.bind(this),0),o&&setTimeout(o,0)},l.Storage.Memory.prototype.setItems=function(r,t){var o={};for(var e in r)o[e]={oldValue:this.storage_[e],newValue:r[e]},this.storage_[e]=JSON.stringify(r[e]);setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](o)}.bind(this)),t&&setTimeout(t,0)},l.Storage.Memory.prototype.removeItem=function(e,r){delete this.storage_[e],r&&setTimeout(r,0)},l.Storage.Memory.prototype.removeItems=function(e,r){for(var t=0;t<e.length;t++)delete this.storage_[e[t]];r&&setTimeout(r,0)},'use strict',l.TestManager=function(e){this.log=e||new l.TestManager.Log},l.TestManager.prototype.createTestRun=function(e){return new l.TestManager.TestRun(this,e)},l.TestManager.prototype.onTestRunComplete=function(){},l.TestManager.Log=function(e){this.logFunction_=e||function(e){console.log(e)},this.pending_='',this.prefix_='',this.prefixStack_=[]},l.TestManager.Log.prototype.pushPrefix=function(e){this.prefixStack_.push(e),this.prefix_=this.prefixStack_.join('')},l.TestManager.Log.prototype.popPrefix=function(){this.prefixStack_.pop(),this.prefix_=this.prefixStack_.join('')},l.TestManager.Log.prototype.print=function(e){this.pending_?this.pending_+=e:this.pending_=this.prefix_+e},l.TestManager.Log.prototype.println=function(e){this.pending_&&this.flush(),this.logFunction_(this.prefix_+e)},l.TestManager.Log.prototype.flush=function(){this.pending_&&(this.logFunction_(this.pending_),this.pending_='')},l.TestManager.Suite=function(e){function r(r,t){this.testManager_=r,this.suiteName=e,this.setup(t)}return r.suiteName=e,r.addTest=l.TestManager.Suite.addTest,r.disableTest=l.TestManager.Suite.disableTest,r.getTest=l.TestManager.Suite.getTest,r.getTestList=l.TestManager.Suite.getTestList,r.testList_=[],r.testMap_={},r.prototype={__proto__:l.TestManager.Suite.prototype},l.TestManager.Suite.subclasses.push(r),r},l.TestManager.Suite.subclasses=[],l.TestManager.Suite.addTest=function(e,r){if(e in this.testMap_)throw'Duplicate test name: '+e;var t=new l.TestManager.Test(this,e,r);this.testMap_[e]=t,this.testList_.push(t)},l.TestManager.Suite.disableTest=function(e,r){if(e in this.testMap_)throw'Duplicate test name: '+e;var t=new l.TestManager.Test(this,e,r);console.log('Disabled test: '+t.fullName)},l.TestManager.Suite.getTest=function(e){return this.testMap_[e]},l.TestManager.Suite.getTestList=function(){return this.testList_},l.TestManager.Suite.prototype.setDefaults=function(e,r){for(var t in r)this[t]=t in e?e[t]:r[t]},l.TestManager.Suite.prototype.setup=function(){},l.TestManager.Suite.prototype.preamble=function(){},l.TestManager.Suite.prototype.postamble=function(){},l.TestManager.Test=function(e,r,t){this.suiteClass=e,this.testName=r,this.fullName=e.suiteName+'['+r+']',this.testFunction_=t},l.TestManager.Test.prototype.run=function(e){try{this.testFunction_.apply(e.suite,[e,e.testRun.cx])}catch(r){if(r instanceof l.TestManager.Result.TestComplete)return;e.println('Test raised an exception: '+r),r.stack&&(r.stack instanceof Array?e.println(r.stack.join('\n')):e.println(r.stack)),e.completeTest_(e.FAILED,!1)}},l.TestManager.TestRun=function(e,r){this.testManager=e,this.log=e.log,this.cx=r||{},this.failures=[],this.passes=[],this.startDate=null,this.duration=null,this.currentResult=null,this.maxFailures=0,this.panic=!1,this.testQueue_=[]},l.TestManager.TestRun.prototype.ALL_TESTS=new String('<all-tests>'),l.TestManager.TestRun.prototype.selectTest=function(e){this.testQueue_.push(e)},l.TestManager.TestRun.prototype.selectSuite=function(e,r){for(var t=r||this.ALL_TESTS,o=0,n=e.getTestList(),s=0,a;s<n.length;s++){if(a=n[s],t!==this.ALL_TESTS)if(t instanceof RegExp){if(!t.test(a.testName))continue;}else if(a.testName!=t)continue;this.selectTest(a),o++}return o},l.TestManager.TestRun.prototype.selectPattern=function(e){for(var r=0,t=0;t<l.TestManager.Suite.subclasses.length;t++)r+=this.selectSuite(l.TestManager.Suite.subclasses[t],e);return r||this.log.println('No tests matched selection criteria: '+e),r},l.TestManager.TestRun.prototype.onUncaughtException_=function(e,r,t){if(0==e.indexOf('Uncaught lib.TestManager.Result.TestComplete')||-1!=e.indexOf('status: passed'))return!0;if(this.currentResult&&e!='Uncaught '+this.currentResult.expectedErrorMessage_){var o='during';return this.currentResult.status!=this.currentResult.PENDING&&(o='after'),this.log.println('Uncaught exception '+o+' test case: '+this.currentResult.test.fullName),this.log.println(e+', '+r+':'+t),this.currentResult.completeTest_(this.currentResult.FAILED,!1),!1}},l.TestManager.TestRun.prototype.onTestRunComplete_=function(e){return e?void(this.duration=new Date-this.startDate,this.log.popPrefix(),this.log.println('} '+this.passes.length+' passed, '+this.failures.length+' failed, '+this.msToSeconds_(this.duration)),this.log.println(''),this.summarize(),window.onerror=null,this.testManager.onTestRunComplete(this)):void setTimeout(this.onTestRunComplete_.bind(this),0,!0)},l.TestManager.TestRun.prototype.onResultComplete=function(e){try{e.suite.postamble()}catch(e){this.log.println('Unexpected exception in postamble: '+(e.stack?e.stack:e)),this.panic=!0}if(this.log.popPrefix(),this.log.print('} '+e.status+', '+this.msToSeconds_(e.duration)),this.log.flush(),e.status==e.FAILED)this.failures.push(e),this.currentSuite=null;else if(e.status==e.PASSED)this.passes.push(e);else return this.log.println('Unknown result status: '+e.test.fullName+': '+e.status),this.panic=!0;this.runNextTest_()},l.TestManager.TestRun.prototype.onResultReComplete=function(e,r){this.log.println('Late complete for test: '+e.test.fullName+': '+r);var t=this.passes.indexOf(e);0<=t&&(this.passes.splice(t,1),this.failures.push(e))},l.TestManager.TestRun.prototype.runNextTest_=function(){if(this.panic||!this.testQueue_.length)return this.onTestRunComplete_();if(this.maxFailures&&this.failures.length>=this.maxFailures)return this.log.println('Maximum failure count reached, aborting test run.'),this.onTestRunComplete_();var e=this.testQueue_[0],r=this.currentResult?this.currentResult.suite:null;try{r&&r instanceof e.suiteClass||(this.log.println('Initializing suite: '+e.suiteClass.suiteName),r=new e.suiteClass(this.testManager,this.cx))}catch(e){return this.log.println('Exception during setup: '+(e.stack?e.stack:e)),this.panic=!0,void this.onTestRunComplete_()}try{this.log.print('Test: '+e.fullName+' {'),this.log.pushPrefix('  '),this.currentResult=new l.TestManager.Result(this,r,e),r.preamble(this.currentResult,this.cx),this.testQueue_.shift()}catch(e){return this.log.println('Unexpected exception during test preamble: '+(e.stack?e.stack:e)),this.log.popPrefix(),this.log.println('}'),this.panic=!0,void this.onTestRunComplete_()}try{this.currentResult.run()}catch(e){this.log.println('Unexpected exception during test run: '+(e.stack?e.stack:e)),this.panic=!0}},l.TestManager.TestRun.prototype.run=function(){this.log.println('Running '+this.testQueue_.length+' test(s) {'),this.log.pushPrefix('  '),window.onerror=this.onUncaughtException_.bind(this),this.startDate=new Date,this.runNextTest_()},l.TestManager.TestRun.prototype.msToSeconds_=function(e){var r=(e/1e3).toFixed(2);return r+'s'},l.TestManager.TestRun.prototype.summarize=function(){if(this.failures.length)for(var e=0;e<this.failures.length;e++)this.log.println('FAILED: '+this.failures[e].test.fullName);this.testQueue_.length&&this.log.println('Test run incomplete: '+this.testQueue_.length+' test(s) were not run.')},l.TestManager.Result=function(e,r,t){this.testRun=e,this.suite=r,this.test=t,this.startDate=null,this.duration=null,this.status=this.PENDING,this.expectedErrorMessage_=null},l.TestManager.Result.prototype.PENDING='pending',l.TestManager.Result.prototype.FAILED='FAILED',l.TestManager.Result.prototype.PASSED='passed',l.TestManager.Result.TestComplete=function(e){this.result=e},l.TestManager.Result.TestComplete.prototype.toString=function(){return'lib.TestManager.Result.TestComplete: '+this.result.test.fullName+', status: '+this.result.status},l.TestManager.Result.prototype.run=function(){this;this.startDate=new Date,this.test.run(this),this.status!=this.PENDING||this.timeout_||(this.println('Test did not return a value and did not request more time.'),this.completeTest_(this.FAILED,!1))},l.TestManager.Result.prototype.expectErrorMessage=function(e){this.expectedErrorMessage_=e},l.TestManager.Result.prototype.onTimeout_=function(){this.timeout_=null,this.status!=this.PENDING||(this.println('Test timed out.'),this.completeTest_(this.FAILED,!1))},l.TestManager.Result.prototype.requestTime=function(e){this.timeout_&&clearTimeout(this.timeout_),this.timeout_=setTimeout(this.onTimeout_.bind(this),e)},l.TestManager.Result.prototype.completeTest_=function(e,r){if(this.status==this.PENDING?(this.duration=new Date-this.startDate,this.status=e,this.testRun.onResultComplete(this)):this.testRun.onResultReComplete(this,e),2>arguments.length||r)throw new l.TestManager.Result.TestComplete(this)},l.TestManager.Result.prototype.assertEQ=function(e,r,t){function o(e){if('number'==typeof e)return e;var r=(e+'').split('\n').map(function(r){return JSON.stringify(r)});return 1<r.length?'\n'+r.join('\n'):r.join('\n')}if(e!==r){var n=t?'['+t+']':'';this.fail('assertEQ'+n+': '+this.getCallerLocation_(1)+': '+o(e)+' !== '+o(r))}},l.TestManager.Result.prototype.assert=function(e,r){if(!0!==e){var t=r?'['+r+']':'';this.fail('assert'+t+': '+this.getCallerLocation_(1)+': '+(e+''))}},l.TestManager.Result.prototype.getCallerLocation_=function(e){try{throw new Error}catch(o){var r=o.stack.split('\n')[e+2],t=r.match(/([^/]+:\d+):\d+\)?$/);return t?t[1]:'???'}},l.TestManager.Result.prototype.println=function(e){this.testRun.log.println(e)},l.TestManager.Result.prototype.fail=function(e){arguments.length&&this.println(e),this.completeTest_(this.FAILED,!0)},l.TestManager.Result.prototype.pass=function(){this.completeTest_(this.PASSED,!0)},'use strict',l.UTF8Decoder=function(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0},l.UTF8Decoder.prototype.decode=function(e){for(var t='',o=0,n;o<e.length;o++)if(n=e.charCodeAt(o),0==this.bytesLeft)127>=n?t+=e.charAt(o):192<=n&&223>=n?(this.codePoint=n-192,this.bytesLeft=1,this.lowerBound=128):224<=n&&239>=n?(this.codePoint=n-224,this.bytesLeft=2,this.lowerBound=2048):240<=n&&247>=n?(this.codePoint=n-240,this.bytesLeft=3,this.lowerBound=65536):248<=n&&251>=n?(this.codePoint=n-248,this.bytesLeft=4,this.lowerBound=2097152):252<=n&&253>=n?(this.codePoint=n-252,this.bytesLeft=5,this.lowerBound=67108864):t+='\uFFFD';else if(!(128<=n&&191>=n))t+='\uFFFD',this.bytesLeft=0,o--;else if(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(n-128),0==this.bytesLeft){var s=this.codePoint;s<this.lowerBound||55296<=s&&57343>=s||1114111<s?t+='\uFFFD':65536>s?t+=r(s):(s-=65536,t+=r(55296+(1023&s>>>10),56320+(1023&s)))}return t},l.decodeUTF8=function(e){return new l.UTF8Decoder().decode(e)},l.encodeUTF8=function(e){for(var t='',o=0,n;o<e.length;o++){if(n=e.charCodeAt(o),56320<=n&&57343>=n)n=65533;else if(55296<=n&&56319>=n)if(o+1<e.length){var s=e.charCodeAt(o+1);56320<=s&&57343>=s?(n=65536+((1023&n)<<10)+(1023&s),o++):n=65533}else n=65533;var a;if(127>=n){t+=e.charAt(o);continue}else 2047>=n?(t+=r(192|n>>>6),a=1):65535>=n?(t+=r(224|n>>>12),a=2):(t+=r(240|n>>>18),a=3);for(;0<a;)a--,t+=r(128|63&n>>>6*a)}return t},'use strict',l.wc={},l.wc.nulWidth=0,l.wc.controlWidth=0,l.wc.regardCjkAmbiguous=!1,l.wc.cjkAmbiguousWidth=2,l.wc.combining=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],l.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[174,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[10045,10045],[10102,10111],[57344,63743],[65533,65533],[983040,1048573],[1048576,1114109]],l.wc.isSpace=function(e){var r=0,o=l.wc.combining.length-1,n;if(e<l.wc.combining[0][0]||e>l.wc.combining[o][1])return!1;for(;o>=r;)if(n=t((r+o)/2),e>l.wc.combining[n][1])r=n+1;else if(e<l.wc.combining[n][0])o=n-1;else return!0;return!1},l.wc.isCjkAmbiguous=function(e){var r=0,o=l.wc.ambiguous.length-1,n;if(e<l.wc.ambiguous[0][0]||e>l.wc.ambiguous[o][1])return!1;for(;o>=r;)if(n=t((r+o)/2),e>l.wc.ambiguous[n][1])r=n+1;else if(e<l.wc.ambiguous[n][0])o=n-1;else return!0;return!1},l.wc.charWidth=function(e){return l.wc.regardCjkAmbiguous?l.wc.charWidthRegardAmbiguous(e):l.wc.charWidthDisregardAmbiguous(e)},l.wc.charWidthDisregardAmbiguous=function(e){return 0===e?l.wc.nulWidth:32>e||127<=e&&160>e?l.wc.controlWidth:127>e?1:l.wc.isSpace(e)?0:1+(4352<=e&&(4447>=e||9001==e||9002==e||11904<=e&&42191>=e&&12351!=e||44032<=e&&55203>=e||63744<=e&&64255>=e||65040<=e&&65049>=e||65072<=e&&65135>=e||65280<=e&&65376>=e||65504<=e&&65510>=e||131072<=e&&196605>=e||196608<=e&&262141>=e))},l.wc.charWidthRegardAmbiguous=function(e){return l.wc.isCjkAmbiguous(e)?l.wc.cjkAmbiguousWidth:l.wc.charWidthDisregardAmbiguous(e)},l.wc.strWidth=function(e){for(var r=0,t=0,o;t<e.length;t++){if(o=l.wc.charWidth(e.charCodeAt(t)),0>o)return-1;r+=o}return r},l.wc.substr=function(e,r,t){var o,n,s;for(o=0,s=0;o<e.length&&(s+=l.wc.charWidth(e.charCodeAt(o)),!(s>r));o++);if(void 0!=t){for(n=o,s=0;n<e.length&&s<t;s+=l.wc.charWidth(e.charCodeAt(n)),n++);return s>t&&n--,e.substring(o,n)}return e.substr(o)},l.wc.substring=function(e,r,t){return l.wc.substr(e,r,t-r)},l.resource.add('libdot/changelog/version','text/plain','1.9'),l.resource.add('libdot/changelog/date','text/plain','2014-05-27'),'use strict',l.rtdep('lib.Storage');var d={};return a.hterm=d,d.windowType=null,d.zoomWarningMessage='ZOOM != 100%',d.notifyCopyMessage='\u2702',d.desktopNotificationTitle='\u266A %(title) \u266A',d.testDeps=['hterm.ScrollPort.Tests','hterm.Screen.Tests','hterm.Terminal.Tests','hterm.VT.Tests','hterm.VT.CannedTests'],l.registerInit('hterm',function(e){function r(r){d.windowType=r.type,setTimeout(e,0)}if(!d.defaultStorage){var t=navigator.userAgent.match(/\sChrome\/(\d\d)/),o=t?parseInt(t[1]):-1;d.defaultStorage=window.chrome&&chrome.storage&&chrome.storage.sync&&21<o?new l.Storage.Chrome(chrome.storage.sync):new l.Storage.Local}var n=!1;if(window.chrome&&chrome.runtime&&chrome.runtime.getManifest)var s=chrome.runtime.getManifest(),n=s.app&&s.app.background;n?setTimeout(r.bind(null,{type:'popup'}),0):window.chrome&&chrome.tabs?chrome.tabs.getCurrent(function(t){t&&window.chrome?chrome.windows.get(t.windowId,null,r):(d.windowType='normal',setTimeout(e,0))}):setTimeout(r.bind(null,{type:'normal'}),0)}),d.getClientSize=function(e){return e.getBoundingClientRect()},d.getClientWidth=function(e){return e.getBoundingClientRect().width},d.getClientHeight=function(e){return e.getBoundingClientRect().height},d.copySelectionToClipboard=function(e){try{e.execCommand('copy')}catch(e){}},d.pasteFromClipboard=function(e){try{e.execCommand('paste')}catch(e){}},d.Size=function(e,r){this.width=e,this.height=r},d.Size.prototype.resize=function(e,r){this.width=e,this.height=r},d.Size.prototype.clone=function(){return new d.Size(this.width,this.height)},d.Size.prototype.setTo=function(e){this.width=e.width,this.height=e.height},d.Size.prototype.equals=function(e){return this.width==e.width&&this.height==e.height},d.Size.prototype.toString=function(){return'[hterm.Size: '+this.width+', '+this.height+']'},d.RowCol=function(e,r,t){this.row=e,this.column=r,this.overflow=!!t},d.RowCol.prototype.move=function(e,r,t){this.row=e,this.column=r,this.overflow=!!t},d.RowCol.prototype.clone=function(){return new d.RowCol(this.row,this.column,this.overflow)},d.RowCol.prototype.setTo=function(e){this.row=e.row,this.column=e.column,this.overflow=e.overflow},d.RowCol.prototype.equals=function(e){return this.row==e.row&&this.column==e.column&&this.overflow==e.overflow},d.RowCol.prototype.toString=function(){return'[hterm.RowCol: '+this.row+', '+this.column+', '+this.overflow+']'},'use strict',l.rtdep('lib.f'),d.Frame=function(e,r,t){this.terminal_=e,this.div_=e.div_,this.url=r,this.options=t||{},this.iframe_=null,this.container_=null,this.messageChannel_=null},d.Frame.prototype.onMessage_=function(r){return'ipc-init-ok'==r.data.name?void(this.sendTerminalInfo_(),this.messageChannel_.port1.onmessage=this.onMessage.bind(this),this.onLoad()):void console.log('Unknown message from frame:',r.data)},d.Frame.prototype.onMessage=function(){},d.Frame.prototype.onLoad_=function(){this.messageChannel_=new MessageChannel,this.messageChannel_.port1.onmessage=this.onMessage_.bind(this),this.messageChannel_.port1.start(),this.iframe_.contentWindow.postMessage({name:'ipc-init',argv:[{messagePort:this.messageChannel_.port2}]},[this.messageChannel_.port2],this.url)},d.Frame.prototype.onLoad=function(){},d.Frame.prototype.sendTerminalInfo_=function(){l.f.getAcceptLanguages(function(e){this.postMessage('terminal-info',[{acceptLanguages:e,foregroundColor:this.terminal_.getForegroundColor(),backgroundColor:this.terminal_.getBackgroundColor(),cursorColor:this.terminal_.getCursorColor(),fontSize:this.terminal_.getFontSize(),fontFamily:this.terminal_.getFontFamily(),baseURL:l.f.getURL('/')}])}.bind(this))},d.Frame.prototype.onCloseClicked_=function(){this.close()},d.Frame.prototype.close=function(){this.container_&&this.container_.parentNode&&(this.container_.parentNode.removeChild(this.container_),this.onClose())},d.Frame.prototype.onClose=function(){},d.Frame.prototype.postMessage=function(e,r){if(!this.messageChannel_)throw new Error('Message channel is not set up.');this.messageChannel_.port1.postMessage({name:e,argv:r})},d.Frame.prototype.show=function(){function e(e,t){return e in r.options?r.options[e]:t}var r=this,r=this;if(this.container_&&this.container_.parentNode)return void console.error('Frame already visible');var t=d.getClientSize(this.div_),o=e('width',640),n=e('height',480),s=(t.width-o)/2,a=(t.height-n)/2,i=this.terminal_.document_,l=this.container_=i.createElement('div');l.style.cssText='position: absolute;display: -webkit-flex;-webkit-flex-direction: column;top: 10%;left: 4%;width: 90%;height: 80%;box-shadow: 0 0 2px '+this.terminal_.getForegroundColor()+';border: 2px '+this.terminal_.getForegroundColor()+' solid;';var c=i.createElement('div');c.style.cssText='display: -webkit-flex;-webkit-justify-content: flex-end;height: '+'16px'+';background-color: '+this.terminal_.getForegroundColor()+';color: '+this.terminal_.getBackgroundColor()+';font-size: 16px;font-family: '+this.terminal_.getFontFamily(),l.appendChild(c);var g=this.iframe_=i.createElement('iframe');g.onload=this.onLoad_.bind(this),g.style.cssText='display: -webkit-flex;-webkit-flex: 1;width: 100%',g.setAttribute('src',this.url),g.setAttribute('seamless',!0),l.appendChild(g),this.div_.appendChild(l)},'use strict',l.rtdep('hterm.Keyboard.KeyMap'),d.Keyboard=function(e){this.terminal=e,this.keyboardElement_=null,this.handlers_=[['blur',this.onBlur_.bind(this)],['keydown',this.onKeyDown_.bind(this)],['keypress',this.onKeyPress_.bind(this)],['keyup',this.onKeyUp_.bind(this)],['textInput',this.onTextInput_.bind(this)]],this.keyMap=new d.Keyboard.KeyMap(this),this.altGrMode='none',this.shiftInsertPaste=!0,this.homeKeysScroll=!1,this.pageKeysScroll=!1,this.ctrlPlusMinusZeroZoom=!0,this.ctrlCCopy=!1,this.ctrlVPaste=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.backspaceSendsBackspace=!1,this.characterEncoding='utf-8',this.metaSendsEscape=!0,this.passMetaV=!0,this.altSendsWhat='escape',this.altIsMeta=!1,this.altBackspaceIsMetaBackspace=!1,this.altKeyPressed=0,this.mediaKeysAreFKeys=!1,this.previousAltSendsWhat_=null},d.Keyboard.KeyActions={CANCEL:new String('CANCEL'),DEFAULT:new String('DEFAULT'),PASS:new String('PASS'),STRIP:new String('STRIP')},d.Keyboard.prototype.encode=function(e){return'utf-8'==this.characterEncoding?this.terminal.vt.encodeUTF8(e):e},d.Keyboard.prototype.installKeyboard=function(e){if(e!=this.keyboardElement_){e&&this.keyboardElement_&&this.installKeyboard(null);for(var r=0,t;r<this.handlers_.length;r++)t=this.handlers_[r],e?e.addEventListener(t[0],t[1]):this.keyboardElement_.removeEventListener(t[0],t[1]);this.keyboardElement_=e}},d.Keyboard.prototype.uninstallKeyboard=function(){this.installKeyboard(null)},d.Keyboard.prototype.onTextInput_=function(r){r.data&&r.data.split('').forEach(this.terminal.onVTKeystroke.bind(this.terminal))},d.Keyboard.prototype.onKeyPress_=function(t){var e=r(t.which),o=e.toLowerCase(),n;if(!((t.ctrlKey||t.metaKey)&&('c'==o||'v'==o))){if(t.altKey&&'browser-key'==this.altSendsWhat&&0==t.charCode){var s=r(t.keyCode);t.shiftKey||(s=s.toLowerCase()),n=s.charCodeAt(0)+128}else 32<=t.charCode&&(s=t.charCode);s&&this.terminal.onVTKeystroke(r(s)),t.preventDefault(),t.stopPropagation()}},d.Keyboard.prototype.preventChromeAppNonShiftDefault_=function(r){window.chrome&&window.chrome.app&&window.chrome.app.window&&(r.shiftKey||r.preventDefault())},d.Keyboard.prototype.onBlur_=function(){this.altKeyPressed=0},d.Keyboard.prototype.onKeyUp_=function(r){18==r.keyCode&&(this.altKeyPressed&=~(1<<r.location-1)),27==r.keyCode&&this.preventChromeAppNonShiftDefault_(r)},d.Keyboard.prototype.onKeyDown_=function(t){function e(r){n=r;var a=o[r];return'function'==typeof a&&(a=a.apply(s.keyMap,[t,o])),a===i&&'normal'!=r&&(a=e('normal')),a}18==t.keyCode&&(this.altKeyPressed|=1<<t.location-1),27==t.keyCode&&this.preventChromeAppNonShiftDefault_(t);var o=this.keyMap.keyDefs[t.keyCode];if(!o)return void console.warn('No definition for keyCode: '+t.keyCode);var n=null,s=this,a=d.Keyboard.KeyActions.CANCEL,i=d.Keyboard.KeyActions.DEFAULT,l=d.Keyboard.KeyActions.PASS,c=d.Keyboard.KeyActions.STRIP,g=t.ctrlKey,u=!this.altIsMeta&&t.altKey,p=this.altIsMeta?t.altKey||t.metaKey:t.metaKey,b=!/^\[\w+\]$/.test(o.keyCap);switch(this.altGrMode){case'ctrl-alt':b&&g&&u&&(g=!1,u=!1);break;case'right-alt':b&&2&this.terminal.keyboard.altKeyPressed&&(g=!1,u=!1);break;case'left-alt':b&&1&this.terminal.keyboard.altKeyPressed&&(g=!1,u=!1);}var m;if((m=g?e('control'):u?e('alt'):p?e('meta'):e('normal'),u&&'browser-key'==this.altSendsWhat&&m==i&&(m=l),m!==l&&(m!==i||g||u||p))&&(m===c&&(u=g=!1,m=o.normal,'function'==typeof m&&(m=m.apply(this.keyMap,[t,o])),m==i&&2==o.keyCap.length&&(m=o.keyCap.substr(t.shiftKey?1:0,1))),t.preventDefault(),t.stopPropagation(),m!==a)){if(m!==i&&'string'!=typeof m)return void console.warn('Invalid action: '+JSON.stringify(m));'control'==n?g=!1:'alt'==n?u=!1:'meta'==n&&(p=!1);var y=!t.maskShiftKey&&t.shiftKey;if('\x1B['==m.substr(0,2)&&(u||g||y)){var _;y&&!(u||g)?_=';2':u&&!(y||g)?_=';3':y&&u&&!g?_=';4':g&&!(y||u)?_=';5':y&&g&&!u?_=';6':u&&g&&!y?_=';7':y&&u&&g&&(_=';8'),m=3==m.length?'\x1B[1'+_+m.substr(2,1):m.substr(0,m.length-1)+_+m.substr(m.length-1)}else{if(m===i&&(m=o.keyCap.substr(t.shiftKey?1:0,1),g)){var h=o.keyCap.substr(0,1),C=h.charCodeAt(0);64<=C&&95>=C&&(m=r(C-64))}if(u&&'8-bit'==this.altSendsWhat&&1==m.length){var C=m.charCodeAt(0)+128;m=r(C)}(u&&'escape'==this.altSendsWhat||p&&this.metaSendsEscape)&&(m='\x1B'+m)}this.terminal.onVTKeystroke(m)}},'use strict',l.rtdep('hterm.Keyboard.KeyActions'),d.Keyboard.KeyMap=function(e){this.keyboard=e,this.keyDefs={},this.reset()},d.Keyboard.KeyMap.prototype.addKeyDef=function(e,r){e in this.keyDefs&&console.warn('Duplicate keyCode: '+e),this.keyDefs[e]=r},d.Keyboard.KeyMap.prototype.addKeyDefs=function(){for(var e=0;e<arguments.length;e++)this.addKeyDef(arguments[e][0],{keyCap:arguments[e][1],normal:arguments[e][2],control:arguments[e][3],alt:arguments[e][4],meta:arguments[e][5]})},d.Keyboard.KeyMap.prototype={__proto__:d.Keyboard.KeyMap.prototype},d.Keyboard.KeyMap.prototype.reset=function(){function t(r,t,e){return'function'==typeof r?r.apply(g,[t,e]):r}function e(r,o){return function(n,e){var s=n.shiftKey||n.ctrlKey||n.altKey||n.metaKey||!g.keyboard.applicationCursor?r:o;return t(s,n,e)}}function o(r,o){return function(n,e){var s=g.keyboard.backspaceSendsBackspace?o:r;return t(s,n,e)}}function n(r,o){return function(n,e){var s=n.shiftKey?o:r;return n.maskShiftKey=!0,t(s,n,e)}}function s(r,o){return function(n,e){var s=n.altKey?o:r;return t(s,n,e)}}function a(r,o){return function(n,e){var s=n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?o:r;return t(s,n,e)}}function i(e){return r(e.charCodeAt(0)-64)}function l(r){return function(t,e){return this[r](t,e)}}function c(r){return function(o,e){return g.keyboard.mediaKeysAreFKeys?t(r,o,e):166==o.keyCode||167==o.keyCode||168==o.keyCode?d.Keyboard.KeyActions.CANCEL:d.Keyboard.KeyActions.PASS}}this.keyDefs={};var g=this,u='\x1B[',p='\x1BO',b=d.Keyboard.KeyActions.CANCEL,m=d.Keyboard.KeyActions.DEFAULT,y=d.Keyboard.KeyActions.PASS,_=d.Keyboard.KeyActions.STRIP;this.addKeyDefs([0,'[UNKNOWN]',y,y,y,y],[27,'[ESC]','\x1B',m,m,m],[112,'[F1]',a(p+'P',u+'P'),m,u+'23~',m],[113,'[F2]',a(p+'Q',u+'Q'),m,u+'24~',m],[114,'[F3]',a(p+'R',u+'R'),m,u+'25~',m],[115,'[F4]',a(p+'S',u+'S'),m,u+'26~',m],[116,'[F5]',u+'15~',m,u+'28~',m],[117,'[F6]',u+'17~',m,u+'29~',m],[118,'[F7]',u+'18~',m,u+'31~',m],[119,'[F8]',u+'19~',m,u+'32~',m],[120,'[F9]',u+'20~',m,u+'33~',m],[121,'[F10]',u+'21~',m,u+'34~',m],[122,'[F11]',u+'23~',m,u+'42~',m],[123,'[F12]',u+'24~',m,u+'43~',m],[192,'`~',m,n(i('@'),i('^')),m,y],[49,'1!',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[50,'2@',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[51,'3#',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[52,'4$',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[53,'5%',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[54,'6^',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[55,'7&',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[56,'8*',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[57,'9(',m,l('onCtrlNum_'),l('onAltNum_'),l('onMetaNum_')],[48,'0)',m,l('onPlusMinusZero_'),l('onAltNum_'),l('onPlusMinusZero_')],[189,'-_',m,l('onPlusMinusZero_'),m,l('onPlusMinusZero_')],[187,'=+',m,l('onPlusMinusZero_'),m,l('onPlusMinusZero_')],[173,'-_',m,l('onPlusMinusZero_'),m,l('onPlusMinusZero_')],[61,'=+',m,l('onPlusMinusZero_'),m,l('onPlusMinusZero_')],[171,'+*',m,l('onPlusMinusZero_'),m,l('onPlusMinusZero_')],[8,'[BKSP]',o('\x7F','\b'),o('\b','\x7F'),m,m],[9,'[TAB]',n('\t',u+'Z'),_,y,m],[81,'qQ',m,i('Q'),m,m],[87,'wW',m,i('W'),m,m],[69,'eE',m,i('E'),m,m],[82,'rR',m,i('R'),m,m],[84,'tT',m,i('T'),m,m],[89,'yY',m,i('Y'),m,m],[85,'uU',m,i('U'),m,m],[73,'iI',m,i('I'),m,m],[79,'oO',m,i('O'),m,m],[80,'pP',m,i('P'),m,m],[219,'[{',m,i('['),m,m],[221,']}',m,i(']'),m,m],[220,'\\|',m,i('\\'),m,m],[20,'[CAPS]',y,y,y,m],[65,'aA',m,i('A'),m,m],[83,'sS',m,i('S'),m,m],[68,'dD',m,i('D'),m,m],[70,'fF',m,i('F'),m,m],[71,'gG',m,i('G'),m,m],[72,'hH',m,i('H'),m,m],[74,'jJ',m,n(i('J'),y),m,m],[75,'kK',m,n(i('K'),l('onClear_')),m,m],[76,'lL',m,n(i('L'),y),m,m],[186,';:',m,_,m,m],[222,'\'"',m,_,m,m],[13,'[ENTER]','\r',b,b,m],[16,'[SHIFT]',y,y,y,m],[90,'zZ',m,i('Z'),m,m],[88,'xX',m,i('X'),m,m],[67,'cC',m,l('onCtrlC_'),m,l('onMetaC_')],[86,'vV',m,l('onCtrlV_'),m,l('onMetaV_')],[66,'bB',m,n(i('B'),y),m,n(m,y)],[78,'nN',m,l('onCtrlN_'),m,l('onMetaN_')],[77,'mM',m,i('M'),m,m],[188,',<',m,s(_,y),m,m],[190,'.>',m,s(_,y),m,m],[191,'/?',m,n(i('_'),i('?')),m,m],[17,'[CTRL]',y,y,y,y],[18,'[ALT]',y,y,y,y],[91,'[LAPL]',y,y,y,y],[32,' ',m,i('@'),m,m],[92,'[RAPL]',y,y,y,y],[93,'[RMENU]',y,y,y,y],[42,'[PRTSCR]',y,y,y,y],[145,'[SCRLK]',y,y,y,y],[19,'[BREAK]',y,y,y,y],[45,'[INSERT]',l('onKeyInsert_'),m,m,m],[36,'[HOME]',l('onKeyHome_'),m,m,m],[33,'[PGUP]',l('onKeyPageUp_'),m,m,m],[46,'[DEL]',l('onKeyDel_'),m,m,m],[35,'[END]',l('onKeyEnd_'),m,m,m],[34,'[PGDOWN]',l('onKeyPageDown_'),m,m,m],[38,'[UP]',e(u+'A',p+'A'),m,m,m],[40,'[DOWN]',e(u+'B',p+'B'),m,m,m],[39,'[RIGHT]',e(u+'C',p+'C'),m,m,m],[37,'[LEFT]',e(u+'D',p+'D'),m,m,m],[144,'[NUMLOCK]',y,y,y,y],[96,'[KP0]',m,m,m,m],[97,'[KP1]',m,m,m,m],[98,'[KP2]',m,m,m,m],[99,'[KP3]',m,m,m,m],[100,'[KP4]',m,m,m,m],[101,'[KP5]',m,m,m,m],[102,'[KP6]',m,m,m,m],[103,'[KP7]',m,m,m,m],[104,'[KP8]',m,m,m,m],[105,'[KP9]',m,m,m,m],[107,'[KP+]',m,m,m,m],[109,'[KP-]',m,m,m,m],[106,'[KP*]',m,m,m,m],[111,'[KP/]',m,m,m,m],[110,'[KP.]',m,m,m,m],[166,'[BACK]',c(a(p+'P',u+'P')),m,u+'23~',m],[167,'[FWD]',c(a(p+'Q',u+'Q')),m,u+'24~',m],[168,'[RELOAD]',c(a(p+'R',u+'R')),m,u+'25~',m],[183,'[FSCR]',c(a(p+'S',u+'S')),m,u+'26~',m],[182,'[WINS]',c(u+'15~'),m,u+'28~',m],[216,'[BRIT-]',c(u+'17~'),m,u+'29~',m],[217,'[BRIT+]',c(u+'18~'),m,u+'31~',m])},d.Keyboard.KeyMap.prototype.onKeyInsert_=function(r){return this.keyboard.shiftInsertPaste&&r.shiftKey?d.Keyboard.KeyActions.PASS:'\x1B[2~'},d.Keyboard.KeyMap.prototype.onKeyHome_=function(r){return!this.keyboard.homeKeysScroll^r.shiftKey?r.altey||r.ctrlKey||r.shiftKey||!this.keyboard.applicationCursor?'\x1B[H':'\x1BOH':(this.keyboard.terminal.scrollHome(),d.Keyboard.KeyActions.CANCEL)},d.Keyboard.KeyMap.prototype.onKeyEnd_=function(r){return!this.keyboard.homeKeysScroll^r.shiftKey?r.altKey||r.ctrlKey||r.shiftKey||!this.keyboard.applicationCursor?'\x1B[F':'\x1BOF':(this.keyboard.terminal.scrollEnd(),d.Keyboard.KeyActions.CANCEL)},d.Keyboard.KeyMap.prototype.onKeyPageUp_=function(r){return!this.keyboard.pageKeysScroll^r.shiftKey?'\x1B[5~':(this.keyboard.terminal.scrollPageUp(),d.Keyboard.KeyActions.CANCEL)},d.Keyboard.KeyMap.prototype.onKeyDel_=function(r){return this.keyboard.altBackspaceIsMetaBackspace&&this.keyboard.altKeyPressed&&!r.altKey?'\x1B\x7F':'\x1B[3~'},d.Keyboard.KeyMap.prototype.onKeyPageDown_=function(r){return!this.keyboard.pageKeysScroll^r.shiftKey?'\x1B[6~':(this.keyboard.terminal.scrollPageDown(),d.Keyboard.KeyActions.CANCEL)},d.Keyboard.KeyMap.prototype.onClear_=function(){return this.keyboard.terminal.wipeContents(),d.Keyboard.KeyActions.CANCEL},d.Keyboard.KeyMap.prototype.onCtrlNum_=function(t,e){function o(e){return r(e.charCodeAt(0)-64)}if(this.keyboard.terminal.passCtrlNumber&&!t.shiftKey)return d.Keyboard.KeyActions.PASS;switch(e.keyCap.substr(0,1)){case'1':return'1';case'2':return o('@');case'3':return o('[');case'4':return o('\\');case'5':return o(']');case'6':return o('^');case'7':return o('_');case'8':return'\x7F';case'9':return'9';}},d.Keyboard.KeyMap.prototype.onAltNum_=function(r){return this.keyboard.terminal.passAltNumber&&!r.shiftKey?d.Keyboard.KeyActions.PASS:d.Keyboard.KeyActions.DEFAULT},d.Keyboard.KeyMap.prototype.onMetaNum_=function(r){return this.keyboard.terminal.passMetaNumber&&!r.shiftKey?d.Keyboard.KeyActions.PASS:d.Keyboard.KeyActions.DEFAULT},d.Keyboard.KeyMap.prototype.onCtrlC_=function(r){var e=this.keyboard.terminal.getDocument().getSelection();if(!e.isCollapsed){if(this.keyboard.ctrlCCopy&&!r.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(e.collapseToEnd.bind(e),50),this.keyboard.terminal.prefs_.get('enable-clipboard-notice')&&setTimeout(this.keyboard.terminal.showOverlay.bind(this.keyboard.terminal,d.notifyCopyMessage,500),200),d.Keyboard.KeyActions.PASS;if(!this.keyboard.ctrlCCopy&&r.shiftKey)return this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(e.collapseToEnd.bind(e),50),this.keyboard.terminal.copySelectionToClipboard(),d.Keyboard.KeyActions.CANCEL}return'\x03'},d.Keyboard.KeyMap.prototype.onCtrlN_=function(r){return r.shiftKey?(window.open(document.location.href,'','chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width='+window.innerWidth+',height='+window.innerHeight),d.Keyboard.KeyActions.CANCEL):'\x0E'},d.Keyboard.KeyMap.prototype.onCtrlV_=function(r){return!r.shiftKey&&this.keyboard.ctrlVPaste||r.shiftKey&&!this.keyboard.ctrlVPaste?d.Keyboard.KeyActions.PASS:'\x16'},d.Keyboard.KeyMap.prototype.onMetaN_=function(r){return r.shiftKey?(window.open(document.location.href,'','chrome=no,close=yes,resize=yes,scrollbars=yes,minimizable=yes,width='+window.outerWidth+',height='+window.outerHeight),d.Keyboard.KeyActions.CANCEL):d.Keyboard.KeyActions.DEFAULT},d.Keyboard.KeyMap.prototype.onMetaC_=function(r,e){var t=this.keyboard.terminal.getDocument();return r.shiftKey||t.getSelection().isCollapsed?e.keyCap.substr(r.shiftKey?1:0,1):(this.keyboard.terminal.clearSelectionAfterCopy&&setTimeout(function(){t.getSelection().collapseToEnd()},50),d.Keyboard.KeyActions.PASS)},d.Keyboard.KeyMap.prototype.onMetaV_=function(r){return r.shiftKey?d.Keyboard.KeyActions.PASS:this.keyboard.passMetaV?d.Keyboard.KeyActions.PASS:d.Keyboard.KeyActions.DEFAULT},d.Keyboard.KeyMap.prototype.onPlusMinusZero_=function(r,e){if(!(this.keyboard.ctrlPlusMinusZeroZoom^r.shiftKey))return'-_'==e.keyCap?'\x1F':d.Keyboard.KeyActions.CANCEL;if(1!=this.keyboard.terminal.getZoomFactor())return d.Keyboard.KeyActions.PASS;var t=e.keyCap.substr(0,1);if('0'==t)this.keyboard.terminal.setFontSize(0);else{var o=this.keyboard.terminal.getFontSize();'-'==t?o-=1:o+=1,this.keyboard.terminal.setFontSize(o)}return d.Keyboard.KeyActions.CANCEL},'use strict',d.Options=function(e){this.wraparound=!e||e.wraparound,this.reverseWraparound=!!e&&e.reverseWraparound,this.originMode=!!e&&e.originMode,this.autoCarriageReturn=!!e&&e.autoCarriageReturn,this.cursorVisible=!!e&&e.cursorVisible,this.cursorBlink=!!e&&e.cursorBlink,this.insertMode=!!e&&e.insertMode,this.reverseVideo=!!e&&e.reverseVideo,this.bracketedPaste=!!e&&e.bracketedPaste},'use strict',l.rtdep('lib.f','lib.Storage'),d.PreferenceManager=function(e){l.PreferenceManager.call(this,d.defaultStorage,'/hterm/profiles/'+e);var r=d.PreferenceManager.defaultPreferences;Object.keys(r).forEach(function(e){this.definePreference(e,r[e])}.bind(this))},d.PreferenceManager.defaultPreferences={"alt-gr-mode":null,"alt-backspace-is-meta-backspace":!1,"alt-is-meta":!1,"alt-sends-what":'escape',"audible-bell-sound":'lib-resource:hterm/audio/bell',"desktop-notification-bell":!1,"background-color":'rgb(16, 16, 16)',"background-image":'',"background-size":'',"background-position":'',"backspace-sends-backspace":!1,"character-map-overrides":null,"close-on-exit":!0,"cursor-blink":!1,"cursor-blink-cycle":[1000,500],"cursor-color":'rgba(255, 0, 0, 0.5)',"color-palette-overrides":null,"copy-on-select":!0,"use-default-window-copy":!1,"clear-selection-after-copy":!0,"ctrl-plus-minus-zero-zoom":!0,"ctrl-c-copy":!1,"ctrl-v-paste":!1,"east-asian-ambiguous-as-two-column":!1,"enable-8-bit-control":!1,"enable-bold":null,"enable-bold-as-bright":!0,"enable-clipboard-notice":!0,"enable-clipboard-write":!0,"enable-dec12":!1,environment:{TERM:'xterm-256color'},"font-family":'"DejaVu Sans Mono", "Everson Mono", FreeMono, "Menlo", "Terminal", monospace',"font-size":15,"font-smoothing":'antialiased',"foreground-color":'rgb(240, 240, 240)',"home-keys-scroll":!1,"max-string-sequence":100000,"media-keys-are-fkeys":!1,"meta-sends-escape":!0,"mouse-paste-button":null,"page-keys-scroll":!1,"pass-alt-number":null,"pass-ctrl-number":null,"pass-meta-number":null,"pass-meta-v":!0,"receive-encoding":'utf-8',"scroll-on-keystroke":!0,"scroll-on-output":!1,"scrollbar-visible":!0,"scroll-wheel-move-multiplier":1,"send-encoding":'utf-8',"shift-insert-paste":!0,"user-css":''},d.PreferenceManager.prototype={__proto__:l.PreferenceManager.prototype},'use strict',d.PubSub=function(){this.observers_={}},d.PubSub.addBehavior=function(e){var r=new d.PubSub;for(var t in d.PubSub.prototype)e[t]=d.PubSub.prototype[t].bind(r)},d.PubSub.prototype.subscribe=function(e,r){e in this.observers_||(this.observers_[e]=[]),this.observers_[e].push(r)},d.PubSub.prototype.unsubscribe=function(e,r){var t=this.observers_[e];if(!t)throw'Invalid subject: '+e;var o=t.indexOf(r);if(0>o)throw'Not subscribed: '+e;t.splice(o,1)},d.PubSub.prototype.publish=function(r,t,e){function o(e){e<n.length-1&&setTimeout(o,0,e+1),n[e](t)}var n=this.observers_[r];n&&(n=[].concat(n)),e&&(n?n.push(e):n=[e]),n&&setTimeout(o,0,0)},'use strict',l.rtdep('lib.f','lib.wc','hterm.RowCol','hterm.Size','hterm.TextAttributes'),d.Screen=function(e){this.rowsArray=[],this.columnCount_=e||80,this.textAttributes=new d.TextAttributes(window.document),this.cursorPosition=new d.RowCol(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null},d.Screen.prototype.getSize=function(){return new d.Size(this.columnCount_,this.rowsArray.length)},d.Screen.prototype.getHeight=function(){return this.rowsArray.length},d.Screen.prototype.getWidth=function(){return this.columnCount_},d.Screen.prototype.setColumnCount=function(e){this.columnCount_=e,this.cursorPosition.column>=e&&this.setCursorPosition(this.cursorPosition.row,e-1)},d.Screen.prototype.shiftRow=function(){return this.shiftRows(1)[0]},d.Screen.prototype.shiftRows=function(e){return this.rowsArray.splice(0,e)},d.Screen.prototype.unshiftRow=function(e){this.rowsArray.splice(0,0,e)},d.Screen.prototype.unshiftRows=function(e){this.rowsArray.unshift.apply(this.rowsArray,e)},d.Screen.prototype.popRow=function(){return this.popRows(1)[0]},d.Screen.prototype.popRows=function(e){return this.rowsArray.splice(this.rowsArray.length-e,e)},d.Screen.prototype.pushRow=function(e){this.rowsArray.push(e)},d.Screen.prototype.pushRows=function(e){e.push.apply(this.rowsArray,e)},d.Screen.prototype.insertRow=function(e,r){this.rowsArray.splice(e,0,r)},d.Screen.prototype.insertRows=function(e,r){for(var t=0;t<r.length;t++)this.rowsArray.splice(e+t,0,r[t])},d.Screen.prototype.removeRow=function(e){return this.rowsArray.splice(e,1)[0]},d.Screen.prototype.removeRows=function(e,r){return this.rowsArray.splice(e,r)},d.Screen.prototype.invalidateCursorPosition=function(){this.cursorPosition.move(0,0),this.cursorRowNode_=null,this.cursorNode_=null,this.cursorOffset_=null},d.Screen.prototype.clearCursorRow=function(){this.cursorRowNode_.innerHTML='',this.cursorRowNode_.removeAttribute('line-overflow'),this.cursorOffset_=0,this.cursorPosition.column=0,this.cursorPosition.overflow=!1;var e=this.textAttributes.isDefault()?'':l.f.getWhitespace(this.columnCount_);var r=this.textAttributes.inverse;this.textAttributes.inverse=!1,this.textAttributes.syncColors();var t=this.textAttributes.createContainer(e);this.cursorRowNode_.appendChild(t),this.cursorNode_=t,this.textAttributes.inverse=r,this.textAttributes.syncColors()},d.Screen.prototype.commitLineOverflow=function(){this.cursorRowNode_.setAttribute('line-overflow',!0)},d.Screen.prototype.setCursorPosition=function(e,r){if(!this.rowsArray.length)return void console.warn('Attempt to set cursor position on empty screen.');e>=this.rowsArray.length?(console.error('Row out of bounds: '+e),e=this.rowsArray.length-1):0>e&&(console.error('Row out of bounds: '+e),e=0),r>=this.columnCount_?(console.error('Column out of bounds: '+r),r=this.columnCount_-1):0>r&&(console.error('Column out of bounds: '+r),r=0),this.cursorPosition.overflow=!1;var t=this.rowsArray[e],o=t.firstChild;o||(o=t.ownerDocument.createTextNode(''),t.appendChild(o));var n=0;for(t==this.cursorRowNode_?r>=this.cursorPosition.column-this.cursorOffset_&&(o=this.cursorNode_,n=this.cursorPosition.column-this.cursorOffset_):this.cursorRowNode_=t,this.cursorPosition.move(e,r);o;){var s=r-n,a=d.TextAttributes.nodeWidth(o);if(!o.nextSibling||a>s)return this.cursorNode_=o,void(this.cursorOffset_=s);n+=a,o=o.nextSibling}},d.Screen.prototype.syncSelectionCaret=function(e){try{e.collapse(this.cursorNode_,this.cursorOffset_)}catch(e){}},d.Screen.prototype.splitNode_=function(e,r){var t=e.cloneNode(!1),o=e.textContent;e.textContent=d.TextAttributes.nodeSubstr(e,0,r),t.textContent=l.wc.substr(o,r),t.textContent&&e.parentNode.insertBefore(t,e.nextSibling),e.textContent||e.parentNode.removeChild(e)},d.Screen.prototype.maybeClipCurrentRow=function(){var e=d.TextAttributes.nodeWidth(this.cursorRowNode_);if(e<=this.columnCount_)return void(this.cursorPosition.column>=this.columnCount_&&(this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),this.cursorPosition.overflow=!0));var r=this.cursorPosition.column;this.setCursorPosition(this.cursorPosition.row,this.columnCount_-1),e=d.TextAttributes.nodeWidth(this.cursorNode_),this.cursorOffset_<e-1&&(this.cursorNode_.textContent=d.TextAttributes.nodeSubstr(this.cursorNode_,0,this.cursorOffset_+1));for(var t=this.cursorRowNode_,o=this.cursorNode_.nextSibling;o;)t.removeChild(o),o=this.cursorNode_.nextSibling;r<this.columnCount_?this.setCursorPosition(this.cursorPosition.row,r):this.cursorPosition.overflow=!0},d.Screen.prototype.insertString=function(e){var r=this.cursorNode_,t=r.textContent;this.cursorRowNode_.removeAttribute('line-overflow');var o=l.wc.strWidth(e);this.cursorPosition.column+=o;var n=this.cursorOffset_,s=d.TextAttributes.nodeWidth(r)-n;if(0>s){var a=l.f.getWhitespace(-s);if(!(this.textAttributes.underline||this.textAttributes.strikethrough||this.textAttributes.background||this.textAttributes.wcNode||null!=this.textAttributes.tileData))e=a+e;else if(3==r.nodeType||!(r.wcNode||r.tileNode||r.style.textDecoration||r.style.backgroundColor))r.textContent=t+=a;else{var i=r.ownerDocument.createTextNode(a);this.cursorRowNode_.insertBefore(i,r.nextSibling),this.cursorNode_=r=i,this.cursorOffset_=n=-s,t=a}s=0}if(this.textAttributes.matchesContainer(r))return r.textContent=0==s?t+e:0==n?e+t:d.TextAttributes.nodeSubstr(r,0,n)+e+d.TextAttributes.nodeSubstr(r,n),void(this.cursorOffset_+=o);if(0==n){var c=r.previousSibling;if(c&&this.textAttributes.matchesContainer(c))return c.textContent+=e,this.cursorNode_=c,void(this.cursorOffset_=l.wc.strWidth(c.textContent));var g=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(g,r),this.cursorNode_=g,void(this.cursorOffset_=o)}if(0==s){var u=r.nextSibling;if(u&&this.textAttributes.matchesContainer(u))return u.textContent=e+u.textContent,this.cursorNode_=u,void(this.cursorOffset_=l.wc.strWidth(e));var g=this.textAttributes.createContainer(e);return this.cursorRowNode_.insertBefore(g,u),this.cursorNode_=g,void(this.cursorOffset_=d.TextAttributes.nodeWidth(g))}this.splitNode_(r,n);var g=this.textAttributes.createContainer(e);this.cursorRowNode_.insertBefore(g,r.nextSibling),this.cursorNode_=g,this.cursorOffset_=o},d.Screen.prototype.overwriteString=function(e){var r=this.columnCount_-this.cursorPosition.column;if(!r)return[e];var t=l.wc.strWidth(e);return this.textAttributes.matchesContainer(this.cursorNode_)&&this.cursorNode_.textContent.substr(this.cursorOffset_)==e?(this.cursorOffset_+=t,void(this.cursorPosition.column+=t)):void(this.deleteChars(s(t,r)),this.insertString(e))},d.Screen.prototype.deleteChars=function(e){var r=this.cursorNode_,t=this.cursorOffset_,o=this.cursorPosition.column;if(e=s(e,this.columnCount_-o),!e)return 0;for(var n=e,a,i;r&&e;){if(a=d.TextAttributes.nodeWidth(r),r.textContent=d.TextAttributes.nodeSubstr(r,0,t)+d.TextAttributes.nodeSubstr(r,t+e),i=d.TextAttributes.nodeWidth(r),e-=a-i,t<a&&i&&a==i){var l=this.textAttributes.createContainer(' ');r.parentNode.insertBefore(l,r.nextSibling),r.textContent='',i=0,e-=1}var c=r.nextSibling;0==i&&r!=this.cursorNode_&&r.parentNode.removeChild(r),r=c,t=0}if(3!=this.cursorNode_.nodeType&&!this.cursorNode_.textContent){var g=this.cursorNode_;if(g.previousSibling)this.cursorNode_=g.previousSibling,this.cursorOffset_=d.TextAttributes.nodeWidth(g.previousSibling);else if(g.nextSibling)this.cursorNode_=g.nextSibling,this.cursorOffset_=0;else{var u=this.cursorRowNode_.ownerDocument.createTextNode('');this.cursorRowNode_.appendChild(u),this.cursorNode_=u,this.cursorOffset_=0}this.cursorRowNode_.removeChild(g)}return n},d.Screen.prototype.getLineStartRow_=function(e){for(;e.previousSibling&&e.previousSibling.hasAttribute('line-overflow');)e=e.previousSibling;return e},d.Screen.prototype.getLineText_=function(e){for(var r='';e&&(r+=e.textContent,e.hasAttribute('line-overflow'));)e=e.nextSibling;return r},d.Screen.prototype.getXRowAncestor_=function(e){for(;e&&'X-ROW'!==e.nodeName;)e=e.parentNode;return e},d.Screen.prototype.getPositionWithOverflow_=function(e,r,t){if(!r)return-1;var o=this.getXRowAncestor_(r);if(!o)return-1;for(var n=0;o!=e;)if(n+=d.TextAttributes.nodeWidth(e),e.hasAttribute('line-overflow')&&e.nextSibling)e=e.nextSibling;else return-1;return n+this.getPositionWithinRow_(e,r,t)},d.Screen.prototype.getPositionWithinRow_=function(e,r,t){if(r.parentNode!=e)return this.getPositionWithinRow_(r.parentNode,r,t)+this.getPositionWithinRow_(e,r.parentNode,0);for(var o=0,n=0,s;n<e.childNodes.length;n++){if(s=e.childNodes[n],s==r)return o+t;o+=d.TextAttributes.nodeWidth(s)}return-1},d.Screen.prototype.getNodeAndOffsetWithOverflow_=function(e,r){for(;e&&r>d.TextAttributes.nodeWidth(e);)if(e.hasAttribute('line-overflow')&&e.nextSibling)r-=d.TextAttributes.nodeWidth(e),e=e.nextSibling;else return-1;return this.getNodeAndOffsetWithinRow_(e,r)},d.Screen.prototype.getNodeAndOffsetWithinRow_=function(e,r){for(var t=0;t<e.childNodes.length;t++){var o=e.childNodes[t],n=d.TextAttributes.nodeWidth(o);if(r<=n)return'SPAN'===o.nodeName?this.getNodeAndOffsetWithinRow_(o,r):[o,r];r-=n}return null},d.Screen.prototype.setRange_=function(e,r,t,o){var n=this.getNodeAndOffsetWithOverflow_(e,r);if(null!=n){var s=this.getNodeAndOffsetWithOverflow_(e,t);null==s||(o.setStart(n[0],n[1]),o.setEnd(s[0],s[1]))}},d.Screen.prototype.expandSelection=function(e){if(e){var r=e.getRangeAt(0);if(r&&!r.toString().match(/\s/)){var t=this.getLineStartRow_(this.getXRowAncestor_(r.startContainer));if(t){var o=this.getPositionWithOverflow_(t,r.startContainer,r.startOffset);if(-1!=o){var n=this.getPositionWithOverflow_(t,r.endContainer,r.endOffset);if(-1!=n){var s=this.getLineText_(t),a=l.wc.substring(s,0,n),i=/[^\s\[\](){}<>"'\^!@#$%&*,;:`][^\s\[\](){}<>"'\^]*$/,c=a.search(i);if(!(-1==c||c>o)){var d=l.wc.substring(s,o,l.wc.strWidth(s)),g=/^[^\s\[\](){}<>"'\^]*[^\s\[\](){}<>"'\^!@#$%&*,;:~.`]/,u=d.match(g);if(u){var p=o+l.wc.strWidth(u[0]);-1==p||p<n||(this.setRange_(t,c,p,r),e.addRange(r))}}}}}}}},'use strict',l.rtdep('lib.f','hterm.PubSub','hterm.Size'),d.ScrollPort=function(e){d.PubSub.addBehavior(this),this.rowProvider_=e,this.characterSize=new d.Size(10,10),this.ruler_=null,this.selection=new d.ScrollPort.Selection(this),this.currentRowNodeCache_=null,this.previousRowNodeCache_={},this.lastScreenWidth_=null,this.lastScreenHeight_=null,this.selectionEnabled_=!0,this.lastRowCount_=0,this.scrollWheelMultiplier_=1,this.isScrolledEnd=!0,this.xrowCssRule_=null,this.currentScrollbarWidthPx=16,this.ctrlVPaste=!1,this.div_=null,this.document_=null,this.timeouts_={},this.observers_={},this.DEBUG_=!1},d.ScrollPort.Selection=function(e){this.scrollPort_=e,this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=null},d.ScrollPort.Selection.prototype.findFirstChild=function(e,r){for(var t=e.firstChild;t;){if(-1!=r.indexOf(t))return t;if(t.childNodes.length){var o=this.findFirstChild(t,r);if(o)return o}t=t.nextSibling}return null},d.ScrollPort.Selection.prototype.sync=function(){function e(){t.startRow=n,t.startNode=o.anchorNode,t.startOffset=o.anchorOffset,t.endRow=s,t.endNode=o.focusNode,t.endOffset=o.focusOffset}function r(){t.startRow=s,t.startNode=o.focusNode,t.startOffset=o.focusOffset,t.endRow=n,t.endNode=o.anchorNode,t.endOffset=o.anchorOffset}var t=this,o=this.scrollPort_.getDocument().getSelection();if(this.startRow=null,this.endRow=null,this.isMultiline=null,this.isCollapsed=!o||o.isCollapsed,!this.isCollapsed){for(var n=o.anchorNode;n&&!('rowIndex'in n);)n=n.parentNode;if(!n)return void console.error('Selection anchor is not rooted in a row node: '+o.anchorNode.nodeName);for(var s=o.focusNode;s&&!('rowIndex'in s);)s=s.parentNode;if(!s)return void console.error('Selection focus is not rooted in a row node: '+o.focusNode.nodeName);if(n.rowIndex<s.rowIndex)e();else if(n.rowIndex>s.rowIndex)r();else if(o.focusNode==o.anchorNode)o.anchorOffset<o.focusOffset?e():r();else{var a=this.findFirstChild(n,[o.anchorNode,o.focusNode]);if(!a)throw new Error('Unexpected error syncing selection.');a==o.anchorNode?e():r()}this.isMultiline=n.rowIndex!=s.rowIndex}},d.ScrollPort.prototype.decorate=function(e){this.div_=e,this.iframe_=e.ownerDocument.createElement('iframe'),this.iframe_.style.cssText='border: 0;height: 100%;width: 100%','mozInnerScreenX'in window&&(this.iframe_.src='#'),e.appendChild(this.iframe_),this.iframe_.contentWindow.addEventListener('resize',this.onResize_.bind(this));var r=this.document_=this.iframe_.contentDocument;r.body.style.cssText='margin: 0px;padding: 0px;height: 100%;width: 100%;overflow: hidden;-webkit-user-select: none;-moz-user-select: none;';var t=r.createElement('style');t.textContent='x-row {}',r.head.appendChild(t),this.xrowCssRule_=r.styleSheets[0].cssRules[0],this.xrowCssRule_.style.display='block',this.userCssLink_=r.createElement('link'),this.userCssLink_.setAttribute('rel','stylesheet'),this.screen_=r.createElement('x-screen'),this.screen_.setAttribute('role','textbox'),this.screen_.setAttribute('tabindex','-1'),this.screen_.style.cssText='display: block;font-family: monospace;font-size: 15px;height: 100%;overflow-y: scroll; overflow-x: hidden;white-space: pre;width: 100%;outline: none !important',r.body.appendChild(this.screen_),this.screen_.addEventListener('scroll',this.onScroll_.bind(this)),this.screen_.addEventListener('mousewheel',this.onScrollWheel_.bind(this)),this.screen_.addEventListener('DOMMouseScroll',this.onScrollWheel_.bind(this)),this.screen_.addEventListener('copy',this.onCopy_.bind(this)),this.screen_.addEventListener('paste',this.onPaste_.bind(this)),r.body.addEventListener('keydown',this.onBodyKeyDown_.bind(this)),this.rowNodes_=r.createElement('div'),this.rowNodes_.style.cssText='display: block;position: fixed;overflow: hidden;-webkit-user-select: text;-moz-user-select: text;',this.screen_.appendChild(this.rowNodes_),this.topSelectBag_=r.createElement('x-select-bag'),this.topSelectBag_.style.cssText='display: block;overflow: hidden;white-space: pre;',this.bottomSelectBag_=this.topSelectBag_.cloneNode(),this.topFold_=r.createElement('x-fold'),this.topFold_.style.cssText='display: block;',this.rowNodes_.appendChild(this.topFold_),this.bottomFold_=this.topFold_.cloneNode(),this.rowNodes_.appendChild(this.bottomFold_),this.scrollArea_=r.createElement('div'),this.scrollArea_.style.cssText='visibility: hidden',this.screen_.appendChild(this.scrollArea_),this.svg_=this.div_.ownerDocument.createElementNS('http://www.w3.org/2000/svg','svg'),this.svg_.setAttribute('xmlns','http://www.w3.org/2000/svg'),this.svg_.setAttribute('version','1.1'),this.svg_.style.cssText='position: absolute;top: 0;left: 0;visibility: hidden',this.pasteTarget_=r.createElement('textarea'),this.pasteTarget_.setAttribute('tabindex','-1'),this.pasteTarget_.style.cssText='position: absolute;height: 1px;width: 1px;left: 0px; bottom: 0px;opacity: 0',this.pasteTarget_.contentEditable=!0,this.screen_.appendChild(this.pasteTarget_),this.pasteTarget_.addEventListener('textInput',this.handlePasteTargetTextInput_.bind(this)),this.resize()},d.ScrollPort.prototype.setFontFamily=function(e,r){this.screen_.style.fontFamily=e,this.screen_.style.webkitFontSmoothing=r?r:'',this.syncCharacterSize()},d.ScrollPort.prototype.getFontFamily=function(){return this.screen_.style.fontFamily},d.ScrollPort.prototype.setUserCss=function(e){e?(this.userCssLink_.setAttribute('href',e),!this.userCssLink_.parentNode&&this.document_.head.appendChild(this.userCssLink_)):this.userCssLink_.parentNode&&this.document_.head.removeChild(this.userCssLink_)},d.ScrollPort.prototype.focus=function(){this.iframe_.focus(),this.screen_.focus()},d.ScrollPort.prototype.getForegroundColor=function(){return this.screen_.style.color},d.ScrollPort.prototype.setForegroundColor=function(e){this.screen_.style.color=e},d.ScrollPort.prototype.getBackgroundColor=function(){return this.screen_.style.backgroundColor},d.ScrollPort.prototype.setBackgroundColor=function(e){this.screen_.style.backgroundColor=e},d.ScrollPort.prototype.setBackgroundImage=function(e){this.screen_.style.backgroundImage=e},d.ScrollPort.prototype.setBackgroundSize=function(e){this.screen_.style.backgroundSize=e},d.ScrollPort.prototype.setBackgroundPosition=function(e){this.screen_.style.backgroundPosition=e},d.ScrollPort.prototype.setCtrlVPaste=function(e){this.ctrlVPaste=e},d.ScrollPort.prototype.getScreenSize=function(){var e=d.getClientSize(this.screen_);return{height:e.height,width:e.width-this.currentScrollbarWidthPx}},d.ScrollPort.prototype.getScreenWidth=function(){return this.getScreenSize().width},d.ScrollPort.prototype.getScreenHeight=function(){return this.getScreenSize().height},d.ScrollPort.prototype.getDocument=function(){return this.document_},d.ScrollPort.prototype.getScreenNode=function(){return this.screen_},d.ScrollPort.prototype.resetCache=function(){this.currentRowNodeCache_=null,this.previousRowNodeCache_={}},d.ScrollPort.prototype.setRowProvider=function(e){this.resetCache(),this.rowProvider_=e,this.scheduleRedraw()},d.ScrollPort.prototype.invalidate=function(){for(var e=this.topFold_.nextSibling,r;e!=this.bottomFold_;)r=e.nextSibling,e.parentElement.removeChild(e),e=r;this.previousRowNodeCache_=null;var t=this.getTopRowIndex(),o=this.getBottomRowIndex(t);this.drawVisibleRows_(t,o)},d.ScrollPort.prototype.scheduleInvalidate=function(){if(!this.timeouts_.invalidate){var e=this;this.timeouts_.invalidate=setTimeout(function(){delete e.timeouts_.invalidate,e.invalidate()},0)}},d.ScrollPort.prototype.setFontSize=function(e){this.screen_.style.fontSize=e+'px',this.syncCharacterSize()},d.ScrollPort.prototype.getFontSize=function(){return parseInt(this.screen_.style.fontSize)},d.ScrollPort.prototype.measureCharacterSize=function(e){this.ruler_||(this.ruler_=this.document_.createElement('div'),this.ruler_.style.cssText='position: absolute;top: 0;left: 0;visibility: hidden;height: auto !important;width: auto !important;',this.rulerSpan_=this.document_.createElement('span'),this.rulerSpan_.textContent='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',this.ruler_.appendChild(this.rulerSpan_),this.rulerBaseline_=this.document_.createElement('span'),this.rulerBaseline_.style.fontSize='0px',this.rulerBaseline_.textContent='X'),this.rulerSpan_.style.fontWeight=e||'',this.rowNodes_.appendChild(this.ruler_);var r=d.getClientSize(this.rulerSpan_),t=new d.Size(r.width/this.ruler_.textContent.length,r.height);return this.ruler_.appendChild(this.rulerBaseline_),t.baseline=this.rulerBaseline_.offsetTop,this.ruler_.removeChild(this.rulerBaseline_),this.rowNodes_.removeChild(this.ruler_),this.div_.ownerDocument.body.appendChild(this.svg_),t.zoomFactor=this.svg_.currentScale,this.div_.ownerDocument.body.removeChild(this.svg_),t},d.ScrollPort.prototype.syncCharacterSize=function(){this.characterSize=this.measureCharacterSize();var e=this.characterSize.height+'px';this.xrowCssRule_.style.height=e,this.topSelectBag_.style.height=e,this.bottomSelectBag_.style.height=e,this.resize(),this.DEBUG_&&(this.document_.body.style.paddingTop=this.document_.body.style.paddingBottom=3*this.characterSize.height+'px')},d.ScrollPort.prototype.resize=function(){this.currentScrollbarWidthPx=d.getClientWidth(this.screen_)-this.screen_.clientWidth,this.syncScrollHeight(),this.syncRowNodesDimensions_();var e=this;this.publish('resize',{scrollPort:this},function(){e.scrollRowToBottom(e.rowProvider_.getRowCount()),e.scheduleRedraw()})},d.ScrollPort.prototype.syncRowNodesDimensions_=function(){var e=this.getScreenSize();this.lastScreenWidth_=e.width,this.lastScreenHeight_=e.height,this.visibleRowCount=l.f.smartFloorDivide(e.height,this.characterSize.height);var r=this.visibleRowCount*this.characterSize.height;this.visibleRowTopMargin=0,this.visibleRowBottomMargin=e.height-r,this.topFold_.style.marginBottom=this.visibleRowTopMargin+'px';for(var t=0,o=this.topFold_.previousSibling;o;)t+=d.getClientHeight(o),o=o.previousSibling;this.rowNodes_.style.width=e.width+'px',this.rowNodes_.style.height=r+t+'px',this.rowNodes_.style.left=this.screen_.offsetLeft+'px',this.rowNodes_.style.top=this.screen_.offsetTop-t+'px'},d.ScrollPort.prototype.syncScrollHeight=function(){this.lastRowCount_=this.rowProvider_.getRowCount(),this.scrollArea_.style.height=this.characterSize.height*this.lastRowCount_+this.visibleRowTopMargin+this.visibleRowBottomMargin+'px'},d.ScrollPort.prototype.scheduleRedraw=function(){if(!this.timeouts_.redraw){var e=this;this.timeouts_.redraw=setTimeout(function(){delete e.timeouts_.redraw,e.redraw_()},0)}},d.ScrollPort.prototype.redraw_=function(){this.resetSelectBags_(),this.selection.sync(),this.syncScrollHeight(),this.currentRowNodeCache_={};var e=this.getTopRowIndex(),r=this.getBottomRowIndex(e);this.drawTopFold_(e),this.drawBottomFold_(r),this.drawVisibleRows_(e,r),this.syncRowNodesDimensions_(),this.previousRowNodeCache_=this.currentRowNodeCache_,this.currentRowNodeCache_=null,this.isScrolledEnd=this.getTopRowIndex()+this.visibleRowCount>=this.lastRowCount_},d.ScrollPort.prototype.drawTopFold_=function(e){if(!this.selection.startRow||this.selection.startRow.rowIndex>=e)return void(this.rowNodes_.firstChild!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.rowNodes_.firstChild));if(!this.selection.isMultiline||this.selection.endRow.rowIndex>=e)this.selection.startRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.startRow.nextSibling);else for(this.selection.endRow.nextSibling!=this.topFold_&&this.rowNodes_.insertBefore(this.topFold_,this.selection.endRow.nextSibling);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.firstChild!=this.selection.startRow;)this.rowNodes_.removeChild(this.rowNodes_.firstChild)},d.ScrollPort.prototype.drawBottomFold_=function(e){if(!this.selection.endRow||this.selection.endRow.rowIndex<=e)return void(this.rowNodes_.lastChild!=this.bottomFold_&&this.rowNodes_.appendChild(this.bottomFold_));if(!this.selection.isMultiline||this.selection.startRow.rowIndex<=e)this.bottomFold_.nextSibling!=this.selection.endRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.endRow);else for(this.bottomFold_.nextSibling!=this.selection.startRow&&this.rowNodes_.insertBefore(this.bottomFold_,this.selection.startRow);this.selection.startRow.nextSibling!=this.selection.endRow;)this.rowNodes_.removeChild(this.selection.startRow.nextSibling);for(;this.rowNodes_.lastChild!=this.selection.endRow;)this.rowNodes_.removeChild(this.rowNodes_.lastChild)},d.ScrollPort.prototype.drawVisibleRows_=function(e){function r(e,r){for(;e!=r;){if(!e)throw'Did not encounter target node';if(e==t.bottomFold_)throw'Encountered bottom fold before target node';var o=e;e=e.nextSibling,o.parentNode.removeChild(o)}}for(var t=this,o=this.selection.startRow,n=this.selection.endRow,a=this.bottomFold_,i=this.topFold_.nextSibling,l=s(this.visibleRowCount,this.rowProvider_.getRowCount()),c=0,d;c<l;c++){if(d=e+c,i==a){var g=this.fetchRowNode_(d);if(!g){console.log('Couldn\'t fetch row index: '+d);break}this.rowNodes_.insertBefore(g,i);continue}if(i.rowIndex==d){i=i.nextSibling;continue}if(o&&o.rowIndex==d){r(i,o),i=o.nextSibling;continue}if(n&&n.rowIndex==d){r(i,n),i=n.nextSibling;continue}if(i==o||i==n){var g=this.fetchRowNode_(d);if(!g){console.log('Couldn\'t fetch row index: '+d);break}this.rowNodes_.insertBefore(g,i);continue}var g=this.fetchRowNode_(d);if(!g){console.log('Couldn\'t fetch row index: '+d);break}if(i==g){i=i.nextSibling;continue}if(this.rowNodes_.insertBefore(g,i),!g.nextSibling)debugger;this.rowNodes_.removeChild(i),i=g.nextSibling}i!=this.bottomFold_&&r(i,a)},d.ScrollPort.prototype.resetSelectBags_=function(){this.topSelectBag_.parentNode&&(this.topSelectBag_.textContent='',this.topSelectBag_.parentNode.removeChild(this.topSelectBag_)),this.bottomSelectBag_.parentNode&&(this.bottomSelectBag_.textContent='',this.bottomSelectBag_.parentNode.removeChild(this.bottomSelectBag_))},d.ScrollPort.prototype.cacheRowNode_=function(e){this.currentRowNodeCache_[e.rowIndex]=e},d.ScrollPort.prototype.fetchRowNode_=function(e){var r;return r=this.previousRowNodeCache_&&e in this.previousRowNodeCache_?this.previousRowNodeCache_[e]:this.rowProvider_.getRowNode(e),this.currentRowNodeCache_&&this.cacheRowNode_(r),r},d.ScrollPort.prototype.selectAll=function(){var e;if(0!=this.topFold_.nextSibling.rowIndex){for(;this.topFold_.previousSibling;)this.rowNodes_.removeChild(this.topFold_.previousSibling);e=this.fetchRowNode_(0),this.rowNodes_.insertBefore(e,this.topFold_),this.syncRowNodesDimensions_()}else e=this.topFold_.nextSibling;var r=this.rowProvider_.getRowCount()-1,t;if(this.bottomFold_.previousSibling.rowIndex!=r){for(;this.bottomFold_.nextSibling;)this.rowNodes_.removeChild(this.bottomFold_.nextSibling);t=this.fetchRowNode_(r),this.rowNodes_.appendChild(t)}else t=this.bottomFold_.previousSibling.rowIndex;var o=this.document_.getSelection();o.collapse(e,0),o.extend(t,t.childNodes.length),this.selection.sync()},d.ScrollPort.prototype.getScrollMax_=function(){return d.getClientHeight(this.scrollArea_)+this.visibleRowTopMargin+this.visibleRowBottomMargin-d.getClientHeight(this.screen_)},d.ScrollPort.prototype.scrollRowToTop=function(e){this.syncScrollHeight(),this.isScrolledEnd=e+this.visibleRowCount>=this.lastRowCount_;var r=e*this.characterSize.height+this.visibleRowTopMargin,t=this.getScrollMax_();r>t&&(r=t),this.screen_.scrollTop==r||(this.screen_.scrollTop=r,this.scheduleRedraw())},d.ScrollPort.prototype.scrollRowToBottom=function(e){this.syncScrollHeight(),this.isScrolledEnd=e+this.visibleRowCount>=this.lastRowCount_;var r=e*this.characterSize.height+this.visibleRowTopMargin+this.visibleRowBottomMargin;r-=this.visibleRowCount*this.characterSize.height,0>r&&(r=0),this.screen_.scrollTop==r||(this.screen_.scrollTop=r)},d.ScrollPort.prototype.getTopRowIndex=function(){return l.f.smartFloorDivide(this.screen_.scrollTop,this.characterSize.height)},d.ScrollPort.prototype.getBottomRowIndex=function(e){return e+this.visibleRowCount-1},d.ScrollPort.prototype.onScroll_=function(){var e=this.getScreenSize();return e.width!=this.lastScreenWidth_||e.height!=this.lastScreenHeight_?void this.resize():void(this.redraw_(),this.publish('scroll',{scrollPort:this}))},d.ScrollPort.prototype.onScrollWheel=function(){},d.ScrollPort.prototype.onScrollWheel_=function(r){if(this.onScrollWheel(r),!r.defaultPrevented){var e='DOMMouseScroll'==r.type?-1*r.detail:r.wheelDeltaY;e*=this.scrollWheelMultiplier_;var t=this.screen_.scrollTop-e;0>t&&(t=0);var o=this.getScrollMax_();t>o&&(t=o),t!=this.screen_.scrollTop&&(this.screen_.scrollTop=t,r.preventDefault())}},d.ScrollPort.prototype.onResize_=function(){this.syncCharacterSize(),this.resize()},d.ScrollPort.prototype.onCopy=function(){},d.ScrollPort.prototype.onCopy_=function(r){if((this.onCopy(r),!r.defaultPrevented)&&(this.resetSelectBags_(),this.selection.sync(),this.selection.startRow&&!(2>this.selection.endRow.rowIndex-this.selection.startRow.rowIndex))){var e=this.getTopRowIndex(),t=this.getBottomRowIndex(e);if(this.selection.startRow.rowIndex<e){var o;o=this.selection.endRow.rowIndex<e?this.selection.endRow.rowIndex:this.topFold_.nextSibling.rowIndex,this.topSelectBag_.textContent=this.rowProvider_.getRowsText(this.selection.startRow.rowIndex+1,o),this.rowNodes_.insertBefore(this.topSelectBag_,this.selection.startRow.nextSibling),this.syncRowNodesDimensions_()}if(this.selection.endRow.rowIndex>t){var n;n=this.selection.startRow.rowIndex>t?this.selection.startRow.rowIndex+1:this.bottomFold_.previousSibling.rowIndex+1,this.bottomSelectBag_.textContent=this.rowProvider_.getRowsText(n,this.selection.endRow.rowIndex),this.rowNodes_.insertBefore(this.bottomSelectBag_,this.selection.endRow)}}},d.ScrollPort.prototype.onBodyKeyDown_=function(t){if(this.ctrlVPaste){var e=r(t.which),o=e.toLowerCase();(t.ctrlKey||t.metaKey)&&'v'==o&&this.pasteTarget_.focus()}},d.ScrollPort.prototype.onPaste_=function(){this.pasteTarget_.focus();var e=this;setTimeout(function(){e.publish('paste',{text:e.pasteTarget_.value}),e.pasteTarget_.value='',e.screen_.focus()},0)},d.ScrollPort.prototype.handlePasteTargetTextInput_=function(r){r.stopPropagation()},d.ScrollPort.prototype.setScrollbarVisible=function(e){this.screen_.style.overflowY=e?'scroll':'hidden'},d.ScrollPort.prototype.setScrollWheelMoveMultipler=function(e){this.scrollWheelMultiplier_=e},'use strict',l.rtdep('lib.colors','lib.PreferenceManager','lib.resource','lib.wc','lib.f','hterm.Keyboard','hterm.Options','hterm.PreferenceManager','hterm.Screen','hterm.ScrollPort','hterm.Size','hterm.TextAttributes','hterm.VT'),d.Terminal=function(e){this.profileId_=null,this.primaryScreen_=new d.Screen,this.alternateScreen_=new d.Screen,this.screen_=this.primaryScreen_,this.screenSize=new d.Size(0,0),this.scrollPort_=new d.ScrollPort(this),this.scrollPort_.subscribe('resize',this.onResize_.bind(this)),this.scrollPort_.subscribe('scroll',this.onScroll_.bind(this)),this.scrollPort_.subscribe('paste',this.onPaste_.bind(this)),this.scrollPort_.onCopy=this.onCopy_.bind(this),this.div_=null,this.document_=window.document,this.scrollbackRows_=[],this.tabStops_=[],this.defaultTabStops=!0,this.vtScrollTop_=null,this.vtScrollBottom_=null,this.cursorNode_=null,this.cursorShape_=d.Terminal.cursorShape.BLOCK,this.cursorColor_=null,this.cursorBlinkCycle_=[100,100],this.myOnCursorBlink_=this.onCursorBlink_.bind(this),this.backgroundColor_=null,this.foregroundColor_=null,this.scrollOnOutput_=null,this.scrollOnKeystroke_=null,this.reportMouseEvents_=!1,this.bellAudio_=this.document_.createElement('audio'),this.bellAudio_.setAttribute('preload','auto'),this.bellNotificationList_=[],this.desktopNotificationBell_=!1,this.savedOptions_={},this.options_=new d.Options,this.timeouts_={},this.vt=new d.VT(this),this.keyboard=new d.Keyboard(this),this.io=new d.Terminal.IO(this),this.enableMouseDragScroll=!0,this.copyOnSelect=null,this.mousePasteButton=null,this.useDefaultWindowCopy=!1,this.clearSelectionAfterCopy=!0,this.realizeSize_(80,24),this.setDefaultTabStops(),this.setProfile(e||'default',function(){this.onTerminalReady()}.bind(this))},d.Terminal.cursorShape={BLOCK:'BLOCK',BEAM:'BEAM',UNDERLINE:'UNDERLINE'},d.Terminal.prototype.onTerminalReady=function(){},d.Terminal.prototype.tabWidth=8,d.Terminal.prototype.setProfile=function(e,r){this.profileId_=e.replace(/\//g,'');var t=this;this.prefs_&&this.prefs_.deactivate(),this.prefs_=new d.PreferenceManager(this.profileId_),this.prefs_.addObservers(null,{"alt-gr-mode":function(e){e=null==e?'en-us'==navigator.language.toLowerCase()?'none':'right-alt':'string'==typeof e?e.toLowerCase():'none',/^(none|ctrl-alt|left-alt|right-alt)$/.test(e)||(e='none'),t.keyboard.altGrMode=e},"alt-backspace-is-meta-backspace":function(e){t.keyboard.altBackspaceIsMetaBackspace=e},"alt-is-meta":function(e){t.keyboard.altIsMeta=e},"alt-sends-what":function(e){/^(escape|8-bit|browser-key)$/.test(e)||(e='escape'),t.keyboard.altSendsWhat=e},"audible-bell-sound":function(e){var r=e.match(/^lib-resource:(\S+)/);r?t.bellAudio_.setAttribute('src',l.resource.getDataUrl(r[1])):t.bellAudio_.setAttribute('src',e)},"desktop-notification-bell":function(e){e&&Notification?(t.desktopNotificationBell_='granted'===Notification.permission,!t.desktopNotificationBell_&&console.warn('desktop-notification-bell is true but we do not have permission to display notifications.')):t.desktopNotificationBell_=!1},"background-color":function(e){t.setBackgroundColor(e)},"background-image":function(e){t.scrollPort_.setBackgroundImage(e)},"background-size":function(e){t.scrollPort_.setBackgroundSize(e)},"background-position":function(e){t.scrollPort_.setBackgroundPosition(e)},"backspace-sends-backspace":function(e){t.keyboard.backspaceSendsBackspace=e},"character-map-overrides":function(e){if(!(null==e||e instanceof Object))return void console.warn('Preference character-map-modifications is not an object: '+e);for(var r in e){var t=d.VT.CharacterMap.maps[r].glmap;for(var o in e[r])t[o]=e[r][o];d.VT.CharacterMap.maps[r].reset(t)}},"cursor-blink":function(e){t.setCursorBlink(!!e)},"cursor-blink-cycle":function(e){t.cursorBlinkCycle_=e instanceof Array&&'number'==typeof e[0]&&'number'==typeof e[1]?e:'number'==typeof e?[e,e]:[100,100]},"cursor-color":function(e){t.setCursorColor(e)},"color-palette-overrides":function(e){if(!(null==e||e instanceof Object||e instanceof Array))return void console.warn('Preference color-palette-overrides is not an array or object: '+e);if(l.colors.colorPalette=l.colors.stockColorPalette.concat(),e)for(var r in e){var o=parseInt(r);if(isNaN(o)||0>o||255<o){console.log('Invalid value in palette: '+r+': '+e[r]);continue}if(e[o]){var n=l.colors.normalizeCSS(e[o]);n&&(l.colors.colorPalette[o]=n)}}t.primaryScreen_.textAttributes.resetColorPalette(),t.alternateScreen_.textAttributes.resetColorPalette()},"copy-on-select":function(e){t.copyOnSelect=!!e},"use-default-window-copy":function(e){t.useDefaultWindowCopy=!!e},"clear-selection-after-copy":function(e){t.clearSelectionAfterCopy=!!e},"ctrl-plus-minus-zero-zoom":function(e){t.keyboard.ctrlPlusMinusZeroZoom=e},"ctrl-c-copy":function(e){t.keyboard.ctrlCCopy=e},"ctrl-v-paste":function(e){t.keyboard.ctrlVPaste=e,t.scrollPort_.setCtrlVPaste(e)},"east-asian-ambiguous-as-two-column":function(e){l.wc.regardCjkAmbiguous=e},"enable-8-bit-control":function(e){t.vt.enable8BitControl=!!e},"enable-bold":function(){t.syncBoldSafeState()},"enable-bold-as-bright":function(e){t.primaryScreen_.textAttributes.enableBoldAsBright=!!e,t.alternateScreen_.textAttributes.enableBoldAsBright=!!e},"enable-clipboard-write":function(e){t.vt.enableClipboardWrite=!!e},"enable-dec12":function(e){t.vt.enableDec12=!!e},"font-family":function(){t.syncFontFamily()},"font-size":function(e){t.setFontSize(e)},"font-smoothing":function(){t.syncFontFamily()},"foreground-color":function(e){t.setForegroundColor(e)},"home-keys-scroll":function(e){t.keyboard.homeKeysScroll=e},"max-string-sequence":function(e){t.vt.maxStringSequence=e},"media-keys-are-fkeys":function(e){t.keyboard.mediaKeysAreFKeys=e},"meta-sends-escape":function(e){t.keyboard.metaSendsEscape=e},"mouse-paste-button":function(){t.syncMousePasteButton()},"page-keys-scroll":function(e){t.keyboard.pageKeysScroll=e},"pass-alt-number":function(e){if(null==e){var r=window.navigator.userAgent.match(/Mac OS X/);e=!r&&'popup'!=d.windowType}t.passAltNumber=e},"pass-ctrl-number":function(e){if(null==e){var r=window.navigator.userAgent.match(/Mac OS X/);e=!r&&'popup'!=d.windowType}t.passCtrlNumber=e},"pass-meta-number":function(e){if(null==e){var r=window.navigator.userAgent.match(/Mac OS X/);e=r&&'popup'!=d.windowType}t.passMetaNumber=e},"pass-meta-v":function(e){t.keyboard.passMetaV=e},"receive-encoding":function(e){/^(utf-8|raw)$/.test(e)||(console.warn('Invalid value for "receive-encoding": '+e),e='utf-8'),t.vt.characterEncoding=e},"scroll-on-keystroke":function(e){t.scrollOnKeystroke_=e},"scroll-on-output":function(e){t.scrollOnOutput_=e},"scrollbar-visible":function(e){t.setScrollbarVisible(e)},"scroll-wheel-move-multiplier":function(e){t.setScrollWheelMoveMultipler(e)},"send-encoding":function(e){/^(utf-8|raw)$/.test(e)||(console.warn('Invalid value for "send-encoding": '+e),e='utf-8'),t.keyboard.characterEncoding=e},"shift-insert-paste":function(e){t.keyboard.shiftInsertPaste=e},"user-css":function(e){t.scrollPort_.setUserCss(e)}}),this.prefs_.readStorage(function(){this.prefs_.notifyAll(),r&&r()}.bind(this))},d.Terminal.prototype.getPrefs=function(){return this.prefs_},d.Terminal.prototype.setBracketedPaste=function(e){this.options_.bracketedPaste=e},d.Terminal.prototype.setCursorColor=function(e){this.cursorColor_=e,this.cursorNode_.style.backgroundColor=e,this.cursorNode_.style.borderColor=e},d.Terminal.prototype.getCursorColor=function(){return this.cursorColor_},d.Terminal.prototype.setSelectionEnabled=function(e){this.enableMouseDragScroll=e},d.Terminal.prototype.setBackgroundColor=function(e){this.backgroundColor_=l.colors.normalizeCSS(e),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setBackgroundColor(e)},d.Terminal.prototype.getBackgroundColor=function(){return this.backgroundColor_},d.Terminal.prototype.setForegroundColor=function(e){this.foregroundColor_=l.colors.normalizeCSS(e),this.primaryScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.alternateScreen_.textAttributes.setDefaults(this.foregroundColor_,this.backgroundColor_),this.scrollPort_.setForegroundColor(e)},d.Terminal.prototype.getForegroundColor=function(){return this.foregroundColor_},d.Terminal.prototype.runCommandClass=function(e,r){var t=this.prefs_.get('environment');('object'!=typeof t||null==t)&&(t={});var o=this;this.command=new e({argString:r||'',io:this.io.push(),environment:t,onExit:function(){o.io.pop(),o.uninstallKeyboard(),o.prefs_.get('close-on-exit')&&window.close()}}),this.installKeyboard(),this.command.run()},d.Terminal.prototype.isPrimaryScreen=function(){return this.screen_==this.primaryScreen_},d.Terminal.prototype.installKeyboard=function(){this.keyboard.installKeyboard(this.scrollPort_.getDocument().body)},d.Terminal.prototype.uninstallKeyboard=function(){this.keyboard.installKeyboard(null)},d.Terminal.prototype.setFontSize=function(e){0===e&&(e=this.prefs_.get('font-size')),this.scrollPort_.setFontSize(e),this.wcCssRule_&&(this.wcCssRule_.style.width=2*this.scrollPort_.characterSize.width+'px')},d.Terminal.prototype.getFontSize=function(){return this.scrollPort_.getFontSize()},d.Terminal.prototype.getFontFamily=function(){return this.scrollPort_.getFontFamily()},d.Terminal.prototype.syncFontFamily=function(){this.scrollPort_.setFontFamily(this.prefs_.get('font-family'),this.prefs_.get('font-smoothing')),this.syncBoldSafeState()},d.Terminal.prototype.syncMousePasteButton=function(){var e=this.prefs_.get('mouse-paste-button');if('number'==typeof e)return void(this.mousePasteButton=e);var r=navigator.userAgent.match(/\(X11;\s+(\S+)/);this.mousePasteButton=r&&'CrOS'!=r[2]?3:2},d.Terminal.prototype.syncBoldSafeState=function(){var e=this.prefs_.get('enable-bold');if(null!==e)return this.primaryScreen_.textAttributes.enableBold=e,void(this.alternateScreen_.textAttributes.enableBold=e);var r=this.scrollPort_.measureCharacterSize(),t=this.scrollPort_.measureCharacterSize('bold'),o=r.equals(t);o||console.warn('Bold characters disabled: Size of bold weight differs from normal.  Font family is: '+this.scrollPort_.getFontFamily()),this.primaryScreen_.textAttributes.enableBold=o,this.alternateScreen_.textAttributes.enableBold=o},d.Terminal.prototype.saveCursor=function(){return this.screen_.cursorPosition.clone()},d.Terminal.prototype.getTextAttributes=function(){return this.screen_.textAttributes},d.Terminal.prototype.setTextAttributes=function(e){this.screen_.textAttributes=e},d.Terminal.prototype.getZoomFactor=function(){return this.scrollPort_.characterSize.zoomFactor},d.Terminal.prototype.setWindowTitle=function(e){window.document.title=e},d.Terminal.prototype.restoreCursor=function(e){var r=l.f.clamp(e.row,0,this.screenSize.height-1),t=l.f.clamp(e.column,0,this.screenSize.width-1);this.screen_.setCursorPosition(r,t),(e.column>t||e.column==t&&e.overflow)&&(this.screen_.cursorPosition.overflow=!0)},d.Terminal.prototype.clearCursorOverflow=function(){this.screen_.cursorPosition.overflow=!1},d.Terminal.prototype.setCursorShape=function(e){this.cursorShape_=e,this.restyleCursor_()},d.Terminal.prototype.getCursorShape=function(){return this.cursorShape_},d.Terminal.prototype.setWidth=function(e){return null==e?void(this.div_.style.width='100%'):void(this.div_.style.width=o(this.scrollPort_.characterSize.width*e+this.scrollPort_.currentScrollbarWidthPx)+'px',this.realizeSize_(e,this.screenSize.height),this.scheduleSyncCursorPosition_())},d.Terminal.prototype.setHeight=function(e){return null==e?void(this.div_.style.height='100%'):void(this.div_.style.height=this.scrollPort_.characterSize.height*e+'px',this.realizeSize_(this.screenSize.width,e),this.scheduleSyncCursorPosition_())},d.Terminal.prototype.realizeSize_=function(e,r){e!=this.screenSize.width&&this.realizeWidth_(e),r!=this.screenSize.height&&this.realizeHeight_(r),this.io.onTerminalResize_(e,r)},d.Terminal.prototype.realizeWidth_=function(e){if(0>=e)throw new Error('Attempt to realize bad width: '+e);var r=e-this.screen_.getWidth();if(this.screenSize.width=e,this.screen_.setColumnCount(e),0<r)this.defaultTabStops&&this.setDefaultTabStops(this.screenSize.width-r);else for(var t=this.tabStops_.length-1;0<=t&&!(this.tabStops_[t]<e);t--)this.tabStops_.pop();this.screen_.setColumnCount(this.screenSize.width)},d.Terminal.prototype.realizeHeight_=function(r){if(0>=r)throw new Error('Attempt to realize bad height: '+r);var t=r-this.screen_.getHeight();this.screenSize.height=r;var o=this.saveCursor();if(0>t){for(t*=-1;t;){var n=this.getRowCount()-1;if(n-this.scrollbackRows_.length==o.row)break;if(this.getRowText(n))break;this.screen_.popRow(),t--}var a=this.screen_.shiftRows(t);this.scrollbackRows_.push.apply(this.scrollbackRows_,a),o.row=e(o.row-t,0)}else if(0<t){if(t<=this.scrollbackRows_.length){var i=s(t,this.scrollbackRows_.length),l=this.scrollbackRows_.splice(this.scrollbackRows_.length-i,i);this.screen_.unshiftRows(l),t-=i,o.row+=i}t&&this.appendRows_(t)}this.setVTScrollRegion(null,null),this.restoreCursor(o)},d.Terminal.prototype.scrollHome=function(){this.scrollPort_.scrollRowToTop(0)},d.Terminal.prototype.scrollEnd=function(){this.scrollPort_.scrollRowToBottom(this.getRowCount())},d.Terminal.prototype.scrollPageUp=function(){var e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e-this.screenSize.height+1)},d.Terminal.prototype.scrollPageDown=function(){var e=this.scrollPort_.getTopRowIndex();this.scrollPort_.scrollRowToTop(e+this.screenSize.height-1)},d.Terminal.prototype.wipeContents=function(){this.scrollbackRows_.length=0,this.scrollPort_.resetCache(),[this.primaryScreen_,this.alternateScreen_].forEach(function(e){var r=e.getHeight();0<r&&(this.renumberRows_(0,r),this.clearHome(e))}.bind(this)),this.syncCursorPosition_(),this.scrollPort_.invalidate()},d.Terminal.prototype.reset=function(){this.clearAllTabStops(),this.setDefaultTabStops(),this.clearHome(this.primaryScreen_),this.primaryScreen_.textAttributes.reset(),this.clearHome(this.alternateScreen_),this.alternateScreen_.textAttributes.reset(),this.setCursorBlink(!!this.prefs_.get('cursor-blink')),this.vt.reset(),this.softReset()},d.Terminal.prototype.softReset=function(){this.options_=new d.Options,this.options_.cursorBlink=!!this.timeouts_.cursorBlink,this.primaryScreen_.textAttributes.resetColorPalette(),this.alternateScreen_.textAttributes.resetColorPalette(),this.setVTScrollRegion(null,null),this.setCursorVisible(!0)},d.Terminal.prototype.forwardTabStop=function(){for(var e=this.screen_.cursorPosition.column,r=0;r<this.tabStops_.length;r++)if(this.tabStops_[r]>e)return void this.setCursorColumn(this.tabStops_[r]);var t=this.screen_.cursorPosition.overflow;this.setCursorColumn(this.screenSize.width-1),this.screen_.cursorPosition.overflow=t},d.Terminal.prototype.backwardTabStop=function(){for(var e=this.screen_.cursorPosition.column,r=this.tabStops_.length-1;0<=r;r--)if(this.tabStops_[r]<e)return void this.setCursorColumn(this.tabStops_[r]);this.setCursorColumn(1)},d.Terminal.prototype.setTabStop=function(e){for(var r=this.tabStops_.length-1;0<=r;r--){if(this.tabStops_[r]==e)return;if(this.tabStops_[r]<e)return void this.tabStops_.splice(r+1,0,e)}this.tabStops_.splice(0,0,e)},d.Terminal.prototype.clearTabStopAtCursor=function(){var e=this.screen_.cursorPosition.column,r=this.tabStops_.indexOf(e);-1==r||this.tabStops_.splice(r,1)},d.Terminal.prototype.clearAllTabStops=function(){this.tabStops_.length=0,this.defaultTabStops=!1},d.Terminal.prototype.setDefaultTabStops=function(e){var r=e||0,t=this.tabWidth;r=r-1-(r-1)%t+t;for(var o=r;o<this.screenSize.width;o+=t)this.setTabStop(o);this.defaultTabStops=!0},d.Terminal.prototype.interpret=function(e){this.vt.interpret(e),this.scheduleSyncCursorPosition_()},d.Terminal.prototype.decorate=function(e){this.div_=e,this.scrollPort_.decorate(e),this.scrollPort_.setBackgroundImage(this.prefs_.get('background-image')),this.scrollPort_.setBackgroundSize(this.prefs_.get('background-size')),this.scrollPort_.setBackgroundPosition(this.prefs_.get('background-position')),this.scrollPort_.setUserCss(this.prefs_.get('user-css')),this.div_.focus=this.focus.bind(this),this.setFontSize(this.prefs_.get('font-size')),this.syncFontFamily(),this.setScrollbarVisible(this.prefs_.get('scrollbar-visible')),this.setScrollWheelMoveMultipler(this.prefs_.get('scroll-wheel-move-multiplier')),this.document_=this.scrollPort_.getDocument(),this.document_.body.oncontextmenu=function(){return!1};var r=this.onMouse_.bind(this),t=this.scrollPort_.getScreenNode();t.addEventListener('mousedown',r),t.addEventListener('mouseup',r),t.addEventListener('mousemove',r),this.scrollPort_.onScrollWheel=r,t.addEventListener('focus',this.onFocusChange_.bind(this,!0)),t.addEventListener('mousedown',function(){setTimeout(this.onFocusChange_.bind(this,!0))}.bind(this)),t.addEventListener('blur',this.onFocusChange_.bind(this,!1));var o=this.document_.createElement('style');o.textContent='.cursor-node[focus="false"] {  box-sizing: border-box;  background-color: transparent !important;  border-width: 2px;  border-style: solid;}.wc-node {  display: inline-block;  text-align: center;  width: '+2*this.scrollPort_.characterSize.width+'px;}',this.document_.head.appendChild(o);var n=this.document_.styleSheets,s=n[n.length-1].cssRules;this.wcCssRule_=s[s.length-1],this.cursorNode_=this.document_.createElement('div'),this.cursorNode_.className='cursor-node',this.cursorNode_.style.cssText='position: absolute;top: -99px;display: block;width: '+this.scrollPort_.characterSize.width+'px;height: '+this.scrollPort_.characterSize.height+'px;-webkit-transition: opacity, background-color 100ms linear;-moz-transition: opacity, background-color 100ms linear;',this.setCursorColor(this.prefs_.get('cursor-color')),this.setCursorBlink(!!this.prefs_.get('cursor-blink')),this.restyleCursor_(),this.document_.body.appendChild(this.cursorNode_),this.scrollBlockerNode_=this.document_.createElement('div'),this.scrollBlockerNode_.style.cssText='position: absolute;top: -99px;display: block;width: 10px;height: 10px;',this.document_.body.appendChild(this.scrollBlockerNode_);var r=this.onMouse_.bind(this);this.scrollPort_.onScrollWheel=r,['mousedown','mouseup','mousemove','click','dblclick'].forEach(function(e){this.scrollBlockerNode_.addEventListener(e,r),this.cursorNode_.addEventListener(e,r),this.document_.addEventListener(e,r)}.bind(this)),this.cursorNode_.addEventListener('mousedown',function(){setTimeout(this.focus.bind(this))}.bind(this)),this.setReverseVideo(!1),this.scrollPort_.focus(),this.scrollPort_.scheduleRedraw()},d.Terminal.prototype.getDocument=function(){return this.document_},d.Terminal.prototype.focus=function(){this.scrollPort_.focus()},d.Terminal.prototype.getRowNode=function(e){if(e<this.scrollbackRows_.length)return this.scrollbackRows_[e];var r=e-this.scrollbackRows_.length;return this.screen_.rowsArray[r]},d.Terminal.prototype.getRowsText=function(e,r){for(var t=[],o=e,n;o<r;o++)n=this.getRowNode(o),t.push(n.textContent),o<r-1&&!n.getAttribute('line-overflow')&&t.push('\n');return t.join('')},d.Terminal.prototype.getRowText=function(e){var r=this.getRowNode(e);return r.textContent},d.Terminal.prototype.getRowCount=function(){return this.scrollbackRows_.length+this.screen_.rowsArray.length},d.Terminal.prototype.appendRows_=function(e){for(var r=this.screen_.rowsArray.length,t=this.scrollbackRows_.length+r,o=0,n;o<e;o++)n=this.document_.createElement('x-row'),n.appendChild(this.document_.createTextNode('')),n.rowIndex=t+o,this.screen_.pushRow(n);var s=this.screen_.rowsArray.length-this.screenSize.height;if(0<s){var a=this.screen_.shiftRows(s);Array.prototype.push.apply(this.scrollbackRows_,a),this.scrollPort_.isScrolledEnd&&this.scheduleScrollDown_()}r>=this.screen_.rowsArray.length&&(r=this.screen_.rowsArray.length-1),this.setAbsoluteCursorPosition(r,0)},d.Terminal.prototype.moveRows_=function(e,r,t){var o=this.screen_.removeRows(e,r);this.screen_.insertRows(t,o);var n,s;e<t?(n=e,s=t+r):(n=t,s=e+r),this.renumberRows_(n,s),this.scrollPort_.scheduleInvalidate()},d.Terminal.prototype.renumberRows_=function(e,r,t){for(var o=t||this.screen_,n=this.scrollbackRows_.length,s=e;s<r;s++)o.rowsArray[s].rowIndex=n+s},d.Terminal.prototype.print=function(e){for(var r=0,t=l.wc.strWidth(e);r<t;){this.options_.wraparound&&this.screen_.cursorPosition.overflow&&(this.screen_.commitLineOverflow(),this.newLine());var o=t-r,n=!1,s;this.screen_.cursorPosition.column+o>=this.screenSize.width&&(n=!0,o=this.screenSize.width-this.screen_.cursorPosition.column),n&&!this.options_.wraparound?(s=l.wc.substr(e,r,o-1)+l.wc.substr(e,t-1),o=t):s=l.wc.substr(e,r,o);for(var a=d.TextAttributes.splitWidecharString(s),c=0;c<a.length;c++)a[c].wcNode&&(this.screen_.textAttributes.wcNode=!0),this.options_.insertMode?this.screen_.insertString(a[c].str):this.screen_.overwriteString(a[c].str),this.screen_.textAttributes.wcNode=!1;this.screen_.maybeClipCurrentRow(),r+=o}this.scheduleSyncCursorPosition_(),this.scrollOnOutput_&&this.scrollPort_.scrollRowToBottom(this.getRowCount())},d.Terminal.prototype.setVTScrollRegion=function(e,r){0==e&&r==this.screenSize.height-1?(this.vtScrollTop_=null,this.vtScrollBottom_=null):(this.vtScrollTop_=e,this.vtScrollBottom_=r)},d.Terminal.prototype.getVTScrollTop=function(){return null==this.vtScrollTop_?0:this.vtScrollTop_},d.Terminal.prototype.getVTScrollBottom=function(){return null==this.vtScrollBottom_?this.screenSize.height-1:this.vtScrollBottom_},d.Terminal.prototype.newLine=function(){var e=this.screen_.cursorPosition.row==this.screen_.rowsArray.length-1;null==this.vtScrollBottom_?e?this.appendRows_(1):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0):this.screen_.cursorPosition.row==this.vtScrollBottom_?(this.vtScrollUp(1),this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0)):e?this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,0):this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row+1,0)},d.Terminal.prototype.lineFeed=function(){var e=this.screen_.cursorPosition.column;this.newLine(),this.setCursorColumn(e)},d.Terminal.prototype.formFeed=function(){this.options_.autoCarriageReturn?this.newLine():this.lineFeed()},d.Terminal.prototype.reverseLineFeed=function(){var e=this.getVTScrollTop(),r=this.screen_.cursorPosition.row;r==e?this.insertLines(1):this.setAbsoluteCursorRow(r-1)},d.Terminal.prototype.eraseToLeft=function(){var e=this.saveCursor();this.setCursorColumn(0),this.screen_.overwriteString(l.f.getWhitespace(e.column+1)),this.restoreCursor(e)},d.Terminal.prototype.eraseToRight=function(e){if(!this.screen_.cursorPosition.overflow){var r=this.screenSize.width-this.screen_.cursorPosition.column,t=e?s(e,r):r;if(this.screen_.textAttributes.background===this.screen_.textAttributes.DEFAULT_COLOR){var o=this.screen_.rowsArray[this.screen_.cursorPosition.row];if(d.TextAttributes.nodeWidth(o)<=this.screen_.cursorPosition.column+t)return this.screen_.deleteChars(t),void this.clearCursorOverflow()}var n=this.saveCursor();this.screen_.overwriteString(l.f.getWhitespace(t)),this.restoreCursor(n),this.clearCursorOverflow()}},d.Terminal.prototype.eraseLine=function(){var e=this.saveCursor();this.screen_.clearCursorRow(),this.restoreCursor(e),this.clearCursorOverflow()},d.Terminal.prototype.eraseAbove=function(){var e=this.saveCursor();this.eraseToLeft();for(var r=0;r<e.row;r++)this.setAbsoluteCursorPosition(r,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},d.Terminal.prototype.eraseBelow=function(){var e=this.saveCursor();this.eraseToRight();for(var r=this.screenSize.height-1,t=e.row+1;t<=r;t++)this.setAbsoluteCursorPosition(t,0),this.screen_.clearCursorRow();this.restoreCursor(e),this.clearCursorOverflow()},d.Terminal.prototype.fill=function(e){var r=this.saveCursor();this.setAbsoluteCursorPosition(0,0);for(var t=0;t<this.screenSize.height;t++)for(var o=0;o<this.screenSize.width;o++)this.setAbsoluteCursorPosition(t,o),this.screen_.overwriteString(e);this.restoreCursor(r)},d.Terminal.prototype.clearHome=function(e){var r=e||this.screen_,t=r.getHeight();if(0!=t){for(var o=0;o<t;o++)r.setCursorPosition(o,0),r.clearCursorRow();r.setCursorPosition(0,0)}},d.Terminal.prototype.clear=function(e){var r=e||this.screen_,t=r.cursorPosition.clone();this.clearHome(r),r.setCursorPosition(t.row,t.column)},d.Terminal.prototype.insertLines=function(e){var r=this.screen_.cursorPosition.row,t=this.getVTScrollBottom();e=s(e,t-r);var o=t-r-e+1;o&&this.moveRows_(r,o,r+e);for(var n=e-1;0<=n;n--)this.setAbsoluteCursorPosition(r+n,0),this.screen_.clearCursorRow()},d.Terminal.prototype.deleteLines=function(e){var r=this.saveCursor(),t=r.row,o=this.getVTScrollBottom(),n=o-t+1;e=s(e,n);var a=o-e+1;e!=n&&this.moveRows_(t,e,a);for(var l=0;l<e;l++)this.setAbsoluteCursorPosition(a+l,0),this.screen_.clearCursorRow();this.restoreCursor(r),this.clearCursorOverflow()},d.Terminal.prototype.insertSpace=function(e){var r=this.saveCursor(),t=l.f.getWhitespace(e||1);this.screen_.insertString(t),this.screen_.maybeClipCurrentRow(),this.restoreCursor(r),this.clearCursorOverflow()},d.Terminal.prototype.deleteChars=function(e){var r=this.screen_.deleteChars(e);if(r&&!this.screen_.textAttributes.isDefault()){var t=this.saveCursor();this.setCursorColumn(this.screenSize.width-r),this.screen_.insertString(l.f.getWhitespace(r)),this.restoreCursor(t)}this.clearCursorOverflow()},d.Terminal.prototype.vtScrollUp=function(e){var r=this.saveCursor();this.setAbsoluteCursorRow(this.getVTScrollTop()),this.deleteLines(e),this.restoreCursor(r)},d.Terminal.prototype.vtScrollDown=function(e){var r=this.saveCursor();this.setAbsoluteCursorPosition(this.getVTScrollTop(),0),this.insertLines(e),this.restoreCursor(r)},d.Terminal.prototype.setCursorPosition=function(e,r){this.options_.originMode?this.setRelativeCursorPosition(e,r):this.setAbsoluteCursorPosition(e,r)},d.Terminal.prototype.setRelativeCursorPosition=function(e,r){var t=this.getVTScrollTop();e=l.f.clamp(e+t,t,this.getVTScrollBottom()),r=l.f.clamp(r,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,r)},d.Terminal.prototype.setAbsoluteCursorPosition=function(e,r){e=l.f.clamp(e,0,this.screenSize.height-1),r=l.f.clamp(r,0,this.screenSize.width-1),this.screen_.setCursorPosition(e,r)},d.Terminal.prototype.setCursorColumn=function(e){this.setAbsoluteCursorPosition(this.screen_.cursorPosition.row,e)},d.Terminal.prototype.getCursorColumn=function(){return this.screen_.cursorPosition.column},d.Terminal.prototype.setAbsoluteCursorRow=function(e){this.setAbsoluteCursorPosition(e,this.screen_.cursorPosition.column)},d.Terminal.prototype.getCursorRow=function(){return this.screen_.cursorPosition.row},d.Terminal.prototype.scheduleRedraw_=function(){if(!this.timeouts_.redraw){var e=this;this.timeouts_.redraw=setTimeout(function(){delete e.timeouts_.redraw,e.scrollPort_.redraw_()},0)}},d.Terminal.prototype.scheduleScrollDown_=function(){if(!this.timeouts_.scrollDown){var e=this;this.timeouts_.scrollDown=setTimeout(function(){delete e.timeouts_.scrollDown,e.scrollPort_.scrollRowToBottom(e.getRowCount())},10)}},d.Terminal.prototype.cursorUp=function(e){return this.cursorDown(-(e||1))},d.Terminal.prototype.cursorDown=function(e){e=e||1;var r=this.options_.originMode?this.getVTScrollTop():0,t=this.options_.originMode?this.getVTScrollBottom():this.screenSize.height-1,o=l.f.clamp(this.screen_.cursorPosition.row+e,r,t);this.setAbsoluteCursorRow(o)},d.Terminal.prototype.cursorLeft=function(r){if(r=r||1,!(1>r)){var o=this.screen_.cursorPosition.column;if(this.options_.reverseWraparound){if(this.screen_.cursorPosition.overflow&&(r--,this.clearCursorOverflow(),!r))return;var n=this.screen_.cursorPosition.row,s=o-r;0>s&&(n=n-t(r/this.screenSize.width)-1,0>n&&(n=this.screenSize.height+n%this.screenSize.height),s=this.screenSize.width+s%this.screenSize.width),this.setCursorPosition(e(n,0),s)}else{var s=e(o-r,0);this.setCursorColumn(s)}}},d.Terminal.prototype.cursorRight=function(e){if(e=e||1,!(1>e)){var r=l.f.clamp(this.screen_.cursorPosition.column+e,0,this.screenSize.width-1);this.setCursorColumn(r)}},d.Terminal.prototype.setReverseVideo=function(e){this.options_.reverseVideo=e,e?(this.scrollPort_.setForegroundColor(this.prefs_.get('background-color')),this.scrollPort_.setBackgroundColor(this.prefs_.get('foreground-color'))):(this.scrollPort_.setForegroundColor(this.prefs_.get('foreground-color')),this.scrollPort_.setBackgroundColor(this.prefs_.get('background-color')))},d.Terminal.prototype.ringBell=function(){this.cursorNode_.style.backgroundColor=this.scrollPort_.getForegroundColor();var e=this;if((setTimeout(function(){e.cursorNode_.style.backgroundColor=e.prefs_.get('cursor-color')},200),!this.bellSquelchTimeout_)&&(this.bellAudio_.getAttribute('src')?(this.bellAudio_.play(),this.bellSequelchTimeout_=setTimeout(function(){delete this.bellSquelchTimeout_}.bind(this),500)):delete this.bellSquelchTimeout_,this.desktopNotificationBell_&&!this.document_.hasFocus())){var r=new Notification(l.f.replaceVars(d.desktopNotificationTitle,{title:window.document.title||'hterm'}));this.bellNotificationList_.push(r),r.onclick=function(){e.closeBellNotifications_()}}},d.Terminal.prototype.setOriginMode=function(e){this.options_.originMode=e,this.setCursorPosition(0,0)},d.Terminal.prototype.setInsertMode=function(e){this.options_.insertMode=e},d.Terminal.prototype.setAutoCarriageReturn=function(e){this.options_.autoCarriageReturn=e},d.Terminal.prototype.setWraparound=function(e){this.options_.wraparound=e},d.Terminal.prototype.setReverseWraparound=function(e){this.options_.reverseWraparound=e},d.Terminal.prototype.setAlternateMode=function(e){var r=this.saveCursor();if(this.screen_=e?this.alternateScreen_:this.primaryScreen_,this.screen_.rowsArray.length&&this.screen_.rowsArray[0].rowIndex!=this.scrollbackRows_.length)for(var t=this.scrollbackRows_.length,o=this.screen_.rowsArray,n=0;n<o.length;n++)o[n].rowIndex=t+n;this.realizeWidth_(this.screenSize.width),this.realizeHeight_(this.screenSize.height),this.scrollPort_.syncScrollHeight(),this.scrollPort_.invalidate(),this.restoreCursor(r),this.scrollPort_.resize()},d.Terminal.prototype.setCursorBlink=function(e){this.options_.cursorBlink=e,!e&&this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),this.options_.cursorVisible&&this.setCursorVisible(!0)},d.Terminal.prototype.setCursorVisible=function(e){if(this.options_.cursorVisible=e,!e)return this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink),void(this.cursorNode_.style.opacity='0');if(this.syncCursorPosition_(),this.cursorNode_.style.opacity='1',this.options_.cursorBlink){if(this.timeouts_.cursorBlink)return;this.onCursorBlink_()}else this.timeouts_.cursorBlink&&(clearTimeout(this.timeouts_.cursorBlink),delete this.timeouts_.cursorBlink)},d.Terminal.prototype.syncCursorPosition_=function(){var e=this.scrollPort_.getTopRowIndex(),r=this.scrollPort_.getBottomRowIndex(e),t=this.scrollbackRows_.length+this.screen_.cursorPosition.row;if(t>r)return void(this.cursorNode_.style.top=-this.scrollPort_.characterSize.height+'px');this.options_.cursorVisible&&'none'==this.cursorNode_.style.display&&(this.cursorNode_.style.display=''),this.cursorNode_.style.top=this.scrollPort_.visibleRowTopMargin+this.scrollPort_.characterSize.height*(t-e)+'px',this.cursorNode_.style.left=this.scrollPort_.characterSize.width*this.screen_.cursorPosition.column+'px',this.cursorNode_.setAttribute('title','('+this.screen_.cursorPosition.row+', '+this.screen_.cursorPosition.column+')');var o=this.document_.getSelection();o&&o.isCollapsed&&this.screen_.syncSelectionCaret(o)},d.Terminal.prototype.restyleCursor_=function(){var e=this.cursorShape_;'false'==this.cursorNode_.getAttribute('focus')&&(e=d.Terminal.cursorShape.BLOCK);var r=this.cursorNode_.style;switch(r.width=this.scrollPort_.characterSize.width+'px',e){case d.Terminal.cursorShape.BEAM:r.height=this.scrollPort_.characterSize.height+'px',r.backgroundColor='transparent',r.borderBottomStyle=null,r.borderLeftStyle='solid';break;case d.Terminal.cursorShape.UNDERLINE:r.height=this.scrollPort_.characterSize.baseline+'px',r.backgroundColor='transparent',r.borderBottomStyle='solid',r.borderLeftStyle=null;break;default:r.height=this.scrollPort_.characterSize.height+'px',r.backgroundColor=this.cursorColor_,r.borderBottomStyle=null,r.borderLeftStyle=null;}},d.Terminal.prototype.scheduleSyncCursorPosition_=function(){if(!this.timeouts_.syncCursor){var e=this;this.timeouts_.syncCursor=setTimeout(function(){e.syncCursorPosition_(),delete e.timeouts_.syncCursor},0)}},d.Terminal.prototype.showZoomWarning_=function(e){if(!this.zoomWarningNode_){if(!e)return;this.zoomWarningNode_=this.document_.createElement('div'),this.zoomWarningNode_.style.cssText='color: black;background-color: #ff2222;font-size: large;border-radius: 8px;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;top: 0.5em;right: 1.2em;position: absolute;-webkit-text-size-adjust: none;-webkit-user-select: none;-moz-text-size-adjust: none;-moz-user-select: none;'}this.zoomWarningNode_.textContent=l.MessageManager.replaceReferences(d.zoomWarningMessage,[parseInt(100*this.scrollPort_.characterSize.zoomFactor)]),this.zoomWarningNode_.style.fontFamily=this.prefs_.get('font-family'),e?!this.zoomWarningNode_.parentNode&&this.div_.parentNode.appendChild(this.zoomWarningNode_):this.zoomWarningNode_.parentNode&&this.zoomWarningNode_.parentNode.removeChild(this.zoomWarningNode_)},d.Terminal.prototype.showOverlay=function(e,r){if(!this.overlayNode_){if(!this.div_)return;this.overlayNode_=this.document_.createElement('div'),this.overlayNode_.style.cssText='border-radius: 15px;font-size: xx-large;opacity: 0.75;padding: 0.2em 0.5em 0.2em 0.5em;position: absolute;-webkit-user-select: none;-webkit-transition: opacity 180ms ease-in;-moz-user-select: none;-moz-transition: opacity 180ms ease-in;',this.overlayNode_.addEventListener('mousedown',function(r){r.preventDefault(),r.stopPropagation()},!0)}this.overlayNode_.style.color=this.prefs_.get('background-color'),this.overlayNode_.style.backgroundColor=this.prefs_.get('foreground-color'),this.overlayNode_.style.fontFamily=this.prefs_.get('font-family'),this.overlayNode_.textContent=e,this.overlayNode_.style.opacity='0.75',this.overlayNode_.parentNode||this.div_.appendChild(this.overlayNode_);var t=d.getClientSize(this.div_),o=d.getClientSize(this.overlayNode_);this.overlayNode_.style.top=(t.height-o.height)/2+'px',this.overlayNode_.style.left=(t.width-o.width-this.scrollPort_.currentScrollbarWidthPx)/2+'px';var n=this;this.overlayTimeout_&&clearTimeout(this.overlayTimeout_),null===r||(this.overlayTimeout_=setTimeout(function(){n.overlayNode_.style.opacity='0',n.overlayTimeout_=setTimeout(function(){n.overlayNode_.parentNode&&n.overlayNode_.parentNode.removeChild(n.overlayNode_),n.overlayTimeout_=null,n.overlayNode_.style.opacity='0.75'},200)},r||1500))},d.Terminal.prototype.paste=function(){d.pasteFromClipboard(this.document_)},d.Terminal.prototype.copyStringToClipboard=function(e){this.prefs_.get('enable-clipboard-notice')&&setTimeout(this.showOverlay.bind(this,d.notifyCopyMessage,500),200);var r=this.document_.createElement('pre');r.textContent=e,r.style.cssText='-webkit-user-select: text;-moz-user-select: text;position: absolute;top: -99px',this.document_.body.appendChild(r);var t=this.document_.getSelection(),o=t.anchorNode,n=t.anchorOffset,s=t.focusNode,a=t.focusOffset;t.selectAllChildren(r),d.copySelectionToClipboard(this.document_),t.extend&&(t.collapse(o,n),t.extend(s,a)),r.parentNode.removeChild(r)},d.Terminal.prototype.getSelectionText=function(){var e=this.scrollPort_.selection;if(e.sync(),e.isCollapsed)return null;var r=e.startOffset,t=e.startNode;if('X-ROW'!=t.nodeName)for('#text'==t.nodeName&&'SPAN'==t.parentNode.nodeName&&(t=t.parentNode);t.previousSibling;)t=t.previousSibling,r+=d.TextAttributes.nodeWidth(t);var o=d.TextAttributes.nodeWidth(e.endNode)-e.endOffset,t=e.endNode;if('X-ROW'!=t.nodeName)for('#text'==t.nodeName&&'SPAN'==t.parentNode.nodeName&&(t=t.parentNode);t.nextSibling;)t=t.nextSibling,o+=d.TextAttributes.nodeWidth(t);var n=this.getRowsText(e.startRow.rowIndex,e.endRow.rowIndex+1);return l.wc.substring(n,r,l.wc.strWidth(n)-o)},d.Terminal.prototype.copySelectionToClipboard=function(){var e=this.getSelectionText();null!=e&&this.copyStringToClipboard(e)},d.Terminal.prototype.overlaySize=function(){this.showOverlay(this.screenSize.width+'x'+this.screenSize.height)},d.Terminal.prototype.onVTKeystroke=function(e){this.scrollOnKeystroke_&&this.scrollPort_.scrollRowToBottom(this.getRowCount()),this.io.onVTKeystroke(this.keyboard.encode(e))},d.Terminal.prototype.onMouse_=function(r){r.processedByTerminalHandler_||(r.processedByTerminalHandler_=!0,r.terminalRow=parseInt((r.clientY-this.scrollPort_.visibleRowTopMargin)/this.scrollPort_.characterSize.height)+1,r.terminalColumn=parseInt(r.clientX/this.scrollPort_.characterSize.width)+1,'mousedown'==r.type&&r.terminalColumn>this.screenSize.width||(this.options_.cursorVisible&&this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED&&(r.terminalRow-1==this.screen_.cursorPosition.row&&r.terminalColumn-1==this.screen_.cursorPosition.column?this.cursorNode_.style.display='none':'none'==this.cursorNode_.style.display&&(this.cursorNode_.style.display='')),'mousedown'==r.type&&(r.altKey||this.vt.mouseReport==this.vt.MOUSE_REPORT_DISABLED?(this.reportMouseEvents_=!1,this.setSelectionEnabled(!0)):(this.reportMouseEvents_=!0,this.document_.getSelection().collapseToEnd(),this.setSelectionEnabled(!1),r.preventDefault())),this.reportMouseEvents_?(!this.scrollBlockerNode_.engaged&&('mousedown'==r.type?(this.scrollBlockerNode_.engaged=!0,this.scrollBlockerNode_.style.top=r.clientY-5+'px',this.scrollBlockerNode_.style.left=r.clientX-5+'px'):'mousemove'==r.type&&(this.document_.getSelection().collapseToEnd(),r.preventDefault())),this.onMouse(r)):('dblclick'==r.type&&(this.screen_.expandSelection(this.document_.getSelection()),d.copySelectionToClipboard(this.document_)),'mousedown'==r.type&&r.which==this.mousePasteButton&&this.paste(),'mouseup'==r.type&&1==r.which&&this.copyOnSelect&&!this.document_.getSelection().isCollapsed&&d.copySelectionToClipboard(this.document_),('mousemove'==r.type||'mouseup'==r.type)&&this.scrollBlockerNode_.engaged&&(this.scrollBlockerNode_.engaged=!1,this.scrollBlockerNode_.style.top='-99px')),'mouseup'==r.type&&this.document_.getSelection().isCollapsed&&(this.reportMouseEvents_=this.vt.mouseReport!=this.vt.MOUSE_REPORT_DISABLED)))},d.Terminal.prototype.onMouse=function(){},d.Terminal.prototype.onFocusChange_=function(e){this.cursorNode_.setAttribute('focus',e),this.restyleCursor_(),!0===e&&this.closeBellNotifications_()},d.Terminal.prototype.onScroll_=function(){this.scheduleSyncCursorPosition_()},d.Terminal.prototype.onPaste_=function(r){var e=r.text.replace(/\n/mg,'\r');e=this.keyboard.encode(e),this.options_.bracketedPaste&&(e='\x1B[200~'+e+'\x1B[201~'),this.io.sendString(e)},d.Terminal.prototype.onCopy_=function(r){this.useDefaultWindowCopy||(r.preventDefault(),setTimeout(this.copySelectionToClipboard.bind(this),0))},d.Terminal.prototype.onResize_=function(){var e=t(this.scrollPort_.getScreenWidth()/this.scrollPort_.characterSize.width),r=l.f.smartFloorDivide(this.scrollPort_.getScreenHeight(),this.scrollPort_.characterSize.height);if(!(0>=e||0>=r)){var o=e!=this.screenSize.width||r!=this.screenSize.height;this.realizeSize_(e,r),this.showZoomWarning_(1!=this.scrollPort_.characterSize.zoomFactor),o&&this.overlaySize(),this.restyleCursor_(),this.scheduleSyncCursorPosition_()}},d.Terminal.prototype.onCursorBlink_=function(){return this.options_.cursorBlink?void('false'==this.cursorNode_.getAttribute('focus')||'0'==this.cursorNode_.style.opacity?(this.cursorNode_.style.opacity='1',this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[0])):(this.cursorNode_.style.opacity='0',this.timeouts_.cursorBlink=setTimeout(this.myOnCursorBlink_,this.cursorBlinkCycle_[1]))):void delete this.timeouts_.cursorBlink},d.Terminal.prototype.setScrollbarVisible=function(e){this.scrollPort_.setScrollbarVisible(e)},d.Terminal.prototype.setScrollWheelMoveMultipler=function(e){this.scrollPort_.setScrollWheelMoveMultipler(e)},d.Terminal.prototype.closeBellNotifications_=function(){this.bellNotificationList_.forEach(function(e){e.close()}),this.bellNotificationList_.length=0},'use strict',l.rtdep('lib.encodeUTF8'),d.Terminal.IO=function(e){this.terminal_=e,this.previousIO_=null},d.Terminal.IO.prototype.showOverlay=function(e,r){this.terminal_.showOverlay(e,r)},d.Terminal.IO.prototype.createFrame=function(e,r){return new d.Frame(this.terminal_,e,r)},d.Terminal.IO.prototype.setTerminalProfile=function(e){this.terminal_.setProfile(e)},d.Terminal.IO.prototype.push=function(){var e=new d.Terminal.IO(this.terminal_);return e.keyboardCaptured_=this.keyboardCaptured_,e.columnCount=this.columnCount,e.rowCount=this.rowCount,e.previousIO_=this.terminal_.io,this.terminal_.io=e,e},d.Terminal.IO.prototype.pop=function(){this.terminal_.io=this.previousIO_},d.Terminal.IO.prototype.sendString=function(e){console.log('Unhandled sendString: '+e)},d.Terminal.IO.prototype.onVTKeystroke=function(e){console.log('Unobserverd VT keystroke: '+JSON.stringify(e))},d.Terminal.IO.prototype.onTerminalResize_=function(e,r){for(var t=this;t;)t.columnCount=e,t.rowCount=r,t=t.previousIO_;this.onTerminalResize(e,r)},d.Terminal.IO.prototype.onTerminalResize=function(){},d.Terminal.IO.prototype.writeUTF8=function(e){if(this.terminal_.io!=this)throw'Attempt to print from inactive IO object.';this.terminal_.interpret(e)},d.Terminal.IO.prototype.writelnUTF8=function(e){if(this.terminal_.io!=this)throw'Attempt to print from inactive IO object.';this.terminal_.interpret(e+'\r\n')},d.Terminal.IO.prototype.print=d.Terminal.IO.prototype.writeUTF16=function(e){this.writeUTF8(l.encodeUTF8(e))},d.Terminal.IO.prototype.println=d.Terminal.IO.prototype.writelnUTF16=function(e){this.writelnUTF8(l.encodeUTF8(e))},'use strict',l.rtdep('lib.colors'),d.TextAttributes=function(e){this.document_=e,this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.defaultForeground='rgb(255, 255, 255)',this.defaultBackground='rgb(0, 0, 0)',this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1,this.tileData=null,this.colorPalette=null,this.resetColorPalette()},d.TextAttributes.prototype.enableBold=!0,d.TextAttributes.prototype.enableBoldAsBright=!0,d.TextAttributes.prototype.DEFAULT_COLOR=new String(''),d.TextAttributes.prototype.SRC_DEFAULT='default',d.TextAttributes.prototype.SRC_RGB='rgb',d.TextAttributes.prototype.setDocument=function(e){this.document_=e},d.TextAttributes.prototype.clone=function(){var e=new d.TextAttributes(null);for(var r in this)e[r]=this[r];return e.colorPalette=this.colorPalette.concat(),e},d.TextAttributes.prototype.reset=function(){this.foregroundSource=this.SRC_DEFAULT,this.backgroundSource=this.SRC_DEFAULT,this.foreground=this.DEFAULT_COLOR,this.background=this.DEFAULT_COLOR,this.bold=!1,this.faint=!1,this.italic=!1,this.blink=!1,this.underline=!1,this.strikethrough=!1,this.inverse=!1,this.invisible=!1,this.wcNode=!1},d.TextAttributes.prototype.resetColorPalette=function(){this.colorPalette=l.colors.colorPalette.concat(),this.syncColors()},d.TextAttributes.prototype.isDefault=function(){return this.foregroundSource==this.SRC_DEFAULT&&this.backgroundSource==this.SRC_DEFAULT&&!this.bold&&!this.faint&&!this.italic&&!this.blink&&!this.underline&&!this.strikethrough&&!this.inverse&&!this.invisible&&!this.wcNode&&null==this.tileData},d.TextAttributes.prototype.createContainer=function(e){if(this.isDefault())return this.document_.createTextNode(e);var r=this.document_.createElement('span'),t=r.style;this.foreground!=this.DEFAULT_COLOR&&(t.color=this.foreground),this.background!=this.DEFAULT_COLOR&&(t.backgroundColor=this.background),this.enableBold&&this.bold&&(t.fontWeight='bold'),this.faint&&(r.faint=!0),this.italic&&(t.fontStyle='italic'),this.blink&&(t.fontStyle='italic');var o='';return this.underline&&(o+=' underline',r.underline=!0),this.strikethrough&&(o+=' line-through',r.strikethrough=!0),o&&(t.textDecoration=o),this.wcNode&&(r.className='wc-node',r.wcNode=!0),null!=this.tileData&&(r.className+=' tile tile_'+this.tileData,r.tileNode=!0),e&&(r.textContent=e),r},d.TextAttributes.prototype.matchesContainer=function(e){if('string'==typeof e||3==e.nodeType)return this.isDefault();var r=e.style;return!(this.wcNode||e.wcNode)&&!(null!=this.tileData||e.tileNode)&&this.foreground==r.color&&this.background==r.backgroundColor&&(this.enableBold&&this.bold)==!!r.fontWeight&&(this.blink||this.italic)==!!r.fontStyle&&!!this.underline==!!e.underline&&!!this.strikethrough==!!e.strikethrough},d.TextAttributes.prototype.setDefaults=function(e,r){this.defaultForeground=e,this.defaultBackground=r,this.syncColors()},d.TextAttributes.prototype.syncColors=function(){var e=this.foregroundSource,r=this.backgroundSource,t=this.DEFAULT_COLOR,o=this.DEFAULT_COLOR;if(this.inverse&&(e=this.backgroundSource,r=this.foregroundSource,t=this.defaultBackground,o=this.defaultForeground),this.enableBoldAsBright&&this.bold&&e!=this.SRC_DEFAULT&&e!=this.SRC_RGB&&(e=function(e){return 8>e?e+8:e}(e)),this.invisible&&(e=r,t=this.defaultBackground),e!=this.SRC_RGB&&(this.foreground=e==this.SRC_DEFAULT?t:this.colorPalette[e]),this.faint&&!this.invisible){var n=this.foreground==this.DEFAULT_COLOR?this.defaultForeground:this.foreground;this.foreground=l.colors.mix(n,'rgb(0, 0, 0)',0.3333)}r!=this.SRC_RGB&&(this.background=r==this.SRC_DEFAULT?o:this.colorPalette[r])},d.TextAttributes.containersMatch=function(e,r){if('string'==typeof e)return d.TextAttributes.containerIsDefault(r);if(e.nodeType!=r.nodeType)return!1;if(3==e.nodeType)return!0;var t=e.style,o=r.style;return t.color==o.color&&t.backgroundColor==o.backgroundColor&&t.fontWeight==o.fontWeight&&t.fontStyle==o.fontStyle&&t.textDecoration==o.textDecoration},d.TextAttributes.containerIsDefault=function(e){return'string'==typeof e||3==e.nodeType},d.TextAttributes.nodeWidth=function(e){return e.wcNode?l.wc.strWidth(e.textContent):e.textContent.length},d.TextAttributes.nodeSubstr=function(e,r,t){return e.wcNode?l.wc.substr(e.textContent,r,t):e.textContent.substr(r,t)},d.TextAttributes.nodeSubstring=function(e,r,t){return e.wcNode?l.wc.substring(e.textContent,r,t):e.textContent.substring(r,t)},d.TextAttributes.splitWidecharString=function(e){for(var r=[],t=0,o=0,n=0,s;n<e.length;n++)s=e.charCodeAt(n),128>s||1==l.wc.charWidth(s)?o++:(o&&r.push({str:e.substr(t,o)}),r.push({str:e.substr(n,1),wcNode:!0}),t=n+1,o=0);return o&&r.push({str:e.substr(t,o)}),r},'use strict',l.rtdep('lib.colors','lib.f','lib.UTF8Decoder','hterm.VT.CharacterMap'),d.VT=function(e){this.terminal=e,e.onMouse=this.onTerminalMouse_.bind(this),this.mouseReport=this.MOUSE_REPORT_DISABLED,this.parseState_=new d.VT.ParseState(this.parseUnknown_),this.leadingModifier_='',this.trailingModifier_='',this.allowColumnWidthChanges_=!1,this.oscTimeLimit_=2e4;var r=Object.keys(d.VT.CC1).map(function(r){return'\\x'+l.f.zpad(r.charCodeAt().toString(16),2)}).join('');this.cc1Pattern_=new RegExp('['+r+']'),this.utf8Decoder_=new l.UTF8Decoder,this.enable8BitControl=!1,this.enableClipboardWrite=!0,this.enableDec12=!1,this.characterEncoding='utf-8',this.maxStringSequence=1024,this.warnUnimplemented=!0,this.G0=d.VT.CharacterMap.maps.B,this.G1=d.VT.CharacterMap.maps[0],this.G2=d.VT.CharacterMap.maps.B,this.G3=d.VT.CharacterMap.maps.B,this.GL='G0',this.GR='G0',this.savedState_=new d.VT.CursorState(this)},d.VT.prototype.MOUSE_REPORT_DISABLED=0,d.VT.prototype.MOUSE_REPORT_CLICK=1,d.VT.prototype.MOUSE_REPORT_DRAG=3,d.VT.ParseState=function(e,r){this.defaultFunction=e,this.buf=r||null,this.pos=0,this.func=e,this.args=[]},d.VT.ParseState.prototype.reset=function(e){this.resetParseFunction(),this.resetBuf(e||''),this.resetArguments()},d.VT.ParseState.prototype.resetParseFunction=function(){this.func=this.defaultFunction},d.VT.ParseState.prototype.resetBuf=function(e){this.buf='string'==typeof e?e:null,this.pos=0},d.VT.ParseState.prototype.resetArguments=function(e){this.args.length=0,'undefined'!=typeof e&&(this.args[0]=e)},d.VT.ParseState.prototype.iarg=function(e,r){var t=this.args[e];if(t){var o=parseInt(t,10);return 0==o&&(o=r),o}return r},d.VT.ParseState.prototype.advance=function(e){this.pos+=e},d.VT.ParseState.prototype.peekRemainingBuf=function(){return this.buf.substr(this.pos)},d.VT.ParseState.prototype.peekChar=function(){return this.buf.substr(this.pos,1)},d.VT.ParseState.prototype.consumeChar=function(){return this.buf.substr(this.pos++,1)},d.VT.ParseState.prototype.isComplete=function(){return null==this.buf||this.buf.length<=this.pos},d.VT.CursorState=function(e){this.vt_=e,this.save()},d.VT.CursorState.prototype.save=function(){this.cursor=this.vt_.terminal.saveCursor(),this.textAttributes=this.vt_.terminal.getTextAttributes().clone(),this.GL=this.vt_.GL,this.GR=this.vt_.GR,this.G0=this.vt_.G0,this.G1=this.vt_.G1,this.G2=this.vt_.G2,this.G3=this.vt_.G3},d.VT.CursorState.prototype.restore=function(){this.vt_.terminal.restoreCursor(this.cursor),this.vt_.terminal.setTextAttributes(this.textAttributes.clone()),this.vt_.GL=this.GL,this.vt_.GR=this.GR,this.vt_.G0=this.G0,this.vt_.G1=this.G1,this.vt_.G2=this.G2,this.vt_.G3=this.G3},d.VT.prototype.reset=function(){this.G0=d.VT.CharacterMap.maps.B,this.G1=d.VT.CharacterMap.maps[0],this.G2=d.VT.CharacterMap.maps.B,this.G3=d.VT.CharacterMap.maps.B,this.GL='G0',this.GR='G0',this.savedState_=new d.VT.CursorState(this),this.mouseReport=this.MOUSE_REPORT_DISABLED},d.VT.prototype.onTerminalMouse_=function(t){if(this.mouseReport!=this.MOUSE_REPORT_DISABLED){var e=0,o;t.shiftKey&&(e|=4),(t.metaKey||this.terminal.keyboard.altIsMeta&&t.altKey)&&(e|=8),t.ctrlKey&&(e|=16);var n=r(l.f.clamp(t.terminalColumn+32,32,255)),a=r(l.f.clamp(t.terminalRow+32,32,255));switch(t.type){case'mousewheel':i=(0<t.wheelDeltaY?0:1)+96,i|=e,o='\x1B[M'+r(i)+n+a,t.preventDefault();break;case'mousedown':var i=s(t.which-1,2)+32;i|=e,o='\x1B[M'+r(i)+n+a;break;case'mouseup':o='\x1B[M#'+n+a;break;case'mousemove':this.mouseReport==this.MOUSE_REPORT_DRAG&&t.which&&(i=32+s(t.which-1,2),i+=32,i|=e,o='\x1B[M'+r(i)+n+a);break;case'click':case'dblclick':break;default:console.error('Unknown mouse event: '+t.type,t);}o&&this.terminal.io.sendString(o)}},d.VT.prototype.interpret=function(e){for(this.parseState_.resetBuf(this.decode(e));!this.parseState_.isComplete();){var r=this.parseState_.func,t=this.parseState_.pos,e=this.parseState_.buf;if(this.parseState_.func.call(this,this.parseState_),this.parseState_.func==r&&this.parseState_.pos==t&&this.parseState_.buf==e)throw'Parser did not alter the state!'}},d.VT.prototype.decode=function(e){return'utf-8'==this.characterEncoding?this.decodeUTF8(e):e},d.VT.prototype.encodeUTF8=function(e){return l.encodeUTF8(e)},d.VT.prototype.decodeUTF8=function(e){return this.utf8Decoder_.decode(e)},d.VT.prototype.parseUnknown_=function(e){function r(e){t[t.GL].GL&&(e=t[t.GL].GL(e)),t[t.GR].GR&&(e=t[t.GR].GR(e)),t.terminal.print(e)}var t=this,o=e.peekRemainingBuf(),n=o.search(this.cc1Pattern_);return 0==n?(this.dispatch('CC1',o.substr(0,1),e),void e.advance(1)):-1==n?(r(o),void e.reset()):void(r(o.substr(0,n)),this.dispatch('CC1',o.substr(n,1),e),e.advance(n+1))},d.VT.prototype.parseCSI_=function(e){var r=e.peekChar(),t=e.args;'@'<=r&&'~'>=r?(this.dispatch('CSI',this.leadingModifier_+this.trailingModifier_+r,e),e.resetParseFunction()):';'==r?this.trailingModifier_?e.resetParseFunction():(!t.length&&t.push(''),t.push('')):'0'<=r&&'9'>=r?this.trailingModifier_?e.resetParseFunction():t.length?t[t.length-1]+=r:t[0]=r:' '<=r&&'?'>=r&&':'!=r?t.length?this.trailingModifier_+=r:this.leadingModifier_+=r:this.cc1Pattern_.test(r)?this.dispatch('CC1',r,e):e.resetParseFunction(),e.advance(1)},d.VT.prototype.parseUntilStringTerminator_=function(e){var r=e.peekRemainingBuf(),t=r.search(/(\x1b\\|\x07)/),o=e.args;if(o.length||(o[0]='',o[1]=new Date),-1==t){o[0]+=r;var n;return(o[0].length>this.maxStringSequence&&(n='too long: '+o[0].length),-1!=o[0].indexOf('\x1B')&&(n='embedded escape: '+o[0].indexOf('\x1B')),new Date-o[1]>this.oscTimeLimit_&&(n='timeout expired: '+new Date-o[1]),n)?(console.log('parseUntilStringTerminator_: aborting: '+n,o[0]),e.reset(o[0]),!1):(e.advance(r.length),!0)}return o[0].length+t>this.maxStringSequence?(e.reset(o[0]+r),!1):(o[0]+=r.substr(0,t),e.resetParseFunction(),e.advance(t+('\x1B'==r.substr(t,1)?2:1)),!0)},d.VT.prototype.dispatch=function(e,r,t){var o=d.VT[e][r];return o?o==d.VT.ignore?void(this.warnUnimplemented&&console.warn('Ignored '+e+' code: '+JSON.stringify(r))):'CC1'==e&&'\x7F'<r&&!this.enable8BitControl?void console.warn('Ignoring 8-bit control code: 0x'+r.charCodeAt(0).toString(16)):void o.apply(this,[t,r]):void(this.warnUnimplemented&&console.warn('Unknown '+e+' code: '+JSON.stringify(r)))},d.VT.prototype.setANSIMode=function(e,r){'4'==e?this.terminal.setInsertMode(r):'20'==e?this.terminal.setAutoCarriageReturn(r):this.warnUnimplemented&&console.warn('Unimplemented ANSI Mode: '+e)},d.VT.prototype.setDECMode=function(e,r){switch(e){case'1':this.terminal.keyboard.applicationCursor=r;break;case'3':this.allowColumnWidthChanges_&&(this.terminal.setWidth(r?132:80),this.terminal.clearHome(),this.terminal.setVTScrollRegion(null,null));break;case'5':this.terminal.setReverseVideo(r);break;case'6':this.terminal.setOriginMode(r);break;case'7':this.terminal.setWraparound(r);break;case'12':this.enableDec12&&this.terminal.setCursorBlink(r);break;case'25':this.terminal.setCursorVisible(r);break;case'40':this.terminal.allowColumnWidthChanges_=r;break;case'45':this.terminal.setReverseWraparound(r);break;case'67':this.terminal.keyboard.backspaceSendsBackspace=r;break;case'1000':this.mouseReport=r?this.MOUSE_REPORT_CLICK:this.MOUSE_REPORT_DISABLED;break;case'1002':this.mouseReport=r?this.MOUSE_REPORT_DRAG:this.MOUSE_REPORT_DISABLED;break;case'1010':this.terminal.scrollOnOutput=r;break;case'1011':this.terminal.scrollOnKeystroke=r;break;case'1036':this.terminal.keyboard.metaSendsEscape=r;break;case'1039':r?!this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.previousAltSendsWhat_=this.terminal.keyboard.altSendsWhat,this.terminal.keyboard.altSendsWhat='escape'):this.terminal.keyboard.previousAltSendsWhat_&&(this.terminal.keyboard.altSendsWhat=this.terminal.keyboard.previousAltSendsWhat_,this.terminal.keyboard.previousAltSendsWhat_=null);break;case'47':case'1047':this.terminal.setAlternateMode(r);break;case'1048':this.savedState_.save();case'1049':r?(this.savedState_.save(),this.terminal.setAlternateMode(r),this.terminal.clear()):(this.terminal.setAlternateMode(r),this.savedState_.restore());break;case'2004':this.terminal.setBracketedPaste(r);break;default:this.warnUnimplemented&&console.warn('Unimplemented DEC Private Mode: '+e);}},d.VT.ignore=function(){},d.VT.CC1={},d.VT.ESC={},d.VT.CSI={},d.VT.OSC={},d.VT.VT52={},d.VT.CC1['\0']=function(){},d.VT.CC1['\x05']=d.VT.ignore,d.VT.CC1['\x07']=function(){this.terminal.ringBell()},d.VT.CC1['\b']=function(){this.terminal.cursorLeft(1)},d.VT.CC1['\t']=function(){this.terminal.forwardTabStop()},d.VT.CC1['\n']=function(){this.terminal.formFeed()},d.VT.CC1['\x0B']=d.VT.CC1['\n'],d.VT.CC1['\f']=function(){this.terminal.formFeed()},d.VT.CC1['\r']=function(){this.terminal.setCursorColumn(0)},d.VT.CC1['\x0E']=function(){this.GL='G1'},d.VT.CC1['\x0F']=function(){this.GL='G0'},d.VT.CC1['\x11']=d.VT.ignore,d.VT.CC1['\x13']=d.VT.ignore,d.VT.CC1['\x18']=function(e){e.resetParseFunction(),this.terminal.print('?')},d.VT.CC1['\x1A']=d.VT.CC1['\x18'],d.VT.CC1['\x1B']=function(e){function r(e){var t=e.consumeChar();'\x1B'==t||(this.dispatch('ESC',t,e),e.func==r&&e.resetParseFunction())}e.func=r},d.VT.CC1['\x7F']=d.VT.ignore,d.VT.CC1['\x84']=d.VT.ESC.D=function(){this.terminal.lineFeed()},d.VT.CC1['\x85']=d.VT.ESC.E=function(){this.terminal.setCursorColumn(0),this.terminal.cursorDown(1)},d.VT.CC1['\x88']=d.VT.ESC.H=function(){this.terminal.setTabStop(this.terminal.getCursorColumn())},d.VT.CC1['\x8D']=d.VT.ESC.M=function(){this.terminal.reverseLineFeed()},d.VT.CC1['\x8E']=d.VT.ESC.N=d.VT.ignore,d.VT.CC1['\x8F']=d.VT.ESC.O=d.VT.ignore,d.VT.CC1['\x90']=d.VT.ESC.P=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},d.VT.CC1['\x96']=d.VT.ESC.V=d.VT.ignore,d.VT.CC1['\x97']=d.VT.ESC.W=d.VT.ignore,d.VT.CC1['\x98']=d.VT.ESC.X=d.VT.ignore,d.VT.CC1['\x9A']=d.VT.ESC.Z=function(){this.terminal.io.sendString('\x1B[?1;2c')},d.VT.CC1['\x9B']=d.VT.ESC['[']=function(e){e.resetArguments(),this.leadingModifier_='',this.trailingModifier_='',e.func=this.parseCSI_},d.VT.CC1['\x9C']=d.VT.ESC['\\']=d.VT.ignore,d.VT.CC1['\x9D']=d.VT.ESC[']']=function(e){function r(e){if(this.parseUntilStringTerminator_(e)&&e.func!=r){var t=e.args[0].match(/^(\d+);(.*)$/);t?(e.args[0]=t[2],this.dispatch('OSC',t[1],e)):console.warn('Invalid OSC: '+JSON.stringify(e.args[0]))}}e.resetArguments(),e.func=r},d.VT.CC1['\x9E']=d.VT.ESC['^']=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},d.VT.CC1['\x9F']=d.VT.ESC._=function(e){e.resetArguments(),e.func=this.parseUntilStringTerminator_},d.VT.ESC[' ']=function(e){e.func=function(e){var r=e.consumeChar();this.warnUnimplemented&&console.warn('Unimplemented sequence: ESC 0x20 '+r),e.resetParseFunction()}},d.VT.ESC['#']=function(e){e.func=function(e){var r=e.consumeChar();'8'==r&&this.terminal.fill('E'),e.resetParseFunction()}},d.VT.ESC['%']=function(e){e.func=function(e){var r=e.consumeChar();'@'!=r&&'G'!=r&&this.warnUnimplemented&&console.warn('Unknown ESC % argument: '+JSON.stringify(r)),e.resetParseFunction()}},d.VT.ESC['(']=d.VT.ESC[')']=d.VT.ESC['*']=d.VT.ESC['+']=d.VT.ESC['-']=d.VT.ESC['.']=d.VT.ESC['/']=function(e,r){e.func=function(e){var t=e.consumeChar();return'\x1B'==t?(e.resetParseFunction(),void e.func()):void(t in d.VT.CharacterMap.maps?'('==r?this.G0=d.VT.CharacterMap.maps[t]:')'==r||'-'==r?this.G1=d.VT.CharacterMap.maps[t]:'*'==r||'.'==r?this.G2=d.VT.CharacterMap.maps[t]:('+'==r||'/'==r)&&(this.G3=d.VT.CharacterMap.maps[t]):this.warnUnimplemented&&console.log('Invalid character set for "'+r+'": '+t),e.resetParseFunction())}},d.VT.ESC[6]=d.VT.ignore,d.VT.ESC[7]=function(){this.savedState_.save()},d.VT.ESC[8]=function(){this.savedState_.restore()},d.VT.ESC[9]=d.VT.ignore,d.VT.ESC['=']=function(){this.terminal.keyboard.applicationKeypad=!0},d.VT.ESC['>']=function(){this.terminal.keyboard.applicationKeypad=!1},d.VT.ESC.F=d.VT.ignore,d.VT.ESC.c=function(){this.reset(),this.terminal.reset()},d.VT.ESC.l=d.VT.ESC.m=d.VT.ignore,d.VT.ESC.n=function(){this.GL='G2'},d.VT.ESC.o=function(){this.GL='G3'},d.VT.ESC['|']=function(){this.GR='G3'},d.VT.ESC['}']=function(){this.GR='G2'},d.VT.ESC['~']=function(){this.GR='G1'},d.VT.OSC[0]=function(e){this.terminal.setWindowTitle(e.args[0])},d.VT.OSC[2]=d.VT.OSC[0],d.VT.OSC[4]=function(e){for(var r=e.args[0].split(';'),t=parseInt(r.length/2),o=this.terminal.getTextAttributes().colorPalette,n=[],s=0;s<t;++s){var a=parseInt(r[2*s]),i=r[2*s+1];if(!(a>=o.length)){if('?'==i){i=l.colors.rgbToX11(o[a]),i&&n.push(a+';'+i);continue}i=l.colors.x11ToCSS(i),i&&(o[a]=i)}}n.length&&this.terminal.io.sendString('\x1B]4;'+n.join(';')+'\x07')},d.VT.OSC[50]=function(e){var r=e.args[0].match(/CursorShape=(.)/i);if(!r)return void console.warn('Could not parse OSC 50 args: '+e.args[0]);switch(r[1]){case'1':this.terminal.setCursorShape(d.Terminal.cursorShape.BEAM);break;case'2':this.terminal.setCursorShape(d.Terminal.cursorShape.UNDERLINE);break;default:this.terminal.setCursorShape(d.Terminal.cursorShape.BLOCK);}},d.VT.OSC[52]=function(e){var r=e.args[0].match(/^[cps01234567]*;(.*)/);if(r){var t=window.atob(r[1]);t&&this.terminal.copyStringToClipboard(this.decode(t))}},d.VT.CSI['@']=function(e){this.terminal.insertSpace(e.iarg(0,1))},d.VT.CSI.A=function(e){this.terminal.cursorUp(e.iarg(0,1))},d.VT.CSI.B=function(e){this.terminal.cursorDown(e.iarg(0,1))},d.VT.CSI.C=function(e){this.terminal.cursorRight(e.iarg(0,1))},d.VT.CSI.D=function(e){this.terminal.cursorLeft(e.iarg(0,1))},d.VT.CSI.E=function(e){this.terminal.cursorDown(e.iarg(0,1)),this.terminal.setCursorColumn(0)},d.VT.CSI.F=function(e){this.terminal.cursorUp(e.iarg(0,1)),this.terminal.setCursorColumn(0)},d.VT.CSI.G=function(e){this.terminal.setCursorColumn(e.iarg(0,1)-1)},d.VT.CSI.H=function(e){this.terminal.setCursorPosition(e.iarg(0,1)-1,e.iarg(1,1)-1)},d.VT.CSI.I=function(e){var r=e.iarg(0,1);r=l.f.clamp(r,1,this.terminal.screenSize.width);for(var t=0;t<r;t++)this.terminal.forwardTabStop()},d.VT.CSI.J=d.VT.CSI['?J']=function(e){var r=e.args[0];r&&'0'!=r?'1'==r?this.terminal.eraseAbove():'2'==r?this.terminal.clear():'3'==r&&this.terminal.clear():this.terminal.eraseBelow()},d.VT.CSI.K=d.VT.CSI['?K']=function(e){var r=e.args[0];r&&'0'!=r?'1'==r?this.terminal.eraseToLeft():'2'==r&&this.terminal.eraseLine():this.terminal.eraseToRight()},d.VT.CSI.L=function(e){this.terminal.insertLines(e.iarg(0,1))},d.VT.CSI.M=function(e){this.terminal.deleteLines(e.iarg(0,1))},d.VT.CSI.P=function(e){this.terminal.deleteChars(e.iarg(0,1))},d.VT.CSI.S=function(e){this.terminal.vtScrollUp(e.iarg(0,1))},d.VT.CSI.T=function(e){1>=e.args.length&&this.terminal.vtScrollDown(e.iarg(0,1))},d.VT.CSI['>T']=d.VT.ignore,d.VT.CSI.X=function(e){this.terminal.eraseToRight(e.iarg(0,1))},d.VT.CSI.Z=function(e){var r=e.iarg(0,1);r=l.f.clamp(r,1,this.terminal.screenSize.width);for(var t=0;t<r;t++)this.terminal.backwardTabStop()},d.VT.CSI['`']=function(e){this.terminal.setCursorColumn(e.iarg(0,1)-1)},d.VT.CSI.b=d.VT.ignore,d.VT.CSI.c=function(e){e.args[0]&&'0'!=e.args[0]||this.terminal.io.sendString('\x1B[?1;2c')},d.VT.CSI['>c']=function(){this.terminal.io.sendString('\x1B[>0;256;0c')},d.VT.CSI.d=function(e){this.terminal.setAbsoluteCursorRow(e.iarg(0,1)-1)},d.VT.CSI.f=d.VT.CSI.H,d.VT.CSI.g=function(e){e.args[0]&&'0'!=e.args[0]?'3'==e.args[0]&&this.terminal.clearAllTabStops():this.terminal.clearTabStopAtCursor(!1)},d.VT.CSI.h=function(e){for(var r=0;r<e.args.length;r++)this.setANSIMode(e.args[r],!0)},d.VT.CSI['?h']=function(e){for(var r=0;r<e.args.length;r++)this.setDECMode(e.args[r],!0)},d.VT.CSI.i=d.VT.CSI['?i']=d.VT.ignore,d.VT.CSI.l=function(e){for(var r=0;r<e.args.length;r++)this.setANSIMode(e.args[r],!1)},d.VT.CSI['?l']=function(e){for(var r=0;r<e.args.length;r++)this.setDECMode(e.args[r],!1)},d.VT.CSI.m=function(e){function r(r){return e.args.length<r+2||'5'!=e.args[r+1]?null:e.iarg(r+2,0)}function t(t){if(e.args.length<t+5||'2'!=e.args[t+1])return null;var o=e.iarg(t+2,0),r=e.iarg(t+3,0),n=e.iarg(t+4,0);return'rgb('+o+' ,'+r+' ,'+n+')'}var o=this.terminal.getTextAttributes();if(!e.args.length)return void o.reset();for(var n=0,s;n<e.args.length;n++)if(s=e.iarg(n,0),30>s)0==s?o.reset():1==s?o.bold=!0:2==s?o.faint=!0:3==s?o.italic=!0:4==s?o.underline=!0:5==s?o.blink=!0:7==s?o.inverse=!0:8==s?o.invisible=!0:9==s?o.strikethrough=!0:22==s?(o.bold=!1,o.faint=!1):23==s?o.italic=!1:24==s?o.underline=!1:25==s?o.blink=!1:27==s?o.inverse=!1:28==s?o.invisible=!1:29==s&&(o.strikethrough=!1);else if(!(50>s))90<=s&&97>=s?o.foregroundSource=s-90+8:100<=s&&107>=s&&(o.backgroundSource=s-100+8);else if(38>s)o.foregroundSource=s-30;else if(38==s){var a=t(n);if(null!=a)o.foregroundSource=o.SRC_RGB,o.foreground=a,n+=5;else{var i=r(n);if(null==i)break;if(n+=2,i>=o.colorPalette.length)continue;o.foregroundSource=i}}else if(39==s)o.foregroundSource=o.SRC_DEFAULT;else if(48>s)o.backgroundSource=s-40;else if(48==s){var a=t(n);if(null!=a)o.backgroundSource=o.SRC_RGB,o.background=a,n+=5;else{var i=r(n);if(null==i)break;if(n+=2,i>=o.colorPalette.length)continue;o.backgroundSource=i}}else o.backgroundSource=o.SRC_DEFAULT;o.setDefaults(this.terminal.getForegroundColor(),this.terminal.getBackgroundColor())},d.VT.CSI['>m']=d.VT.ignore,d.VT.CSI.n=function(e){if('5'==e.args[0])this.terminal.io.sendString('\x1B0n');else if('6'==e.args[0]){var r=this.terminal.getCursorRow()+1,t=this.terminal.getCursorColumn()+1;this.terminal.io.sendString('\x1B['+r+';'+t+'R')}},d.VT.CSI['>n']=d.VT.ignore,d.VT.CSI['?n']=function(e){if('6'==e.args[0]){var r=this.terminal.getCursorRow()+1,t=this.terminal.getCursorColumn()+1;this.terminal.io.sendString('\x1B['+r+';'+t+'R')}else'15'==e.args[0]?this.terminal.io.sendString('\x1B[?11n'):'25'==e.args[0]?this.terminal.io.sendString('\x1B[?21n'):'26'==e.args[0]?this.terminal.io.sendString('\x1B[?12;1;0;0n'):'53'==e.args[0]&&this.terminal.io.sendString('\x1B[?50n')},d.VT.CSI['>p']=d.VT.ignore,d.VT.CSI['!p']=function(){this.reset(),this.terminal.softReset()},d.VT.CSI.$p=d.VT.ignore,d.VT.CSI['?$p']=d.VT.ignore,d.VT.CSI['"p']=d.VT.ignore,d.VT.CSI.q=d.VT.ignore,d.VT.CSI[' q']=function(e){var r=e.args[0];'0'==r||'1'==r?(this.terminal.setCursorShape(d.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!0)):'2'==r?(this.terminal.setCursorShape(d.Terminal.cursorShape.BLOCK),this.terminal.setCursorBlink(!1)):'3'==r?(this.terminal.setCursorShape(d.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!0)):'4'==r?(this.terminal.setCursorShape(d.Terminal.cursorShape.UNDERLINE),this.terminal.setCursorBlink(!1)):console.warn('Unknown cursor style: '+r)},d.VT.CSI['"q']=d.VT.ignore,d.VT.CSI.r=function(e){var r=e.args,t=r[0]?parseInt(r[0],10)-1:null,o=r[1]?parseInt(r[1],10)-1:null;this.terminal.setVTScrollRegion(t,o),this.terminal.setCursorPosition(0,0)},d.VT.CSI['?r']=d.VT.ignore,d.VT.CSI.$r=d.VT.ignore,d.VT.CSI.s=function(){this.savedState_.save()},d.VT.CSI['?s']=d.VT.ignore,d.VT.CSI.t=d.VT.ignore,d.VT.CSI.$t=d.VT.ignore,d.VT.CSI['>t']=d.VT.ignore,d.VT.CSI[' t']=d.VT.ignore,d.VT.CSI.u=function(){this.savedState_.restore()},d.VT.CSI[' u']=d.VT.ignore,d.VT.CSI.$v=d.VT.ignore,d.VT.CSI['\'w']=d.VT.ignore,d.VT.CSI.x=d.VT.ignore,d.VT.CSI['*x']=d.VT.ignore,d.VT.CSI.$x=d.VT.ignore,d.VT.CSI.z=function(e){if(!(1>e.args.length)){var r=e.args[0];if('0'==r){if(2>e.args.length)return;this.terminal.getTextAttributes().tileData=e.args[1]}else'1'==r&&(this.terminal.getTextAttributes().tileData=null)}},d.VT.CSI['\'z']=d.VT.ignore,d.VT.CSI.$z=d.VT.ignore,d.VT.CSI['\'{']=d.VT.ignore,d.VT.CSI['\'|']=d.VT.ignore,d.VT.CSI[' }']=d.VT.ignore,d.VT.CSI[' ~']=d.VT.ignore,'use strict',l.rtdep('lib.f'),d.VT.CharacterMap=function(e,r){this.name=e,this.GL=null,this.GR=null,r&&this.reset(r)},d.VT.CharacterMap.prototype.reset=function(e){this.glmap=e;var t=Object.keys(this.glmap).map(function(e){return'\\x'+l.f.zpad(e.charCodeAt(0).toString(16))});this.glre=new RegExp('['+t.join('')+']','g'),this.grmap={},t.forEach(function(e){var t=r(128&e.charCodeAt(0));this.grmap[t]=this.glmap[e]}.bind(this));var o=Object.keys(this.grmap).map(function(e){return'\\x'+l.f.zpad(e.charCodeAt(0).toString(16),2)});this.grre=new RegExp('['+o.join('')+']','g'),this.GL=function(e){return e.replace(this.glre,function(e){return this.glmap[e]}.bind(this))}.bind(this),this.GR=function(e){return e.replace(this.grre,function(e){return this.grmap[e]}.bind(this))}.bind(this)},d.VT.CharacterMap.maps={},d.VT.CharacterMap.maps[0]=new d.VT.CharacterMap('graphic',{"`":'\u25C6',a:'\u2592',b:'\u2409',c:'\u240C',d:'\u240D',e:'\u240A',f:'\xB0',g:'\xB1',h:'\u2424',i:'\u240B',j:'\u2518',k:'\u2510',l:'\u250C',m:'\u2514',n:'\u253C',o:'\u23BA',p:'\u23BB',q:'\u2500',r:'\u23BC',s:'\u23BD',t:'\u251C',u:'\u2524',v:'\u2534',w:'\u252C',x:'\u2502',y:'\u2264',z:'\u2265',"{":'\u03C0',"|":'\u2260',"}":'\xA3',"~":'\xB7'}),d.VT.CharacterMap.maps.A=new d.VT.CharacterMap('british',{"#":'\xA3'}),d.VT.CharacterMap.maps.B=new d.VT.CharacterMap('us',null),d.VT.CharacterMap.maps[4]=new d.VT.CharacterMap('dutch',{"#":'\xA3',"@":'\xBE',"[":'\u0132',"\\":'\xBD',"]":'|',"{":'\xA8',"|":'f',"}":'\xBC',"~":'\xB4'}),d.VT.CharacterMap.maps.C=d.VT.CharacterMap.maps[5]=new d.VT.CharacterMap('finnish',{"[":'\xC4',"\\":'\xD6',"]":'\xC5',"^":'\xDC',"`":'\xE9',"{":'\xE4',"|":'\xF6',"}":'\xE5',"~":'\xFC'}),d.VT.CharacterMap.maps.R=new d.VT.CharacterMap('french',{"#":'\xA3',"@":'\xE0',"[":'\xB0',"\\":'\xE7',"]":'\xA7',"{":'\xE9',"|":'\xF9',"}":'\xE8',"~":'\xA8'}),d.VT.CharacterMap.maps.Q=new d.VT.CharacterMap('french canadian',{"@":'\xE0',"[":'\xE2',"\\":'\xE7',"]":'\xEA',"^":'\xEE',"`":'\xF4',"{":'\xE9',"|":'\xF9',"}":'\xE8',"~":'\xFB'}),d.VT.CharacterMap.maps.K=new d.VT.CharacterMap('german',{"@":'\xA7',"[":'\xC4',"\\":'\xD6',"]":'\xDC',"{":'\xE4',"|":'\xF6',"}":'\xFC',"~":'\xDF'}),d.VT.CharacterMap.maps.Y=new d.VT.CharacterMap('italian',{"#":'\xA3',"@":'\xA7',"[":'\xB0',"\\":'\xE7',"]":'\xE9',"`":'\xF9',"{":'\xE0',"|":'\xF2',"}":'\xE8',"~":'\xEC'}),d.VT.CharacterMap.maps.E=d.VT.CharacterMap.maps[6]=new d.VT.CharacterMap('norwegian/danish',{"@":'\xC4',"[":'\xC6',"\\":'\xD8',"]":'\xC5',"^":'\xDC',"`":'\xE4',"{":'\xE6',"|":'\xF8',"}":'\xE5',"~":'\xFC'}),d.VT.CharacterMap.maps.Z=new d.VT.CharacterMap('spanish',{"#":'\xA3',"@":'\xA7',"[":'\xA1',"\\":'\xD1',"]":'\xBF',"{":'\xB0',"|":'\xF1',"}":'\xE7'}),d.VT.CharacterMap.maps[7]=d.VT.CharacterMap.maps.H=new d.VT.CharacterMap('swedish',{"@":'\xC9',"[":'\xC4',"\\":'\xD6',"]":'\xC5',"^":'\xDC',"`":'\xE9',"{":'\xE4',"|":'\xF6',"}":'\xE5',"~":'\xFC'}),d.VT.CharacterMap.maps['=']=new d.VT.CharacterMap('swiss',{"#":'\xF9',"@":'\xE0',"[":'\xE9',"\\":'\xE7',"]":'\xEA',"^":'\xEE',_:'\xE8',"`":'\xF4',"{":'\xE4',"|":'\xF6',"}":'\xFC',"~":'\xFB'}),l.resource.add('hterm/audio/bell','audio/ogg;base64','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'),l.resource.add('hterm/concat/date','text/plain','Fri, 03 Apr 2015 09:02:15 +0000'),l.resource.add('hterm/changelog/version','text/plain','1.54'),l.resource.add('hterm/changelog/date','text/plain','2015-03-19'),l.resource.add('hterm/git/HEAD','text/plain','5db5b0ceefff97ce8b7a97edd3f5ba6857db54cf'),{lib:l,hterm:d}});